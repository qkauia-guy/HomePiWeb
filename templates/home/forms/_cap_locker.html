<div class="card mb-3" id="lockerCard" data-cap-id="{{ cap.id }}">
  <div class="card-body">
    <h5 class="card-title mb-3">{{ device.label }}｜{{ cap.name }}</h5>


    <div class="row align-items-start">
      
      <!-- 左邊：電子鎖控制按鈕 -->
      <div class="col-md-5 d-flex flex-wrap gap-3">
        {# 上鎖按鈕 #}
        <button
          class="btn btn-outline-secondary locker-btn"
          id="lockBtn-{{ cap.id }}"
          data-action="lock"
          data-url="{% url 'capability_action' device_id=device.id cap_id=cap.id action='lock' %}"
          data-group="{{ group_id }}"
        >
          <i class="bi bi-lock me-1"></i> 上鎖
        </button>

        {# 開鎖按鈕 #}
        <button
          class="btn btn-outline-success locker-btn"
          id="unlockBtn-{{ cap.id }}"
          data-action="unlock"
          data-url="{% url 'capability_action' device_id=device.id cap_id=cap.id action='unlock' %}"
          data-group="{{ group_id }}"
        >
          <i class="bi bi-unlock me-1"></i> 開鎖
        </button>

        {# 切換按鈕 #}
        <button
          class="btn btn-outline-primary locker-btn"
          id="toggleBtn-{{ cap.id }}"
          data-action="toggle"
          data-url="{% url 'capability_action' device_id=device.id cap_id=cap.id action='toggle' %}"
          data-group="{{ group_id }}"
        >
          <i class="bi bi-arrow-repeat me-1"></i> 切換
        </button>
      </div>

      <!-- 右邊：狀態資訊 -->
      <div class="col-md-7">
        <div class="d-flex align-items-center gap-3">
          <span class="badge bg-secondary" id="lockerBadge">狀態未知</span>
          <span class="small text-muted" id="lockerText">等待更新...</span>
          <div class="spinner-border spinner-border-sm text-primary d-none" id="lockerSpinner"></div>
        </div>
        <div class="small text-muted mt-2" id="lockerStatusText">手動控制</div>
        <div class="small text-muted" id="lockerAutoText">未啟用</div>
      </div>
    </div>
  </div>
</div>


