{% extends "base.html" %}
{% load static %}
{% block title %}註冊設備{% endblock %}

{% block content %}
<div class="container py-4 py-md-5">
  <div class="row justify-content-center">
    <div class="col-11 col-sm-10 col-md-7 col-lg-5 col-xl-4">
      <div class="card shadow-sm rounded-4">
        <div class="card-body p-4 p-md-5">
          <h1 class="h4 brand mb-4 text-center text-md-start">裝置註冊</h1>

          <form method="post" id="register-form" novalidate>
            {% csrf_token %}

            {% if form.non_field_errors %}
              <div class="alert alert-danger small">{{ form.non_field_errors }}</div>
            {% endif %}

            {% for field in form %}
              <div class="mb-3">
                <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                {{ field }}
                {% if field.help_text %}
                  <div class="form-text">{{ field.help_text }}</div>
                {% endif %}
                {% if field.errors %}
                  <div class="text-danger small mt-1">
                    {{ field.errors|join:", " }}
                  </div>
                {% endif %}
              </div>
            {% endfor %}

            <div class="mt-4">
              <div>
                <button type="submit" class="btn btn-primary w-100 w-sm-auto" id="register-btn">
                  註冊帳號
                </button>
              </div>
            </div>
          </form>
          <hr class="my-4">
          <form method="post" action="{% url 'login' %}" class="row g-2">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}">
            <div class="col-12">
              <label class="form-label" for="id_username">Email</label>
              <input type="text" name="username" class="form-control" id="id_username" required>
            </div>
            <div class="col-12">
              <label class="form-label" for="id_password">密碼</label>
              <input type="password" name="password" class="form-control" id="id_password" required>
            </div>
            <div class="col-12 mt-2">
              <button type="submit" class="btn btn-outline-secondary w-100 w-sm-auto">登入</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_js %}
  <script defer src="{% static 'users/js/register.js' %}"></script>
{% endblock %}