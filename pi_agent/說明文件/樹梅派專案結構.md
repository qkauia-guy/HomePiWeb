<!-- markdownlint-disable -->

### 樹梅派專案資料結構：

```bash
pi_agent
├─ config/                 # 設定與能力宣告
│  ├─ __init__.py
│  ├─ capabilities.json    # (靜態) 宣告此樹莓派可提供的capabilities（ex: camera, led...）
│  ├─ homepi.yml           # (動態) 執行環境設定：伺服器URL、序號、token、HLS參數等
│  └─ loader.py            # 載入 YAML/JSON、提供預設值、環境變數覆寫、驗證
│
├─ detect/                 # 硬體偵測（開機時用）
│  ├─ __init__.py
│  ├─ hat.py               # 檢測 HAT 擴充板（型號、版本）
│  ├─ i2c.py               # 掃 I²C bus，列出感測器
│  ├─ one_wire.py          # 偵測 1-Wire 裝置（如溫度計）
│  └─ registry.py          # 整合結果 → 回報到 capabilities.json 或上報伺服器
│
├─ devices/                # 實際控制裝置（驅動）
│  ├─ __init__.py
│  ├─ camera.py            # 控相機：開始/停止推流、查狀態；呼叫 rpicam-vid/ffmpeg 或 pipe
│  └─ led.py               # 控 LED（開/關/閃爍）
│
├─ http_agent.py           # 核心常駐程序：長輪詢伺服器拉指令、回 ACK、送 ping
│
├─ serve_hls.py            # （可選）一鍵啟動 HLS：spawn rpicam-vid|ffmpeg + 啟 http_hls.py
│
├─ stream/
│  ├─ __init__.py
│  └─ http_hls.py          # 超輕量 HTTP 伺服器：對外提供 HLS 靜態檔（8088）
│
├─ utils/
│  ├─ __init__.py
│  └─ http.py              # requests 包裝、重試、逾時、簽章（若有）
│
└─ 說明文件                 # 你自己的說明/指南
```

##### config
