/* 限制 Offcanvas 內容最大寬度，避免看起來太寬 */
#sideBar .offcanvas-body,
#sideBarGroups .offcanvas-body {
  max-width: 420px;
}

/* 清單容器（用 gap 模擬 list-group 的間距） */
#sideBar .device-list,
#sideBarGroups .device-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin: 0;
  padding: 0;
}

/* 單一項目卡片化 - 白天模式毛玻璃效果 */
html:not([data-theme='dark']) #sideBar .device-item,
html:not([data-theme='dark']) #sideBarGroups .device-item {
  border: 1px solid rgba(148, 163, 184, 0.3);
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.15s ease;
  text-decoration: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* 單一項目卡片化 - 黑夜模式毛玻璃效果 */
html[data-theme='dark'] #sideBar .device-item,
html[data-theme='dark'] #sideBarGroups .device-item {
  border: 1px solid rgba(71, 85, 105, 0.3);
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  background: rgba(30, 41, 59, 0.3);
  backdrop-filter: blur(10px) saturate(150%);
  -webkit-backdrop-filter: blur(10px) saturate(150%);
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.15s ease;
  text-decoration: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* hover/active 效果 - 白天模式 */
html:not([data-theme='dark']) #sideBar .device-item:hover,
html:not([data-theme='dark']) #sideBar .device-item:focus,
html:not([data-theme='dark']) #sideBarGroups .device-item:hover,
html:not([data-theme='dark']) #sideBarGroups .device-item:focus {
  border-color: rgba(59, 130, 246, 0.6);
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(12px) saturate(140%);
  -webkit-backdrop-filter: blur(12px) saturate(140%);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
  text-decoration: none;
}

/* hover/active 效果 - 黑夜模式 */
html[data-theme='dark'] #sideBar .device-item:hover,
html[data-theme='dark'] #sideBar .device-item:focus,
html[data-theme='dark'] #sideBarGroups .device-item:hover,
html[data-theme='dark'] #sideBarGroups .device-item:focus {
  border-color: rgba(139, 92, 246, 0.6);
  background: rgba(30, 41, 59, 0.5);
  backdrop-filter: blur(15px) saturate(180%);
  -webkit-backdrop-filter: blur(15px) saturate(180%);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
  transform: translateY(-1px);
  text-decoration: none;
}

/* 左側狀態點 */
#sideBar .status-dot,
#sideBarGroups .status-dot {
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 50%;
  background: var(--bs-secondary);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--bs-secondary), transparent 75%);
}
#sideBar .status-dot.on,
#sideBarGroups .status-dot.on {
  background: var(--bs-success);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--bs-success), transparent 75%);
}

/* 黑暗模式下的 sideBar 狀態點 */
[data-theme='dark'] #sideBar .status-dot,
[data-theme='dark'] #sideBarGroups .status-dot {
  background: #ff6b6b !important;
  box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.5),
    0 0 12px rgba(255, 107, 107, 0.6), 0 0 20px rgba(255, 107, 107, 0.3) !important;
}
[data-theme='dark'] #sideBar .status-dot.on,
[data-theme='dark'] #sideBarGroups .status-dot.on {
  background: #fbbf24 !important;
  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.5),
    0 0 12px rgba(251, 191, 36, 0.7), 0 0 20px rgba(251, 191, 36, 0.4) !important;
}

/* 次要資訊一點行高 */
#sideBar .device-sub,
#sideBarGroups .device-sub {
  line-height: 1.2;
}

/* 右側箭頭 */
#sideBar .chev,
#sideBarGroups .chev {
  font-size: 1.25rem;
  opacity: 0.5;
}

/* 手機時更緊湊一點 */
@media (max-width: 576px) {
  #sideBar .offcanvas-body,
  #sideBarGroups .offcanvas-body {
    max-width: none !important; /* 移除最大寬度限制 */
    width: 100% !important; /* 使用全寬 */
  }
  #sideBar .device-item,
  #sideBarGroups .device-item {
    padding: 0.75rem 1rem; /* 增加內距 */
  }

  /* 手機版絕對定位 - 只針對圖標和箭頭 */
  .device-item {
    position: relative !important;
    padding: 1rem 3rem !important; /* 上下增加padding，左右為圖標箭頭留空間 */
  }

  /* 狀態點絕對定位 - 使用更具體的選擇器覆蓋 group_items.css */
  .offcanvas-body .device-item .status-dot,
  .groups-scope .device-item .status-dot,
  #sideBar .device-item .status-dot,
  #sideBarGroups .device-item .status-dot {
    position: absolute !important;
    left: 0.75rem !important; /* 稍微往左移，避免重疊 */
    top: calc(50% - 2px) !important; /* 往上移2px，與箭頭一致 */
    transform: translateY(-50%) !important;
    width: 0.7rem !important; /* 稍微縮小 */
    height: 0.7rem !important;
    border-radius: 50% !important;
    flex-shrink: 0 !important;
    margin: 0 !important; /* 清除任何 margin */
    display: block !important; /* 確保顯示 */
  }

  /* 箭頭絕對定位 - 使用更具體的選擇器覆蓋 group_items.css */
  .offcanvas-body .device-item .chev,
  .groups-scope .device-item .chev,
  #sideBar .device-item .chev,
  #sideBarGroups .device-item .chev {
    position: absolute !important;
    right: 1rem !important;
    top: calc(50% - 2px) !important; /* 往上移2px */
    transform: translateY(-50%) !important;
    font-size: 1.5rem !important;
    opacity: 0.6 !important;
    flex-shrink: 0 !important;
    margin: 0 !important; /* 清除任何 margin */
    display: block !important; /* 確保顯示 */
  }

  /* 文字內容區域 - 水平置中 */
  .device-item .d-flex.align-items-center.gap-3 {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    justify-content: center !important; /* 水平置中 */
    text-align: center !important; /* 文字置中 */
  }

  .device-item .d-flex.align-items-center.gap-3 > div {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    text-align: center !important; /* 文字置中 */
  }
}

/* =========================
   深灰工業金屬風 (Dark Iron / Steel)
   ========================= */
:root {
  --iron-bg: #1e1e1e; /* 背景深灰 */
  --iron-surface: #2b2b2b; /* 表格底色 */
  --iron-border: #3c3c3c; /* 邊框灰 */
  --iron-highlight: #aaaaaa; /* 高光銀灰 */
  --iron-text: #e5e5e5; /* 亮灰字體 */
  --iron-danger: #ff6b6b; /* 鮮紅 (offline) */
  --iron-success: #6bff8a; /* 螢光綠 (online) */
}

#deviceLogsTable {
  border-collapse: collapse;
  width: 100%;
  background: var(--iron-surface);
  border: 1px solid var(--iron-border);
  border-radius: 6px;
  overflow: hidden;
  font-family: 'Consolas', 'Courier New', monospace;
  color: var(--iron-text);
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.08),
    0 0 12px rgba(0, 0, 0, 0.7);
}

/* 表頭 */
#deviceLogsTable thead {
  background: linear-gradient(180deg, #3a3a3a, #1e1e1e);
  color: var(--iron-highlight);
  text-transform: uppercase;
  font-weight: bold;
  letter-spacing: 0.05em;
  border-bottom: 2px solid var(--iron-border);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
}

/* 表格內容 */
#deviceLogsTable tbody tr {
  transition: background 0.25s;
}
#deviceLogsTable tbody tr:nth-child(even) {
  background: #242424;
}
#deviceLogsTable tbody tr:hover {
  background: #353535;
}

/* 儲存格 */
#deviceLogsTable td,
#deviceLogsTable th {
  padding: 0.6rem 0.8rem;
  border-bottom: 1px solid var(--iron-border);
  text-align: center;
}

/* 狀態上色 */
.status-online {
  color: var(--iron-success);
  font-weight: bold;
  text-shadow: 0 0 4px rgb(249, 254, 250);
}
.status-offline {
  color: var(--iron-danger);
  font-weight: bold;
  text-shadow: 0 0 4px rgba(255, 107, 107, 0.6);
}

.toggle-icon {
  transition: transform 0.3s ease;
  display: inline-block;
  font-size: 1.2rem;
}

/* 當展開時，箭頭向上旋轉 */
a[aria-expanded='true'] .toggle-icon {
  transform: rotate(180deg);
}

.accordion-btn {
  background: #2a2a2a; /* 深灰背景 */
  color: #e0e0e0;
  padding: 0.75rem 1rem;
  border: 1px solid #3c3c3c;
  border-radius: 0.5rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: background 0.3s, box-shadow 0.3s;
  cursor: pointer;
}

.accordion-btn:hover {
  background: #3a3a3a;
  box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.1),
    inset 0 -1px 2px rgba(0, 0, 0, 0.6);
}

.toggle-icon {
  transition: transform 0.3s ease;
}

/* 當展開時箭頭往上 */
button[aria-expanded='true'] .toggle-icon {
  transform: rotate(180deg);
}

#deviceLogsChart {
  background-color: #fff; /* 白底 */
  border-radius: 6px; /* 可選，讓邊角圓滑一點 */
  padding: 8px; /* 可選，避免線貼邊 */
}

#deviceLogsChart {
  background-color: var(--chart-bg);
  border-radius: 6px;
  padding: 8px;
  box-shadow: 0 2px 8px var(--card-shadow-hover);
  border: 1px solid var(--chart-border);
}

/* =========================
   Navbar 響應式設計 (RWD)
   ========================= */

/* 平板尺寸優化 (768px - 1024px) */
@media (max-width: 1024px) and (min-width: 768px) {
  .navbar-brand {
    font-size: 1.1rem;
  }
  
  .navbar-nav .nav-link {
    padding: 0.4rem 0.6rem;
    font-size: 0.9rem;
  }
  
  .navbar-text {
    font-size: 0.85rem;
  }
}

/* 手機尺寸優化 (小於 768px) */
@media (max-width: 767.98px) {
  /* Navbar 高度調整 - 手機版毛玻璃效果（參考 carousel） */
  html:not([data-theme='dark']) .navbar.navbar-expand-lg.navbar-dark,
  html:not([data-theme='dark']) .navbar {
    min-height: 56px !important;
    padding: 0.5rem 0 !important;
    background: rgba(255, 255, 255, 0.4) !important;
    background-color: rgba(255, 255, 255, 0.4) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
    
    /* 手機版毛玻璃陰影 - 參考 carousel 樣式 */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  }
  
  [data-theme='dark'] .navbar {
    min-height: 56px !important;
    padding: 0.5rem 0 !important;
    background: rgba(30, 41, 59, 0.1) !important; /* 更透明，讓星空更明顯 */
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
    z-index: 1030 !important;
    
    /* 增強手機版毛玻璃陰影效果 */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 12px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
  }
  
  /* Brand 字體大小 */
  .navbar-brand {
    font-size: 1rem;
    padding: 0.25rem 0;
  }
  
  /* 漢堡選單按鈕 */
  .navbar-toggler {
    padding: 0.25rem 0.5rem;
    font-size: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  
  /* 收合後的選單項目 - 手機版毛玻璃 */
  html:not([data-theme='dark']) .navbar-collapse {
    margin-top: 0.5rem !important;
    padding: 0.75rem !important;
    background: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(148, 163, 184, 0.3) !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
  }
  
  [data-theme='dark'] .navbar-collapse {
    margin-top: 0.5rem !important;
    padding: 0.75rem !important;
    background: transparent !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: none !important;
    border-radius: 0 !important;

    box-shadow: none !important;
  }
  
  .navbar-nav .nav-item {
    margin-bottom: 0.25rem;
  }
  
  .navbar-nav .nav-link {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
    border-radius: 0.375rem;
    transition: background-color 0.2s ease;
  }
  
  .navbar-nav .nav-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  /* 通知下拉選單在手機上的優化 */
  .dropdown-menu {
    min-width: 280px;
    max-width: 90vw;
    margin-top: 0.25rem;
  }
  
  /* 歡迎文字在手機上簡化 */
  .navbar-text {
    font-size: 0.75rem;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 120px;
  }
  
  /* 登出按鈕在手機上的調整 */
  .navbar-nav .btn {
    font-size: 0.85rem;
    padding: 0.375rem 0.75rem;
  }
  
  /* 右側元素在手機上的排列優化 */
  .navbar-nav.ms-auto {
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
  }
  
  /* 黑夜模式按鈕在手機上的調整 */
  .theme-toggle {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.9rem;
  }
  
  /* 通知按鈕在手機上的調整 */
  .navbar-nav .nav-link {
    padding: 0.4rem 0.6rem;
  }
  
  /* 確保右側元素不會換行 */
  .navbar-nav.ms-auto {
    flex-wrap: nowrap;
  }
  
  /* 通知徽章在手機上的調整 */
  .navbar-nav .badge {
    font-size: 0.6rem;
    padding: 0.2rem 0.4rem;
  }
  
  /* 手機版 navbar 圖標優化 */
  .navbar-nav .nav-link i {
    font-size: 1.1rem;
  }
  
  .navbar-text i {
    font-size: 1rem;
  }
  
  /* 手機版左側黑夜模式切換按鈕 - 與漢堡按鈕大小一致 */
  .mobile-theme-toggle {
    padding: 0.375rem 0.75rem !important;
    font-size: 1.25rem !important;
    border-radius: 0.375rem !important;
    transition: all 0.3s ease !important;
    min-width: 44px !important;
    height: 44px !important;
    line-height: 1 !important;
  }
  
  /* 手機版主題切換按鈕內的圖標 */
  .mobile-theme-toggle .theme-icon {
    font-size: 1.4rem !important;
  }
  
  .mobile-theme-toggle:hover {
    transform: scale(1.05) !important;
  }
  
  /* 手機版漢堡按鈕大小與主題切換按鈕一致 */
  .navbar-toggler {
    padding: 0.375rem 0.75rem !important;
    font-size: 1.25rem !important;
    border-radius: 0.375rem !important;
    min-width: 44px !important;
    height: 44px !important;
    line-height: 1 !important;
    transition: all 0.3s ease !important;
  }
  
  .navbar-toggler:hover {
    transform: scale(1.05) !important;
  }
  
  /* 手機版歡迎區域內的登出按鈕 */
  .mobile-logout-btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.8rem !important;
    border-radius: 6px !important;
    transition: all 0.3s ease !important;
  }
  
  /* 手機版通知圖標特殊處理 - 白色雲朵 */
  #notifDropdown i.bi-cloud-fill {
    color: #ffffff !important;
    filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.3));
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
  }
  
  /* 手機版通知下拉選單防跑版 - 由響應式媒體查詢處理 */
  
  /* 手機版 collapse 內歡迎區域 */
  .navbar-mobile-greeting {
    background: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    border: 1px solid rgba(148, 163, 184, 0.2) !important;
    border-radius: 10px !important;
    padding: 0.75rem 1rem !important;
    margin: 0.5rem 0 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
  }
  
  /* 白天模式手機版歡迎圖標 */
  html:not([data-theme='dark']) .mobile-greeting-icon {
    color: #fbbf24 !important;
    filter: drop-shadow(0 1px 2px rgba(251, 191, 36, 0.4));
    font-size: 1.1rem !important;
  }
  
  .mobile-greeting-text {
    color: #1f2937 !important;
    font-weight: 600 !important;
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
    font-size: 0.95rem !important;
  }
}

/* 超小螢幕 (小於 576px) */
@media (max-width: 575.98px) {
  html:not([data-theme='dark']) .navbar {
    background: rgba(255, 255, 255, 0.4) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
    
    /* 超小螢幕毛玻璃陰影 - 參考 carousel 樣式 */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  }
  
  [data-theme='dark'] .navbar {
    background: rgba(30, 41, 59, 0.1) !important; /* 更透明，讓星空更明顯 */
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
    z-index: 1030 !important;
    
    /* 增強超小螢幕毛玻璃陰影效果 */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 12px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
  }
  
  .navbar-brand {
    font-size: 0.95rem;
  }
  
  .navbar-nav .nav-link {
    padding: 0.4rem 0.6rem;
    font-size: 0.85rem;
  }
  
  /* 通知下拉選單進一步縮小 */
  .dropdown-menu {
    min-width: 260px;
    max-width: 95vw;
  }
  
  /* 登出按鈕更緊湊 */
  .navbar-nav .btn {
    font-size: 0.8rem;
    padding: 0.3rem 0.6rem;
  }
  
  /* 歡迎文字在超小螢幕上進一步簡化 */
  .navbar-text {
    font-size: 0.7rem;
    max-width: 100px;
  }
  
  /* 右側元素在超小螢幕上的緊湊排列 */
  .navbar-nav.ms-auto {
    gap: 0.25rem;
  }
  
  /* 黑夜模式按鈕在超小螢幕上的調整 */
  .theme-toggle {
    padding: 0.2rem 0.4rem !important;
    font-size: 0.8rem;
  }
  
  /* 超小螢幕圖標優化 */
  .navbar-nav .nav-link i {
    font-size: 1rem;
  }
  
  .navbar-text i {
    font-size: 0.9rem;
  }
  
  /* 超小螢幕通知圖標 - 白色雲朵 */
  #notifDropdown i.bi-cloud-fill {
    color: #ffffff !important;
    filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.4));
    text-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
  }
  
  /* 超小螢幕歡迎圖標 - 白天模式 */
  html:not([data-theme='dark']) .navbar-text i.bi-sun-fill {
    color: #fbbf24 !important;
    filter: drop-shadow(0 1px 2px rgba(251, 191, 36, 0.4));
  }
  
  /* 超小螢幕歡迎圖標 - 黑夜模式改為月亮 */
  [data-theme='dark'] .navbar-text i.bi-sun-fill {
    visibility: hidden !important;
    width: 0 !important;
    margin: 0 !important;
  }
  
  /* 超小螢幕文字截斷優化 */
  .navbar-text {
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  /* 超小螢幕手機版黑夜切換按鈕 - 與漢堡按鈕大小一致 */
  .mobile-theme-toggle {
    padding: 0.25rem 0.5rem !important;
    font-size: 1.1rem !important;
    min-width: 40px !important;
    height: 40px !important;
  }
  
  /* 超小螢幕主題切換按鈕內的圖標 */
  .mobile-theme-toggle .theme-icon {
    font-size: 1.25rem !important;
  }
  
  /* 超小螢幕漢堡按鈕大小與主題切換按鈕一致 */
  .navbar-toggler {
    padding: 0.25rem 0.5rem !important;
    font-size: 1.1rem !important;
    min-width: 40px !important;
    height: 40px !important;
  }
  
  /* 超小螢幕手機版登出按鈕 */
  .mobile-logout-btn {
    padding: 0.2rem 0.4rem !important;
    font-size: 0.75rem !important;
  }
  
  /* 超小螢幕手機版歡迎區域優化 */
  .navbar-mobile-greeting {
    padding: 0.6rem 0.8rem !important;
    margin: 0.4rem 0 !important;
  }
  
  /* 超小螢幕通知下拉選單防跑版 - 由響應式媒體查詢處理 */
  
  .mobile-greeting-text {
    font-size: 0.85rem !important;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  .mobile-greeting-icon {
    font-size: 1rem !important;
  }
}

/* 橫向手機 (landscape) 優化 */
@media (max-width: 767.98px) and (orientation: landscape) {
  html:not([data-theme='dark']) .navbar {
    min-height: 48px;
    background: rgba(255, 255, 255, 0.4) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
    
    /* 橫向手機毛玻璃陰影 - 參考 carousel 樣式 */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  }
  
  [data-theme='dark'] .navbar {
    min-height: 48px !important;
    background: rgba(30, 41, 59, 0.1) !important; /* 更透明，讓星空更明顯 */
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
    z-index: 1030 !important;
    
    /* 增強橫向手機毛玻璃陰影效果 */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 12px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
  }
  
  .navbar-brand {
    font-size: 0.9rem;
  }
  
  .navbar-nav .nav-link {
    padding: 0.3rem 0.5rem;
    font-size: 0.8rem;
  }
  
  /* 橫向手機上的歡迎文字 */
  .navbar-text {
    font-size: 0.7rem;
    max-width: 80px;
  }
  
  /* 橫向手機上的按鈕調整 */
  .navbar-nav .btn {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
  }
  
  /* 橫向手機上的黑夜模式按鈕 */
  .theme-toggle {
    padding: 0.2rem 0.4rem !important;
    font-size: 0.75rem;
  }
}

/* =========================
   SweetAlert2 黑夜模式修復
   ========================= */

/* 確保所有 SweetAlert2 元素都有最高的 z-index 和正確的背景 */
.swal2-container,
.swal2-popup,
.swal2-backdrop {
  z-index: 2147483647 !important;
}

.swal2-backdrop {
  z-index: 2147483646 !important;
}

/* SweetAlert 毛玻璃背景 - 僅白天模式 */
html:not([data-theme='dark']) body .swal2-popup,
html:not([data-theme='dark']) .swal2-popup {
  background: rgba(255, 255, 255, 0.7) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  color: #545454 !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  z-index: 2147483647 !important;
  width: auto !important;
  max-width: 32rem !important;
  min-width: 20rem !important;
  padding: 1.25rem !important;
  box-sizing: border-box !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
}

.swal2-container {
  background-color: initial !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 2147483647 !important;
}

/* 白天模式 SweetAlert 按鈕樣式 */
html:not([data-theme='dark']) .swal2-confirm {
  background-color: #3085d6 !important;
  color: #ffffff !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  border: none !important;
}

html:not([data-theme='dark']) .swal2-cancel {
  background-color: #aaa !important;
  color: #ffffff !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  border: none !important;
}

html:not([data-theme='dark']) .swal2-deny {
  background-color: #dc3741 !important;
  color: #ffffff !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  border: none !important;
}

/* 白天模式 SweetAlert 標題和內容 */
html:not([data-theme='dark']) .swal2-title {
  color: #595959 !important;
  font-family: inherit !important;
  font-size: 1.875rem !important;
  font-weight: 600 !important;
  text-shadow: none !important;
  text-align: center !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  max-width: 100% !important;
}

html:not([data-theme='dark']) .swal2-content {
  color: #545454 !important;
  font-family: inherit !important;
  font-size: 1.125rem !important;
  font-weight: normal !important;
  text-shadow: none !important;
  text-align: center !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  max-width: 100% !important;
  line-height: 1.5 !important;
}

/* SweetAlert backdrop z-index */
.swal2-backdrop {
  z-index: 2147483646 !important;
}

/* 黑夜模式下的 SweetAlert2 毛玻璃背景 */
html[data-theme='dark'] body .swal2-popup,
html[data-theme='dark'] .swal2-popup {
  background: rgba(30, 41, 59, 0.7) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  color: #f1f5f9 !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  z-index: 2147483647 !important;
  width: auto !important;
  max-width: 32rem !important;
  min-width: 20rem !important;
  padding: 1.25rem !important;
  box-sizing: border-box !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
}

html[data-theme='dark'] body .swal2-title,
html[data-theme='dark'] .swal2-title {
  color: #f1f5f9 !important;
  font-family: inherit !important;
  font-size: 1.875rem !important;
  font-weight: 600 !important;
  text-shadow: none !important;
  text-align: center !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  max-width: 100% !important;
}

html[data-theme='dark'] body .swal2-content,
html[data-theme='dark'] .swal2-content {
  color: #cbd5e1 !important;
  font-family: inherit !important;
  font-size: 1.125rem !important;
  font-weight: normal !important;
  text-shadow: none !important;
  text-align: center !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  max-width: 100% !important;
  line-height: 1.5 !important;
}

/* 黑夜模式下的 SweetAlert 按鈕樣式 */
html[data-theme='dark'] body .swal2-confirm,
html[data-theme='dark'] .swal2-confirm {
  background-color: #4f46e5 !important;
  color: #ffffff !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  border: none !important;
}

html[data-theme='dark'] body .swal2-cancel,
html[data-theme='dark'] .swal2-cancel {
  background-color: #6b7280 !important;
  color: #ffffff !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  border: none !important;
}

html[data-theme='dark'] body .swal2-deny,
html[data-theme='dark'] .swal2-deny {
  background-color: #dc2626 !important;
  color: #ffffff !important;
  font-family: inherit !important;
  font-size: 1rem !important;
  font-weight: normal !important;
  border: none !important;
}

/* 黑夜模式下的 SweetAlert 容器樣式 */
html[data-theme='dark'] .swal2-container {
  background-color: initial !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 2147483647 !important;
}

/* 強制隱藏 SweetAlert 成功動畫殘留元素 */
.swal2-success-circular-line-left,
.swal2-success-circular-line-right,
.swal2-success-fix {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

.swal2-success .swal2-success-ring {
  animation: none !important;
}

.swal2-success .swal2-success-fix {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

.swal2-success .swal2-success-circular-line-left {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

.swal2-success .swal2-success-circular-line-right {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* 修復所有 SweetAlert 圖標動畫殘留 */
.swal2-icon * {
  animation: none !important;
  transition: none !important;
}

.swal2-icon::before,
.swal2-icon::after {
  animation: none !important;
  transition: none !important;
}

/* 特別針對成功圖標的所有元素 */
.swal2-success * {
  animation: none !important;
  transition: none !important;
}

/* 移除 SweetAlert 成功圖標的陰影和背影效果 */
.swal2-success {
  box-shadow: none !important;
  filter: none !important;
  text-shadow: none !important;
}

.swal2-success::before,
.swal2-success::after {
  box-shadow: none !important;
  filter: none !important;
  text-shadow: none !important;
}

.swal2-success .swal2-success-ring {
  box-shadow: none !important;
  filter: none !important;
}

.swal2-success .swal2-success-fix {
  box-shadow: none !important;
  filter: none !important;
}

.swal2-success .swal2-success-circular-line-left,
.swal2-success .swal2-success-circular-line-right {
  box-shadow: none !important;
  filter: none !important;
}

/* 移除所有 SweetAlert 圖標的陰影效果 */
.swal2-icon {
  box-shadow: none !important;
  filter: none !important;
  text-shadow: none !important;
}

.swal2-icon * {
  box-shadow: none !important;
  filter: none !important;
  text-shadow: none !important;
}

/* =========================
   黑夜模式 CSS 變數系統
   ========================= */

/* 預設為淺色模式 */
:root {
  /* 基礎顏色 */
  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #e9ecef;
  --text-primary: #212529;
  --text-secondary: #6c757d;
  --text-muted: #adb5bd;
  --border-color: #dee2e6;
  --border-light: #e9ecef;
  
  /* 主色調 */
  --bs-primary: #6366f1;
  
  /* 卡片和元件 */
  --card-bg: #ffffff;
  --card-border: #dee2e6;
  --card-shadow: rgba(0, 0, 0, 0.1);
  --card-shadow-hover: rgba(0, 0, 0, 0.15);
  
  /* 狀態顏色 */
  --status-online: #28a745;
  --status-offline: #dc3545;
  --status-warning: #ffc107;
  --status-info: #17a2b8;
  
  /* 覆蓋 Bootstrap 變數 */
  --bs-secondary: var(--bg-secondary);
  --bs-success: var(--status-online);
  
  /* 工業風卡片顏色 */
  --techno-bg-start: #e8e8e8;
  --techno-bg-mid: #c8c8c8;
  --techno-bg-end: #a8a8a8;
  --techno-border: #888888;
  --techno-text: #1a1a1a;
  --techno-text-secondary: #2c2c2c;
  --techno-text-muted: #444;
  --techno-accent: #3f51b5;
  
  /* 圖表背景 */
  --chart-bg: #ffffff;
  --chart-border: #dee2e6;
  
  /* 表格樣式 */
  --table-bg: #ffffff;
  --table-border: #dee2e6;
  --table-header-bg: #f8f9fa;
  --table-row-even: #f8f9fa;
  --table-row-hover: #e9ecef;
}

/* 黑夜模式 - 現代深色主題 */
[data-theme='dark'] {
  /* 基礎顏色 - 更舒適的深色調 */
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #262626;
  --text-primary: #f5f5f5;
  --text-secondary: #d1d5db;
  --text-muted: #9ca3af;
  --border-color: #374151;
  --border-light: #4b5563;
  
  /* 主色調 - 黑夜模式使用較柔和的紫色 */
  --bs-primary: #8b5cf6;
  
  /* 卡片和元件 - 更精緻的設計 */
  --card-bg: #1a1a1a;
  --card-border: #374151;
  --card-shadow: rgba(0, 0, 0, 0.4);
  --card-shadow-hover: rgba(0, 0, 0, 0.5);
  
  /* 狀態顏色 - 更亮的配色 */
  --status-online: #8b5cf6; /* 星光偏藍紫色 */
  --status-offline: #ff6b6b;
  --status-warning: #ffd43b;
  --status-info: #74c0fc;
  
  /* 覆蓋 Bootstrap 變數 */
  --bs-secondary: var(--bg-secondary);
  --bs-success: var(--status-online);
  
  /* 工業風卡片顏色（現代版） */
  --techno-bg-start: #1f2937;
  --techno-bg-mid: #111827;
  --techno-bg-end: #0f172a;
  --techno-border: #374151;
  --techno-text: #f9fafb;
  --techno-text-secondary: #e5e7eb;
  --techno-text-muted: #9ca3af;
  --techno-accent: #6366f1;
  
  /* 圖表背景 */
  --chart-bg: #1a1a1a;
  --chart-border: #374151;
  
  /* 表格樣式 */
  --table-bg: #1a1a1a;
  --table-border: #374151;
  --table-header-bg: #111827;
  --table-row-even: #111827;
  --table-row-hover: #1f2937;
}

/* 自動模式（跟隨系統設定） */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    /* 基礎顏色 */
    --bg-primary: #1a1a1a;
    --bg-secondary: #2d2d2d;
    --bg-tertiary: #3a3a3a;
    --text-primary: #ffffff;
    --text-secondary: #b3b3b3;
    --text-muted: #808080;
    --border-color: #404040;
    --border-light: #333333;
    
    /* 主色調 */
    --bs-primary: #8b5cf6;
    
    /* 卡片和元件 */
    --card-bg: #2d2d2d;
    --card-border: #404040;
    --card-shadow: rgba(0, 0, 0, 0.3);
    --card-shadow-hover: rgba(0, 0, 0, 0.4);
    
    /* 狀態顏色 */
    --status-online: #4caf50;
    --status-offline: #f44336;
    --status-warning: #ff9800;
    --status-info: #2196f3;
    
    /* 工業風卡片顏色 */
    --techno-bg-start: #3a3a3a;
    --techno-bg-mid: #2d2d2d;
    --techno-bg-end: #1f1f1f;
    --techno-border: #555555;
    --techno-text: #ffffff;
    --techno-text-secondary: #e0e0e0;
    --techno-text-muted: #b3b3b3;
    --techno-accent: #5c6bc0;
    
    /* 圖表背景 */
    --chart-bg: #2d2d2d;
    --chart-border: #404040;
    
    /* 表格樣式 */
    --table-bg: #2d2d2d;
    --table-border: #404040;
    --table-header-bg: #3a3a3a;
    --table-row-even: #333333;
    --table-row-hover: #404040;
  }
}

/* =========================
   Sticky Footer 樣式
   ========================= */

/* 確保 body 使用 flexbox 佈局 */
body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* 主要內容區域自動擴展 */
main {
  flex: 1 0 auto;
}

/* 頁尾樣式 */
footer {
  flex-shrink: 0;
  margin-top: auto;
}

/* 手機版頁尾優化 */
@media (max-width: 767.98px) {
  footer {
    padding: 0.75rem 0 !important;
  }
  
  footer small {
    font-size: 0.75rem;
  }
}

/* 確保頁尾在內容很少時也能固定在底部 */
@media (min-width: 768px) {
  footer {
    position: relative;
    bottom: 0;
    width: 100%;
  }
}

/* =========================
   黑夜模式額外樣式優化
   ========================= */

/* 白天模式藍天白雲背景 - 使用本地照片 + 漸層淡化 */
html:not([data-theme='dark']) body {
  background: 
    /* 由上至下的漸層淡化遮罩 */ linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.1) 0%,
      /* 頂部幾乎透明 */ rgba(255, 255, 255, 0.3) 50%,
      /* 中間稍微淡化 */ rgba(255, 255, 255, 0.6) 100% /* 底部較淡 */
    ),
    /* 本地藍天白雲照片 */ url('../images/sky-background.jpg');

  background-size: 100% 100%, cover;
  background-position: center, center;
  background-repeat: no-repeat, no-repeat;
  background-attachment: fixed, fixed;
  
  min-height: 100vh;
  color: #333;
}

/* 黑夜模式下的 body 背景 - 使用星空照片 */
[data-theme='dark'] body {
  background: 
    /* 可選：在照片上添加微妙的星星閃爍效果 */ radial-gradient(
      1px 1px at 15% 20%,
      rgba(255, 255, 255, 0.8),
      transparent
    ),
    radial-gradient(1px 1px at 85% 30%, rgba(255, 255, 255, 0.6), transparent),
    radial-gradient(1px 1px at 45% 70%, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(1px 1px at 75% 15%, rgba(255, 255, 255, 0.7), transparent),
    radial-gradient(1px 1px at 25% 80%, rgba(255, 255, 255, 0.5), transparent),
    radial-gradient(1px 1px at 65% 60%, rgba(255, 255, 255, 0.8), transparent),
    /* 黑色遮罩層 - 壓暗照片 */
      linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
    /* 高畫質星空照片背景 */ url('../images/starry-night.jpg'),
    /* 備用漸層背景（照片載入失敗時使用） */
      linear-gradient(
        135deg,
        #050a1f 0%,
        #0a0a15 25%,
        #0d1020 50%,
        #060608 75%,
        #000000 100%
      );
  background-size: 100px 100px, 100px 100px, 100px 100px, 100px 100px,
    100px 100px, 100px 100px, /* 星星 */ 100% 100%, /* 黑色遮罩層 */ cover,
    /* 照片覆蓋整個背景，保持比例 */ 100% 100%; /* 備用背景 */
  background-position: 0 0, 0 0, 0 0, 0 0, 0 0, 0 0, /* 星星位置 */ 0 0,
    /* 黑色遮罩層位置 */ center center, /* 照片居中顯示 */ 0 0; /* 備用背景 */
  background-repeat: repeat, no-repeat, no-repeat, no-repeat;
  background-attachment: scroll; /* 改為滾動，避免模糊 */
  image-rendering: -webkit-optimize-contrast; /* Webkit 優化 */
  image-rendering: crisp-edges; /* 邊緣銳化 */
  image-rendering: high-quality; /* 高畫質渲染 */
  -webkit-backface-visibility: hidden; /* 硬體加速 */
  -webkit-transform: translateZ(0); /* 強制 GPU 加速 */
  transform: translateZ(0); /* 強制 GPU 加速 */
  will-change: background; /* 優化動畫效能 */
  color: var(--text-primary) !important;
  animation: photoTwinkle 6s ease-in-out infinite alternate;
}

@keyframes photoTwinkle {
  0% { 
    background: radial-gradient(
        1px 1px at 15% 20%,
        rgba(255, 255, 255, 0.8),
        transparent
      ),
      radial-gradient(1px 1px at 85% 30%, rgba(255, 255, 255, 0.6), transparent),
      radial-gradient(1px 1px at 45% 70%, rgba(255, 255, 255, 0.9), transparent),
      radial-gradient(1px 1px at 75% 15%, rgba(255, 255, 255, 0.7), transparent),
      radial-gradient(1px 1px at 25% 80%, rgba(255, 255, 255, 0.5), transparent),
      radial-gradient(1px 1px at 65% 60%, rgba(255, 255, 255, 0.8), transparent),
      linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
      url('../images/starry-night.jpg'),
      linear-gradient(
        135deg,
        #050a1f 0%,
        #0a0a15 25%,
        #0d1020 50%,
        #060608 75%,
        #000000 100%
      );
  }
  100% { 
    background: radial-gradient(
        1px 1px at 15% 20%,
        rgba(255, 255, 255, 0.4),
        transparent
      ),
      radial-gradient(1px 1px at 85% 30%, rgba(255, 255, 255, 0.9), transparent),
      radial-gradient(1px 1px at 45% 70%, rgba(255, 255, 255, 0.5), transparent),
      radial-gradient(1px 1px at 75% 15%, rgba(255, 255, 255, 0.8), transparent),
      radial-gradient(1px 1px at 25% 80%, rgba(255, 255, 255, 0.7), transparent),
      radial-gradient(1px 1px at 65% 60%, rgba(255, 255, 255, 0.6), transparent),
      linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
      url('../images/starry-night.jpg'),
      linear-gradient(
        135deg,
        #050a1f 0%,
        #0a0a15 25%,
        #0d1020 50%,
        #060608 75%,
        #000000 100%
      );
  }
}

@keyframes twinkle {
  0% { 
    background: radial-gradient(2px 2px at 20px 30px, #eee, transparent),
      radial-gradient(
        2px 2px at 40px 70px,
        rgba(255, 255, 255, 0.8),
        transparent
      ),
      radial-gradient(1px 1px at 90px 40px, #fff, transparent),
      radial-gradient(
        1px 1px at 130px 80px,
        rgba(255, 255, 255, 0.6),
        transparent
      ),
      radial-gradient(2px 2px at 160px 30px, #ddd, transparent),
      radial-gradient(1px 1px at 200px 90px, #fff, transparent),
      radial-gradient(
        2px 2px at 240px 50px,
        rgba(255, 255, 255, 0.7),
        transparent
      ),
      radial-gradient(1px 1px at 280px 10px, #eee, transparent),
      radial-gradient(
        1px 1px at 320px 70px,
        rgba(255, 255, 255, 0.9),
        transparent
      ),
      radial-gradient(2px 2px at 360px 40px, #fff, transparent),
      radial-gradient(
        1px 1px at 400px 80px,
        rgba(255, 255, 255, 0.5),
        transparent
      ),
      radial-gradient(1px 1px at 440px 20px, #ddd, transparent),
      radial-gradient(2px 2px at 480px 60px, #fff, transparent),
      radial-gradient(
        1px 1px at 520px 90px,
        rgba(255, 255, 255, 0.8),
        transparent
      ),
      radial-gradient(1px 1px at 560px 30px, #eee, transparent),
      radial-gradient(
        2px 2px at 600px 70px,
        rgba(255, 255, 255, 0.6),
        transparent
      ),
      linear-gradient(
        135deg,
        #0c1445 0%,
        #1a1a2e 25%,
        #16213e 50%,
        #0f0f23 75%,
        #000000 100%
      );
  }
  100% { 
    background: radial-gradient(
        2px 2px at 20px 30px,
        rgba(255, 255, 255, 0.5),
        transparent
      ),
      radial-gradient(2px 2px at 40px 70px, #fff, transparent),
      radial-gradient(
        1px 1px at 90px 40px,
        rgba(255, 255, 255, 0.7),
        transparent
      ),
      radial-gradient(1px 1px at 130px 80px, #eee, transparent),
      radial-gradient(
        2px 2px at 160px 30px,
        rgba(255, 255, 255, 0.8),
        transparent
      ),
      radial-gradient(
        1px 1px at 200px 90px,
        rgba(255, 255, 255, 0.6),
        transparent
      ),
      radial-gradient(2px 2px at 240px 50px, #fff, transparent),
      radial-gradient(
        1px 1px at 280px 10px,
        rgba(255, 255, 255, 0.9),
        transparent
      ),
      radial-gradient(1px 1px at 320px 70px, #ddd, transparent),
      radial-gradient(
        2px 2px at 360px 40px,
        rgba(255, 255, 255, 0.7),
        transparent
      ),
      radial-gradient(1px 1px at 400px 80px, #fff, transparent),
      radial-gradient(
        1px 1px at 440px 20px,
        rgba(255, 255, 255, 0.8),
        transparent
      ),
      radial-gradient(
        2px 2px at 480px 60px,
        rgba(255, 255, 255, 0.5),
        transparent
      ),
      radial-gradient(1px 1px at 520px 90px, #eee, transparent),
      radial-gradient(
        1px 1px at 560px 30px,
        rgba(255, 255, 255, 0.7),
        transparent
      ),
      radial-gradient(2px 2px at 600px 70px, #fff, transparent),
      linear-gradient(
        135deg,
        #0c1445 0%,
        #1a1a2e 25%,
        #16213e 50%,
        #0f0f23 75%,
        #000000 100%
      );
  }
}

/* 確保所有頁面容器都有黑夜模式 */
[data-theme='dark'] .container,
[data-theme='dark'] .container-fluid {
  background-color: transparent !important;
  color: var(--text-primary) !important;
}

/* 特別修復 container mt-4 的背景問題 */
[data-theme='dark'] .container.mt-4 {
  background-color: transparent !important;
  color: var(--text-primary) !important;
}

/* 修復所有可能的 container 變體 */
[data-theme='dark'] .container.mt-3,
[data-theme='dark'] .container.mt-4,
[data-theme='dark'] .container.mt-5,
[data-theme='dark'] .container.py-4,
[data-theme='dark'] .container.py-5 {
  background-color: transparent !important;
  color: var(--text-primary) !important;
}

/* 黑夜模式下的主要內容區域 */
[data-theme='dark'] main {
  background-color: transparent;
  color: var(--text-primary);
}

/* 黑夜模式下的頁面標題 */
[data-theme='dark'] h1,
[data-theme='dark'] h2,
[data-theme='dark'] h3,
[data-theme='dark'] h4,
[data-theme='dark'] h5,
[data-theme='dark'] h6 {
  color: var(--text-primary);
}

/* 黑夜模式下的段落文字 */
[data-theme='dark'] p {
  color: var(--text-primary);
}

/* 黑夜模式下的 div 元素 */
[data-theme='dark'] div {
  color: inherit;
}

/* 白天模式背景 - 藍天白雲照片 + 漸層淡化 */
html:not([data-theme='dark']) body.bg-body-tertiary {
  background: 
    /* 由上至下的漸層淡化遮罩 */ linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.1) 0%,
      /* 頂部幾乎透明 */ rgba(255, 255, 255, 0.3) 50%,
      /* 中間稍微淡化 */ rgba(255, 255, 255, 0.6) 100% /* 底部較淡 */
    ),
    /* 本地藍天白雲照片 */ url('../images/sky-background.jpg') !important;

  background-size: 100% 100%, cover !important;
  background-position: center, center !important;
  background-repeat: no-repeat, no-repeat !important;
  background-attachment: fixed, fixed !important;
  
  min-height: 100vh !important;
  color: #333 !important;
}

/* 強制黑夜模式背景 - 但保留星空背景 */
html[data-theme='dark'] body.bg-body-tertiary {
  background: 
    /* 可選：在照片上添加微妙的星星閃爍效果 */ radial-gradient(
      1px 1px at 15% 20%,
      rgba(255, 255, 255, 0.8),
      transparent
    ),
    radial-gradient(1px 1px at 85% 30%, rgba(255, 255, 255, 0.6), transparent),
    radial-gradient(1px 1px at 45% 70%, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(1px 1px at 75% 15%, rgba(255, 255, 255, 0.7), transparent),
    radial-gradient(1px 1px at 25% 80%, rgba(255, 255, 255, 0.5), transparent),
    radial-gradient(1px 1px at 65% 60%, rgba(255, 255, 255, 0.8), transparent),
    /* 黑色遮罩層 - 壓暗照片 */
      linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
    /* 高畫質星空照片背景 */ url('../images/starry-night.jpg'),
    /* 備用漸層背景（照片載入失敗時使用） */
      linear-gradient(
        135deg,
        #050a1f 0%,
        #0a0a15 25%,
        #0d1020 50%,
        #060608 75%,
        #000000 100%
      ) !important;
  background-size: 100px 100px, 100px 100px, 100px 100px, 100px 100px,
    100px 100px, 100px 100px, /* 星星 */ 100% 100%, /* 黑色遮罩層 */ cover,
    /* 照片覆蓋整個背景，保持比例 */ 100% 100% !important; /* 備用背景 */
  background-position: 0 0, 0 0, 0 0, 0 0, 0 0, 0 0, /* 星星位置 */ 0 0,
    /* 黑色遮罩層位置 */ center center, /* 照片居中顯示 */ 0 0 !important; /* 備用背景 */
  background-repeat: repeat, no-repeat, no-repeat, no-repeat !important;
  background-attachment: scroll !important; /* 改為滾動，避免模糊 */
  image-rendering: -webkit-optimize-contrast !important; /* Webkit 優化 */
  image-rendering: crisp-edges !important; /* 邊緣銳化 */
  image-rendering: high-quality !important; /* 高畫質渲染 */
  -webkit-backface-visibility: hidden !important; /* 硬體加速 */
  -webkit-transform: translateZ(0) !important; /* 強制 GPU 加速 */
  transform: translateZ(0) !important; /* 強制 GPU 加速 */
  will-change: background !important; /* 優化動畫效能 */
  animation: photoTwinkle 6s ease-in-out infinite alternate !important;
}

html[data-theme='dark'] .bg-body-tertiary:not(body) {
  background-color: var(--bg-primary) !important;
}

html[data-theme='dark'] .bg-body-secondary {
  background-color: var(--bg-secondary) !important;
}

html[data-theme='dark'] .bg-body:not(body) {
  background-color: var(--bg-primary) !important;
}

/* 黑夜模式下的 Bootstrap 背景類別覆蓋 */
html[data-theme='dark'] .bg-light {
  background-color: var(--bg-secondary) !important;
}

html[data-theme='dark'] .bg-white {
  background-color: var(--card-bg) !important;
}

/* =========================
   白天模式狀態卡片毛玻璃樣式
   ========================= */

/* 狀態卡片毛玻璃效果 - 參考 navbar 和登入卡片 */
html:not([data-theme='dark']) .techno-card {
  background: rgba(255, 255, 255, 0.35) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(148, 163, 184, 0.4) !important;
  border-radius: 16px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  
  /* 移除金屬風格的內陰影和漸層 */
  background-image: none !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  /* 恢復 position: relative 以支援掃光動畫 */
  position: relative !important;
}

html:not([data-theme='dark']) .techno-card:hover {
  background: rgba(255, 255, 255, 0.45) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  transform: translateY(-4px) !important;
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.15), 0 8px 20px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
  border-color: rgba(99, 102, 241, 0.4) !important;
}

/* 恢復白天模式的金屬高光效果 - 但降低 z-index */
html:not([data-theme='dark']) .techno-card::before {
  display: block !important;
  z-index: 1 !important;
}

/* 恢復白天模式的掃光效果 - 提高 z-index */
html:not([data-theme='dark']) .techno-sweep::after {
  display: block !important;
  z-index: 100 !important;
  /* 確保掃光動畫能正常運作 */
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* 白天模式掃光動畫觸發 */
html:not([data-theme='dark']) .techno-sweep:hover::after {
  animation: sweep-gleam 1.4s ease-out forwards !important;
  opacity: 1 !important;
}

/* 黑夜模式掃光效果 */
[data-theme='dark'] .techno-sweep::after {
  display: block !important;
  z-index: 100 !important;
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* 黑夜模式掃光動畫觸發 */
[data-theme='dark'] .techno-sweep:hover::after {
  animation: sweep-gleam 1.4s ease-out forwards !important;
  opacity: 1 !important;
}

/* 白天模式狀態卡片文字重新配色 */
html:not([data-theme='dark']) .techno-card .card-title {
  color: #1e293b !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
  letter-spacing: 0.3px !important;
}

html:not([data-theme='dark']) .techno-card .card-text {
  color: #334155 !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.7) !important;
}

html:not([data-theme='dark']) .techno-card .text-muted {
  color: #64748b !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.6) !important;
}

/* 白天模式圖示重新配色 */
html:not([data-theme='dark']) .techno-card .card-title i {
  color: #3b82f6 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
  filter: drop-shadow(0 1px 2px rgba(59, 130, 246, 0.3)) !important;
}

html:not([data-theme='dark']) .techno-card .text-muted i {
  color: #6366f1 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.6) !important;
}

/* 白天模式 badge 毛玻璃樣式重新設計 */
html:not([data-theme='dark']) .techno-card .badge.bg-success {
  background: rgba(34, 197, 94, 0.85) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border: 1px solid rgba(34, 197, 94, 0.4) !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

/* 白天模式 badge.bg-secondary - 清新藍天風格 */
html:not([data-theme='dark']) .badge.bg-secondary {
  background: linear-gradient(
    145deg,
    #e0f2fe 0%,
    #b3e5fc 50%,
    #81d4fa 100%
  ) !important;
  border: 1px solid #0277bd !important;
  color: #01579b !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8) !important;
  box-shadow: 0 3px 8px rgba(2, 119, 189, 0.2), 0 1px 3px rgba(2, 119, 189, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  backdrop-filter: blur(8px) saturate(120%) !important;
  -webkit-backdrop-filter: blur(8px) saturate(120%) !important;
}

html:not([data-theme='dark']) .badge.bg-secondary:hover {
  background: linear-gradient(
    145deg,
    #b3e5fc 0%,
    #81d4fa 50%,
    #4fc3f7 100%
  ) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(2, 119, 189, 0.3),
    0 2px 6px rgba(2, 119, 189, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
}

html:not([data-theme='dark']) .techno-card .badge.bg-secondary {
  background: linear-gradient(
    145deg,
    #e3f2fd 0%,
    #bbdefb 50%,
    #90caf9 100%
  ) !important;
  border: 1px solid #1976d2 !important;
  color: #0d47a1 !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(10px) saturate(130%) !important;
  -webkit-backdrop-filter: blur(10px) saturate(130%) !important;
  box-shadow: 0 4px 12px rgba(25, 118, 210, 0.25),
    0 2px 6px rgba(25, 118, 210, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
}

/* 白天模式 btn-outline-secondary - 清新灰藍風格 */
html:not([data-theme='dark']) .btn-outline-secondary {
  background: linear-gradient(
    145deg,
    #f8fafc 0%,
    #e2e8f0 50%,
    #cbd5e1 100%
  ) !important;
  border: 2px solid #64748b !important;
  color: #334155 !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8) !important;
  box-shadow: 0 2px 6px rgba(100, 116, 139, 0.15),
    0 1px 3px rgba(100, 116, 139, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
  backdrop-filter: blur(6px) saturate(110%) !important;
  -webkit-backdrop-filter: blur(6px) saturate(110%) !important;
  transition: all 0.3s ease !important;
}

html:not([data-theme='dark']) .btn-outline-secondary:hover {
  background: linear-gradient(
    145deg,
    #e2e8f0 0%,
    #cbd5e1 50%,
    #94a3b8 100%
  ) !important;
  border-color: #475569 !important;
  color: #1e293b !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(100, 116, 139, 0.25),
    0 2px 6px rgba(100, 116, 139, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
}

/* 白天模式 btn-outline-primary - 清新藍色風格 */
html:not([data-theme='dark']) .btn-outline-primary {
  background: linear-gradient(
    145deg,
    #eff6ff 0%,
    #dbeafe 50%,
    #bfdbfe 100%
  ) !important;
  border: 2px solid #2563eb !important;
  color: #1d4ed8 !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8) !important;
  box-shadow: 0 2px 6px rgba(37, 99, 235, 0.15),
    0 1px 3px rgba(37, 99, 235, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
  backdrop-filter: blur(6px) saturate(110%) !important;
  -webkit-backdrop-filter: blur(6px) saturate(110%) !important;
  transition: all 0.3s ease !important;
}

html:not([data-theme='dark']) .btn-outline-primary:hover {
  background: linear-gradient(
    145deg,
    #dbeafe 0%,
    #bfdbfe 50%,
    #93c5fd 100%
  ) !important;
  border-color: #1d4ed8 !important;
  color: #1e40af !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25),
    0 2px 6px rgba(37, 99, 235, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
}

/* 裝置狀態圖表 - 響應式顯示控制 */
#deviceLogsChartCollapse {
  display: block !important;
}

/* 手機版隱藏裝置狀態圖表 */
@media (max-width: 767.98px) {
  #deviceLogsChartCollapse,
  button[data-bs-target='#deviceLogsChartCollapse'] {
    display: none !important;
  }
}

/* 平板版也隱藏 (可選) */
@media (max-width: 991.98px) {
  #deviceLogsChartCollapse,
  button[data-bs-target='#deviceLogsChartCollapse'] {
    display: none !important;
  }
}

/* =========================
   毛玻璃卡片樣式
   ========================= */

/* 毛玻璃卡片容器 - 增強版 */
.glass-card {
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 8px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  border: 2px solid transparent;
  transition: all 0.3s ease;
  position: relative;
}

/* 彩虹邊框效果 */
.glass-card::before {
  content: '';
  position: absolute;
  top: -1px; /* 最初外推1px */
  left: -1px; /* 最初外推1px */
  right: -1px; /* 最初外推1px */
  bottom: -1px; /* 最初外推1px */
  border-radius: 21px; /* 增加1px以配合外推 */
  padding: 2px;
  background: linear-gradient(
    45deg,
    #ff6b6b,
    #4ecdc4,
    #45b7d1,
    #96ceb4,
    #feca57,
    #ff9ff3,
    #54a0ff,
    #5f27cd
  );
  background-size: 400% 400%;
  animation: rainbowBorder 8s ease-in-out infinite;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: xor;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  z-index: -1; /* 恢復為-1，避免干擾表單點擊事件 */
  pointer-events: none; /* 確保彩虹邊框不會攔截點擊事件 */
}

/* 彩虹邊框動畫 */
@keyframes rainbowBorder {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15), 0 6px 20px rgba(0, 0, 0, 0.08);
}

/* 白天模式毛玻璃卡片 - 增強版 */
html:not([data-theme='dark']) .glass-card {
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(30px) saturate(200%);
  -webkit-backdrop-filter: blur(30px) saturate(200%);
  border: 2px solid rgba(255, 255, 255, 0.4);
}

/* 黑夜模式毛玻璃卡片 - 增強版 */
[data-theme='dark'] .glass-card {
  background: rgba(30, 41, 59, 0.15);
  backdrop-filter: blur(40px) saturate(180%);
  -webkit-backdrop-filter: blur(40px) saturate(180%);
  border: 2px solid rgba(255, 255, 255, 0.2);
}

/* 毛玻璃卡片標頭 */
.glass-header {
  padding: 1.5rem 2rem 1rem; /* 恢復桌面版內距 */
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

html:not([data-theme='dark']) .glass-header {
  background: rgba(255, 255, 255, 0.6);
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}

[data-theme='dark'] .glass-header {
  background: rgba(30, 41, 59, 0.02);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.glass-header .card-title {
  font-size: 1.5rem;
  font-weight: 600;
  display: flex;
  align-items: center;
}

html:not([data-theme='dark']) .glass-header .card-title {
  color: #1e293b;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
}

[data-theme='dark'] .glass-header .card-title {
  color: #f1f5f9;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* 毛玻璃卡片內容 */
.glass-body {
  padding: 2rem; /* 恢復桌面版內距 */
}

html:not([data-theme='dark']) .glass-body {
  background: rgba(255, 255, 255, 0.4);
}

[data-theme='dark'] .glass-body {
  background: rgba(30, 41, 59, 0.01);
}

/* 表單區域 */
.glass-form .form-section {
  margin-bottom: 1.5rem;
}

.glass-form .form-section p {
  margin-bottom: 1.25rem;
}

.glass-form label {
  font-weight: 500;
  margin-bottom: 0.5rem;
  display: block;
}

html:not([data-theme='dark']) .glass-form label {
  color: #374151;
}

[data-theme='dark'] .glass-form label {
  color: #d1d5db;
}

/* 表單控制項增強 */
.glass-form .form-control,
.glass-form .form-select {
  border-radius: 8px;
  border: 2px solid transparent;
  transition: all 0.3s ease;
}

html:not([data-theme='dark']) .glass-form .form-control,
html:not([data-theme='dark']) .glass-form .form-select {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.1);
  color: #374151;
}

html:not([data-theme='dark']) .glass-form .form-control:focus,
html:not([data-theme='dark']) .glass-form .form-select:focus {
  background: rgba(255, 255, 255, 0.95);
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

[data-theme='dark'] .glass-form .form-control,
[data-theme='dark'] .glass-form .form-select {
  background: rgba(30, 41, 59, 0.15);
  border-color: rgba(255, 255, 255, 0.08);
  color: #f1f5f9;
}

[data-theme='dark'] .glass-form .form-control:focus,
[data-theme='dark'] .glass-form .form-select:focus {
  background: rgba(30, 41, 59, 0.25);
  border-color: rgba(139, 92, 246, 0.4);
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.08);
}

/* 按鈕群組 */
.button-group {
  border-top-color: rgba(255, 255, 255, 0.1) !important;
}

html:not([data-theme='dark']) .button-group {
  border-top-color: rgba(0, 0, 0, 0.08) !important;
}

/* 卡片副標題 */
.glass-header .card-subtitle {
  font-size: 0.9rem;
  opacity: 0.8;
  line-height: 1.4;
}

html:not([data-theme='dark']) .glass-header .card-subtitle {
  color: #64748b !important;
}

[data-theme='dark'] .glass-header .card-subtitle {
  color: #94a3b8 !important;
}

/* 表單提示文字 */
.glass-form .form-text {
  font-size: 0.85rem;
  margin-top: 0.5rem;
  opacity: 0.8;
}

html:not([data-theme='dark']) .glass-form .form-text {
  color: #6b7280;
}

[data-theme='dark'] .glass-form .form-text {
  color: #9ca3af;
}

/* 毛玻璃警告框 */
.glass-alert {
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

html:not([data-theme='dark']) .glass-alert.alert-info {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.2);
  color: #1e40af;
}

[data-theme='dark'] .glass-alert.alert-info {
  background: rgba(59, 130, 246, 0.05);
  border-color: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
}

.glass-alert .alert-heading {
  font-weight: 600;
  font-size: 0.95rem;
}

.glass-alert ul {
  font-size: 0.9rem;
  line-height: 1.5;
}

.glass-alert ul li {
  margin-bottom: 0.25rem;
}

/* 大尺寸表單控制項 */
.glass-form .form-control-lg {
  padding: 0.75rem 1rem;
  font-size: 1.1rem;
  border-radius: 10px;
}

/* 響應式調整 */
@media (max-width: 767.98px) {
  .glass-card {
    margin: 0; /* 完全移除所有邊距 */
    border-radius: 0; /* 移除圓角，讓卡片貼邊 */
    width: 100vw; /* 全螢幕寬度 */
    position: relative; /* 相對定位 */
    left: 50%; /* 向左偏移 50% */
    right: 50%; /* 向右偏移 50% */
    margin-left: -50vw; /* 向左偏移視窗寬度的 50% */
    margin-right: -50vw; /* 向右偏移視窗寬度的 50% */
    border-radius: 0; /* 移除圓角 */
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05); /* 調整陰影 */
  }

  /* 手機版彩虹邊框調整 - 移除圓角 */
  .glass-card::before {
    border-radius: 0 !important; /* 手機版移除圓角 */
    top: 0 !important; /* 手機版貼邊 */
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
  }

  .glass-header {
    padding: 1rem 1.2rem 0.6rem; /* 減少手機版內距 */
    border-radius: 0; /* 移除標題圓角 */
  }

  .glass-header .card-title {
    font-size: 1.25rem;
  }

  .glass-header .card-subtitle {
    font-size: 0.85rem;
    margin-top: 0.5rem !important;
  }

  .glass-body {
    padding: 1.2rem; /* 減少手機版內距 */
    border-radius: 0; /* 移除內容圓角 */
    /* 確保內容完整塞進卡片 */
    margin: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  /* 手機版卡片邊框調整 */
  .glass-card {
    border-left: none !important; /* 移除左邊框 */
    border-right: none !important; /* 移除右邊框 */
  }

  /* 白天模式手機版卡片邊框 */
  html:not([data-theme='dark']) .glass-card {
    background: rgba(255, 255, 255, 0.5) !important;
    border-left: none !important;
    border-right: none !important;
    border-top: 1px solid rgba(0, 0, 0, 0.08) !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08) !important;
  }

  /* 黑夜模式手機版卡片邊框 */
  [data-theme='dark'] .glass-card {
    border-left: none !important;
    border-right: none !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
  }

  .glass-form .form-control-lg {
    font-size: 1rem;
    padding: 0.65rem 0.9rem;
  }

  .button-group .d-flex {
    flex-direction: column;
    gap: 0.75rem !important;
  }

  .button-group .btn {
    width: 100%;
  }

  /* 手機版按鈕大小調整 */
  .button-group .btn-lg {
    font-size: 0.9rem !important;
    padding: 0.5rem 1rem !important;
  }

  .glass-card .btn-lg {
    font-size: 0.9rem !important;
    padding: 0.5rem 1rem !important;
  }

  .glass-alert {
    margin-bottom: 1.5rem !important;
    padding: 0.75rem 1rem !important;
  }

  .glass-alert .d-flex {
    flex-direction: row !important;
    text-align: left !important;
    align-items: flex-start !important;
  }

  .glass-alert .fas {
    margin-bottom: 0 !important;
    margin-right: 0.75rem !important;
    margin-top: 0.1rem;
    flex-shrink: 0;
  }

  .glass-alert .alert-heading {
    font-size: 0.85rem !important;
    text-align: left !important;
  }

  .glass-alert ul {
    font-size: 0.8rem !important;
    text-align: left !important;
    margin-bottom: 0 !important;
    padding-left: 1rem !important;
  }

  .glass-alert .form-text {
    font-size: 0.75rem !important;
  }
}

/* =========================
   群組詳情頁面樣式
   ========================= */

/* 區域標題 */
.section-header {
  margin-bottom: 1.5rem;
}

.section-title {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 0;
  display: flex;
  align-items: center;
}

html:not([data-theme='dark']) .section-title {
  color: #1e293b;
}

[data-theme='dark'] .section-title {
  color: #f1f5f9;
}

/* 區域分隔線 */
.section-divider {
  border: none;
  height: 1px;
  margin: 2rem 0;
  opacity: 0.3;
}

html:not([data-theme='dark']) .section-divider {
  background: linear-gradient(
    to right,
    transparent,
    rgba(0, 0, 0, 0.1),
    transparent
  );
}

[data-theme='dark'] .section-divider {
  background: linear-gradient(
    to right,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
}

/* 毛玻璃表格 - 彩虹邊框版 */
.glass-table {
  border-radius: 20px;
  overflow: hidden;
  border: 2px solid transparent;
  position: relative;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* 表格彩虹邊框效果 */
.glass-table::before {
  content: '';
  position: absolute;
  top: -1px; /* 最初外推1px */
  left: -1px; /* 最初外推1px */
  right: -1px; /* 最初外推1px */
  bottom: -1px; /* 最初外推1px */
  border-radius: 21px; /* 增加1px以配合外推 */
  padding: 2px;
  background: linear-gradient(
    45deg,
    #ff6b6b,
    #4ecdc4,
    #45b7d1,
    #96ceb4,
    #feca57,
    #ff9ff3,
    #54a0ff,
    #5f27cd
  );
  background-size: 400% 400%;
  animation: rainbowBorder 6s ease-in-out infinite;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: xor;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  z-index: -1; /* 恢復為-1，避免干擾表單點擊事件 */
  pointer-events: none; /* 確保彩虹邊框不會攔截點擊事件 */
}

html:not([data-theme='dark']) .glass-table {
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

[data-theme='dark'] .glass-table {
  background: rgba(
    30,
    41,
    59,
    0.05
  ); /* 進一步降低背景透明度，讓彩虹邊框更明顯 */
  backdrop-filter: blur(25px) saturate(150%);
  -webkit-backdrop-filter: blur(25px) saturate(150%);
}

/* 黑暗模式彩虹邊框增強 */
[data-theme='dark'] .glass-table::before {
  z-index: 1 !important; /* 提高 z-index 確保在毛玻璃背景之上 */
  opacity: 1 !important; /* 確保完全不透明 */
}

[data-theme='dark'] .glass-card::before {
  z-index: 1 !important; /* 提高 z-index 確保在毛玻璃背景之上 */
  opacity: 1 !important; /* 確保完全不透明 */
}

/* 白天模式彩虹邊框增強 */
html:not([data-theme='dark']) .glass-table::before {
  z-index: 1 !important; /* 提高 z-index 確保在毛玻璃背景之上 */
  opacity: 1 !important; /* 確保完全不透明 */
}

html:not([data-theme='dark']) .glass-card::before {
  z-index: 1 !important; /* 提高 z-index 確保在毛玻璃背景之上 */
  opacity: 1 !important; /* 確保完全不透明 */
}

/* 確保表格和卡片內容在彩虹邊框之上 */
.glass-table {
  z-index: 2 !important; /* 確保表格內容在彩虹邊框之上 */
}

.glass-card {
  z-index: 2 !important; /* 確保卡片內容在彩虹邊框之上 */
}

.glass-table .table {
  margin-bottom: 0;
}

.glass-table thead th {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  font-weight: 600;
  font-size: 0.9rem;
  padding: 1rem 0.75rem;
  border-radius: 0;
}

.glass-table thead th:first-child {
  border-top-left-radius: 20px;
}

.glass-table thead th:last-child {
  border-top-right-radius: 20px;
}

html:not([data-theme='dark']) .glass-table thead th {
  background: rgba(255, 255, 255, 0.8);
  color: #374151;
}

[data-theme='dark'] .glass-table thead th {
  background: rgba(30, 41, 59, 0.1);
  color: #f8fafc;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.glass-table tbody td {
  padding: 0.75rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  vertical-align: middle;
  position: relative;
  border-radius: 0;
}

.glass-table tbody tr:last-child td:first-child {
  border-bottom-left-radius: 20px;
}

.glass-table tbody tr:last-child td:last-child {
  border-bottom-right-radius: 20px;
}

/* 表格行毛玻璃效果 */
html:not([data-theme='dark']) .glass-table tbody tr {
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 2px;
  border-radius: 8px;
}

html:not([data-theme='dark']) .glass-table tbody tr:hover {
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

[data-theme='dark'] .glass-table tbody tr {
  background: rgba(30, 41, 59, 0.08);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.05);
  margin-bottom: 2px;
  border-radius: 8px;
}

[data-theme='dark'] .glass-table tbody tr:hover {
  background: rgba(30, 41, 59, 0.15);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* 表格單元格毛玻璃效果 */
html:not([data-theme='dark']) .glass-table tbody td {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-right: 1px solid rgba(255, 255, 255, 0.1);
}

html:not([data-theme='dark']) .glass-table tbody tr:hover td {
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

[data-theme='dark'] .glass-table tbody td {
  background: rgba(30, 41, 59, 0.05);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  color: #e2e8f0;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

[data-theme='dark'] .glass-table tbody tr:hover td {
  background: rgba(30, 41, 59, 0.1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  color: #f1f5f9;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}

/* 黑夜模式表格內特殊元素文字配色 */
[data-theme='dark'] .glass-table .fw-semibold {
  color: #f8fafc !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

[data-theme='dark'] .glass-table .small {
  color: #cbd5e1 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

[data-theme='dark'] .glass-table .text-secondary {
  color: #94a3b8 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

[data-theme='dark'] .glass-table .badge {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
  border-radius: 12px !important;
}

[data-theme='dark'] .glass-table .btn {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  border-radius: 10px !important;
}

/* 白天模式表格內標籤和按鈕配色 */
html:not([data-theme='dark']) .glass-table .badge {
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 12px !important;
}

/* 白天模式 Badge 配色 */
html:not([data-theme='dark']) .glass-table .badge.text-bg-info {
  background: linear-gradient(145deg, #dbeafe 0%, #bfdbfe 100%) !important;
  color: #1e40af !important;
  border-color: #3b82f6 !important;
  border-radius: 12px !important;
}

html:not([data-theme='dark']) .glass-table .badge.text-bg-secondary {
  background: linear-gradient(145deg, #f1f5f9 0%, #e2e8f0 100%) !important;
  color: #475569 !important;
  border-color: #64748b !important;
  border-radius: 12px !important;
}

html:not([data-theme='dark']) .glass-table .badge.bg-success-subtle {
  background: linear-gradient(145deg, #dcfce7 0%, #bbf7d0 100%) !important;
  color: #166534 !important;
  border-color: #22c55e !important;
  border-radius: 12px !important;
}

html:not([data-theme='dark']) .glass-table .badge.bg-secondary-subtle {
  background: linear-gradient(145deg, #f8fafc 0%, #e2e8f0 100%) !important;
  color: #64748b !important;
  border-color: #94a3b8 !important;
  border-radius: 12px !important;
}

/* 白天模式按鈕配色 */
html:not([data-theme='dark']) .glass-table .btn {
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
  border-width: 1px;
  font-weight: 500;
  border-radius: 10px !important;
}

html:not([data-theme='dark']) .glass-table .btn-outline-danger {
  background: linear-gradient(145deg, #fef2f2 0%, #fee2e2 100%) !important;
  border-color: #ef4444 !important;
  color: #dc2626 !important;
  border-radius: 10px !important;
}

html:not([data-theme='dark']) .glass-table .btn-outline-danger:hover {
  background: linear-gradient(145deg, #fee2e2 0%, #fecaca 100%) !important;
  border-color: #dc2626 !important;
  color: #b91c1c !important;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
}

html:not([data-theme='dark']) .glass-table .btn-outline-primary {
  background: linear-gradient(145deg, #eff6ff 0%, #dbeafe 100%) !important;
  border-color: #3b82f6 !important;
  color: #2563eb !important;
  border-radius: 10px !important;
}

html:not([data-theme='dark']) .glass-table .btn-outline-primary:hover {
  background: linear-gradient(145deg, #dbeafe 0%, #bfdbfe 100%) !important;
  border-color: #2563eb !important;
  color: #1d4ed8 !important;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
}

html:not([data-theme='dark']) .glass-table .btn-outline-secondary {
  background: linear-gradient(145deg, #f8fafc 0%, #e2e8f0 100%) !important;
  border-color: #64748b !important;
  color: #475569 !important;
  border-radius: 10px !important;
}

html:not([data-theme='dark']) .glass-table .btn-outline-secondary:hover {
  background: linear-gradient(145deg, #e2e8f0 0%, #cbd5e1 100%) !important;
  border-color: #475569 !important;
  color: #334155 !important;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(100, 116, 139, 0.2);
}

html:not([data-theme='dark']) .glass-table .btn-primary {
  background: linear-gradient(145deg, #3b82f6 0%, #2563eb 100%) !important;
  border-color: #1d4ed8 !important;
  color: #ffffff !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  border-radius: 10px !important;
}

html:not([data-theme='dark']) .glass-table .btn-primary:hover {
  background: linear-gradient(145deg, #2563eb 0%, #1d4ed8 100%) !important;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

/* 表格單元格內部高光 */
html:not([data-theme='dark']) .glass-table tbody td::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.1) 0%,
    transparent 50%
  );
  pointer-events: none;
  border-radius: 6px;
}

[data-theme='dark'] .glass-table tbody td::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.05) 0%,
    transparent 50%
  );
  pointer-events: none;
  border-radius: 6px;
}

/* 空狀態 */
.empty-state {
  text-align: center;
  padding: 3rem 2rem;
  opacity: 0.7;
}

.empty-state i {
  display: block;
  margin-bottom: 1rem;
}

/* 可掛入裝置區域 */
.attachable-devices {
  margin-bottom: 1rem;
}

.device-item {
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

html:not([data-theme='dark']) .device-item {
  background: rgba(255, 255, 255, 0.3);
  border-color: rgba(0, 0, 0, 0.08);
}

html:not([data-theme='dark']) .device-item:hover {
  background: rgba(255, 255, 255, 0.5);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

[data-theme='dark'] .device-item {
  background: rgba(30, 41, 59, 0.08);
  border-color: rgba(255, 255, 255, 0.1);
}

[data-theme='dark'] .device-item:hover {
  background: rgba(30, 41, 59, 0.15);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* 響應式調整 */
@media (max-width: 767.98px) {
  .section-title {
    font-size: 1.1rem;
  }

  /* 手機版表格樣式優化 */
  .glass-table {
    font-size: 0.85rem;
    border-radius: 16px;
    margin: 0.5rem 0;
    overflow: hidden; /* 隱藏彩虹邊框溢出 */
    -webkit-overflow-scrolling: auto;
    /* 確保表格完整塞進卡片 */
    margin-left: 0 !important;
    margin-right: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    /* 確保表格容器不會溢出 */
    box-sizing: border-box !important;
    padding: 0 !important;
    z-index: 2 !important; /* 確保表格內容在彩虹邊框之上 */
  }

  /* 手機版表格彩虹邊框調整 - 內縮1px */
  .glass-table::before {
    border-radius: 16px !important; /* 保持表格圓角 */
    padding: 1px !important; /* 手機版彩虹邊框更細 */
    z-index: 1 !important; /* 確保彩虹邊框可見 */
    opacity: 1 !important; /* 確保完全不透明 */
    top: 0px !important; /* 內縮1px，不溢出 */
    left: 0px !important;
    right: 0px !important;
    bottom: 0px !important;
  }

  /* 手機版表格響應式容器 */
  .glass-table .table-responsive {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow: hidden !important; /* 隱藏溢出，避免滾動軸 */
    -webkit-overflow-scrolling: auto !important;
  }

  .glass-table .table {
    min-width: auto !important; /* 移除最小寬度限制 */
    width: 100% !important;
    max-width: 100% !important;
    margin-bottom: 0;
    margin-left: 0 !important;
    margin-right: 0 !important;
    /* 讓表格根據內容自動調整寬度 */
    table-layout: auto !important;
  }

  .glass-table thead th {
    padding: 0.4rem 0.3rem; /* 大幅縮減間距 */
    font-size: 0.75rem; /* 稍微縮小字體 */
    font-weight: 600;
    white-space: normal; /* 允許換行 */
    word-wrap: break-word; /* 強制換行 */
    word-break: break-word; /* 支援中文換行 */
    /* 確保標題單元格內容可以換行顯示 */
    max-width: 100% !important;
    overflow: visible !important;
    text-overflow: unset !important;
    /* 換行內容的間距調整 */
    line-height: 1.3 !important; /* 縮減行高 */
    vertical-align: top !important;
  }

  .glass-table tbody td {
    padding: 0.4rem 0.3rem; /* 大幅縮減間距 */
    font-size: 0.75rem; /* 稍微縮小字體 */
    white-space: normal; /* 允許換行 */
    word-wrap: break-word; /* 強制換行 */
    word-break: break-word; /* 支援中文換行 */
    /* 確保單元格內容可以換行顯示 */
    max-width: 100% !important;
    overflow: visible !important;
    text-overflow: unset !important;
    /* 換行內容的間距調整 */
    line-height: 1.3 !important; /* 縮減行高 */
    vertical-align: top !important;
  }

  /* 手機版表格行圓角調整 */
  .glass-table tbody tr {
    border-radius: 6px;
    margin-bottom: 0.5px; /* 縮減行間距 */
    /* 確保換行內容有適當間距 */
    line-height: 1.3 !important; /* 縮減行高 */
    vertical-align: top !important;
  }

  /* 手機版表格單元格圓角調整 */
  .glass-table tbody td::before {
    border-radius: 4px;
  }

  /* 手機版標籤和按鈕調整 */
  .glass-table .badge {
    font-size: 0.65rem; /* 縮小標籤字體 */
    padding: 0.2rem 0.4rem; /* 縮減標籤間距 */
    border-radius: 6px !important;
    /* 標籤保持單行，但允許換行容器 */
    max-width: 100% !important;
    overflow: visible !important;
    text-overflow: unset !important;
    white-space: nowrap !important;
    display: inline-block !important;
  }

  .glass-table .btn {
    font-size: 0.65rem; /* 進一步縮小按鈕字體 */
    padding: 0.15rem 0.3rem; /* 進一步縮減按鈕間距 */
    border-radius: 5px !important;
    /* 按鈕保持單行，但允許換行容器 */
    max-width: 100% !important;
    overflow: visible !important;
    text-overflow: unset !important;
    white-space: nowrap !important;
    display: inline-block !important;
    /* 確保按鈕在水平排列時有適當的間距 */
    margin: 0.05rem !important; /* 縮減按鈕間距 */
    flex-shrink: 0 !important; /* 防止按鈕被壓縮 */
    line-height: 1.2 !important; /* 縮減行高 */
  }

  /* 手機版群組裝置表格 - 只隱藏上次連結時間欄位，保留狀態欄位 */
  .glass-table th:nth-child(3), /* 隱藏第3欄標題（上次連結時間） */
  .glass-table td:nth-child(3) {
    /* 隱藏第3欄內容（上次連結時間） */
    display: none !important;
  }

  /* 確保群組裝置表格的狀態欄位顯示 */
  .glass-table th:nth-child(2), /* 確保第2欄標題（狀態）顯示 */
  .glass-table td:nth-child(2) {
    /* 確保第2欄內容（狀態）顯示 */
    display: table-cell !important;
  }

  /* 手機版成員列表表格 - 暫時移除隱藏規則，避免影響群組裝置表格 */
  /* 如果需要隱藏成員列表的特定欄位，需要在HTML模板中處理 */

  /* 手機版操作欄位優化 - 讓下拉選單和按鈕換行 */
  .glass-table td:last-child {
    width: auto !important;
    min-width: 0 !important;
    max-width: 100% !important;
  }

  /* 手機版下拉選單 */
  .glass-table .form-select {
    width: auto !important;
    min-width: 80px !important; /* 最小寬度 */
    max-width: 120px !important; /* 最大寬度 */
    font-size: 0.65rem !important;
    padding: 0.2rem 0.3rem !important;
    border-radius: 4px !important;
  }
}

/* 通用按鈕水平排列規則 - 適用所有螢幕尺寸 */
.glass-table .d-inline-flex.gap-2 {
  flex-direction: row !important; /* 水平排列 */
  align-items: center !important;
  gap: 0.2rem !important; /* 縮減間距 */
  flex-wrap: wrap !important; /* 允許換行 */
  justify-content: flex-start !important; /* 強制左對齊，覆蓋 justify-content-end */
}

/* 強制覆蓋 justify-content-end 類別 */
.glass-table .d-inline-flex.gap-2.justify-content-end {
  justify-content: flex-start !important; /* 強制左對齊 */
}

/* 更強力的選擇器來覆蓋 Bootstrap 的 justify-content-end */
.glass-table td .d-inline-flex.gap-2.justify-content-end {
  justify-content: flex-start !important; /* 強制左對齊 */
}

/* 最強力的選擇器 - 針對完整的HTML結構 */
.glass-table
  tbody
  td.text-end
  .d-inline-flex.gap-2.align-items-center.flex-wrap.justify-content-end {
  justify-content: flex-start !important; /* 強制左對齊 */
  flex-direction: row !important; /* 確保水平排列 */
  align-items: center !important; /* 垂直居中 */
  gap: 0.2rem !important; /* 縮減間距 */
  flex-wrap: wrap !important; /* 允許換行 */
}

/* 超強力選擇器 - 直接針對所有表單元素 */
.glass-table tbody td.text-end .d-inline-flex form {
  display: inline-block !important;
  margin: 0 !important;
  vertical-align: top !important;
  float: none !important;
}

/* 超強力選擇器 - 直接針對所有按鈕 */
.glass-table tbody td.text-end .d-inline-flex form .btn {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
  float: none !important;
}

/* 超強力選擇器 - 直接針對所有下拉選單 */
.glass-table tbody td.text-end .d-inline-flex form .form-select {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
  float: none !important;
}

/* 終極解決方案 - 強制所有元素在同一行 */
.glass-table tbody td.text-end .d-inline-flex {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 0.2rem !important;
  flex-wrap: wrap !important;
  justify-content: flex-start !important;
}

.glass-table tbody td.text-end .d-inline-flex > * {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
  float: none !important;
}

/* 針對表單內的 d-flex gap-2 容器 */
.glass-table .d-inline-flex form.d-flex.gap-2 {
  display: inline-flex !important; /* 改為 inline-flex */
  flex-direction: row !important; /* 水平排列 */
  align-items: center !important; /* 垂直居中 */
  gap: 0.2rem !important; /* 縮減間距 */
  margin: 0 !important;
  vertical-align: top !important;
}

/* 針對表單內的按鈕 */
.glass-table .d-inline-flex form.d-flex.gap-2 .btn {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
}

/* 針對表單內的下拉選單 */
.glass-table .d-inline-flex form.d-flex.gap-2 .form-select {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
}

/* 針對單獨的表單（移除按鈕） */
.glass-table .d-inline-flex form:not(.d-flex) {
  display: inline-block !important;
  margin: 0 !important;
  vertical-align: top !important;
}

/* 針對單獨表單內的按鈕 */
.glass-table .d-inline-flex form:not(.d-flex) .btn {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
}

.glass-table .d-inline-flex form {
  display: inline-block !important;
  margin: 0 !important;
  vertical-align: top !important;
}

.glass-table .d-inline-flex form .btn {
  display: inline-block !important;
  vertical-align: top !important;
  margin: 0 !important;
}

@media (max-width: 767.98px) {
  .device-item {
    flex-direction: column;
    align-items: flex-start !important;
    gap: 0.5rem; /* 從 1rem 減少到 0.5rem */
    padding: 0.75rem 1rem; /* 減少內距 */
    margin-bottom: 0.5rem; /* 減少底部間距 */
  }

  .device-item .ms-3 {
    margin-left: 0 !important;
    width: 100%;
    margin-top: 0 !important; /* 移除頂部間距 */
    margin-bottom: 0 !important; /* 移除底部間距 */
  }

  .device-item .btn {
    width: 100%;
    margin-top: 0.25rem !important; /* 減少按鈕頂部間距 */
  }

  /* 手機版裝置項目內容優化 */
  .device-item .d-flex {
    gap: 0.5rem !important; /* 減少內容間距 */
  }

  .device-item .flex-grow-1 {
    min-width: 0; /* 允許內容收縮 */
  }

  /* 手機版裝置項目文字優化 */
  .device-item h6 {
    font-size: 0.9rem !important; /* 減少標題字體 */
    margin-bottom: 0.25rem !important; /* 減少標題底部間距 */
  }

  .device-item .small {
    font-size: 0.75rem !important; /* 減少副標題字體 */
    margin-bottom: 0 !important; /* 移除副標題底部間距 */
  }

  .empty-state {
    padding: 1.5rem 1rem; /* 減少空白狀態內距 */
  }

  .empty-state i {
    font-size: 1.5rem !important;
  }

  /* 手機版群組裝置列表優化 */
  .attachable-devices {
    gap: 0.5rem !important; /* 減少裝置列表間距 */
  }

  .attachable-devices .row {
    margin: 0 !important; /* 移除行間距 */
  }

  .attachable-devices .col-md-6 {
    padding: 0.25rem !important; /* 減少列間距 */
  }

  /* 手機版區塊標題優化 */
  .section-header {
    margin-bottom: 1rem !important; /* 減少區塊標題底部間距 */
  }

  .section-title {
    margin-bottom: 0.5rem !important; /* 減少標題底部間距 */
  }

  .section-divider {
    margin: 0.75rem 0 !important; /* 減少分隔線間距 */
  }

  /* 手機版表格容器優化 */
  .table-responsive {
    border-radius: 16px;
    margin: 0.5rem 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  /* 手機版表格滾動條樣式 */
  .table-responsive::-webkit-scrollbar {
    height: 6px;
  }

  .table-responsive::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
  }

  .table-responsive::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
  }

  .table-responsive::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.5);
  }

  /* 手機版表格標題行固定 */
  .glass-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
  }

  /* 手機版表格行間距調整 */
  .glass-table tbody tr {
    margin-bottom: 1px;
  }

  /* 手機版表格最後一行圓角 */
  .glass-table tbody tr:last-child td:first-child {
    border-bottom-left-radius: 16px;
  }

  .glass-table tbody tr:last-child td:last-child {
    border-bottom-right-radius: 16px;
  }
}

/* 超小屏幕手機版表格優化 */
@media (max-width: 575.98px) {
  .glass-table {
    font-size: 0.8rem;
    border-radius: 12px;
    margin: 0.25rem 0;
    overflow: hidden; /* 隱藏彩虹邊框溢出 */
    z-index: 2 !important; /* 確保表格內容在彩虹邊框之上 */
  }

  /* 超小螢幕表格彩虹邊框更細 - 內縮1px */
  .glass-table::before {
    padding: 0.5px !important; /* 超小螢幕彩虹邊框最細 */
    border-radius: 12px !important; /* 配合表格圓角 */
    z-index: 1 !important; /* 確保彩虹邊框可見 */
    opacity: 1 !important; /* 確保完全不透明 */
    top: 0px !important; /* 內縮1px，不溢出 */
    left: 0px !important;
    right: 0px !important;
    bottom: 0px !important;
  }

  .glass-table .table {
    min-width: auto !important; /* 移除最小寬度限制 */
    width: 100% !important;
    max-width: 100% !important;
  }

  .glass-table thead th {
    padding: 0.5rem 0.4rem;
    font-size: 0.75rem;
  }

  .glass-table tbody td {
    padding: 0.5rem 0.4rem;
    font-size: 0.75rem;
  }

  .glass-table .badge {
    font-size: 0.65rem;
    padding: 0.2rem 0.4rem;
    border-radius: 6px !important;
  }

  /* 移除重複的按鈕樣式，避免衝突 */

  /* 超小屏幕表格行圓角 */
  .glass-table tbody tr {
    border-radius: 4px;
  }

  .glass-table tbody td::before {
    border-radius: 3px;
  }

  /* 超小屏幕表格最後一行圓角 */
  .glass-table tbody tr:last-child td:first-child {
    border-bottom-left-radius: 12px;
  }

  .glass-table tbody tr:last-child td:last-child {
    border-bottom-right-radius: 12px;
  }

  /* 超小屏幕裝置項目優化 */
  .device-item {
    gap: 0.25rem !important; /* 進一步減少間距 */
    padding: 0.5rem 0.75rem !important; /* 進一步減少內距 */
    margin-bottom: 0.25rem !important; /* 進一步減少底部間距 */
  }

  .device-item .btn {
    margin-top: 0.15rem !important; /* 進一步減少按鈕頂部間距 */
    padding: 0.25rem 0.5rem !important; /* 減少按鈕內距 */
  }

  .device-item .d-flex {
    gap: 0.25rem !important; /* 進一步減少內容間距 */
  }

  .device-item h6 {
    font-size: 0.85rem !important; /* 進一步減少標題字體 */
    margin-bottom: 0.15rem !important; /* 進一步減少標題底部間距 */
  }

  .device-item .small {
    font-size: 0.7rem !important; /* 進一步減少副標題字體 */
  }

  /* 超小屏幕群組裝置列表進一步優化 */
  .attachable-devices {
    gap: 0.25rem !important; /* 進一步減少裝置列表間距 */
  }

  .attachable-devices .col-md-6 {
    padding: 0.15rem !important; /* 進一步減少列間距 */
  }

  .section-header {
    margin-bottom: 0.75rem !important; /* 進一步減少區塊標題底部間距 */
  }

  .section-title {
    margin-bottom: 0.25rem !important; /* 進一步減少標題底部間距 */
  }

  .section-divider {
    margin: 0.5rem 0 !important; /* 進一步減少分隔線間距 */
  }

  .empty-state {
    padding: 1rem 0.75rem !important; /* 進一步減少空白狀態內距 */
  }

  /* 超小屏幕 offcanvas-body 進一步修復 */
  .offcanvas-body {
    padding: 1rem !important; /* 適中的內距 */
    font-size: 0.9rem !important; /* 稍微減少字體大小 */
  }

  .offcanvas-body .device-item {
    padding: 0.5rem 0.75rem !important; /* 進一步減少裝置項目內距 */
    font-size: 0.85rem !important; /* 減少裝置項目字體 */
  }

  .offcanvas-body h6 {
    font-size: 0.9rem !important; /* 減少標題字體 */
    margin-bottom: 0.25rem !important; /* 減少標題底部間距 */
  }

  .offcanvas-body .small {
    font-size: 0.75rem !important; /* 減少副標題字體 */
  }

  .offcanvas-body .btn {
    font-size: 0.8rem !important; /* 減少按鈕字體 */
    padding: 0.4rem 0.8rem !important; /* 減少按鈕內距 */
  }

  /* 超小屏幕 offcanvas-body flex 布局進一步修復 */
  .offcanvas-body .device-item {
    align-items: flex-start !important; /* 確保頂部對齊 */
  }

  .offcanvas-body .device-item .d-flex {
    gap: 0.5rem !important; /* 進一步減少間距 */
    align-items: flex-start !important; /* 確保頂部對齊 */
  }

  /* 超小屏幕 offcanvas-body 狀態點 - 更具體選擇器 */
  .offcanvas-body .d-flex .status-dot {
    margin-top: 0.2rem !important; /* 微調狀態點位置 */
    width: 0.5rem !important; /* 稍微減少狀態點大小 */
    height: 0.5rem !important;
    flex-shrink: 0 !important; /* 防止狀態點被壓縮 */
    border-radius: 50% !important; /* 確保圓形 */
    display: block !important; /* 確保顯示 */
    position: relative !important; /* 確保定位 */
  }

  /* 超小屏幕 offcanvas-body 狀態點顏色修復 */
  .offcanvas-body .status-dot.on {
    background: var(--bs-success) !important; /* 確保在線狀態顏色 */
    box-shadow: 0 0 0 2px color-mix(in srgb, var(--bs-success), transparent 75%) !important;
  }

  .offcanvas-body .status-dot:not(.on) {
    background: var(--bs-secondary) !important; /* 確保離線狀態顏色 */
    box-shadow: 0 0 0 2px
      color-mix(in srgb, var(--bs-secondary), transparent 75%) !important;
  }

  .offcanvas-body .fw-semibold {
    font-size: 0.85rem !important; /* 減少標題字體 */
    margin-bottom: 0.1rem !important; /* 進一步減少間距 */
    line-height: 1.1 !important; /* 更緊湊的行高 */
  }

  .offcanvas-body .device-sub {
    font-size: 0.75rem !important; /* 進一步減少副標題字體 */
    line-height: 1.2 !important; /* 更緊湊的行高 */
  }

  .offcanvas-body .text-monospace {
    font-size: 0.7rem !important; /* 減少 IP 字體 */
  }

  .offcanvas-body .text-success {
    font-size: 0.7rem !important; /* 減少狀態字體 */
  }

  /* 超小屏幕 offcanvas-body chevron 箭頭修復 */
  .offcanvas-body .device-item .chev {
    font-size: 0.9rem !important; /* 進一步減少箭頭大小 */
    opacity: 0.6 !important; /* 調整透明度 */
    flex-shrink: 0 !important; /* 防止箭頭被壓縮 */
    margin-top: 0.2rem !important; /* 微調垂直位置 */
    display: flex !important; /* 確保正確顯示 */
    align-items: center !important; /* 垂直居中 */
    justify-content: center !important; /* 水平居中 */
  }

  /* 超小屏幕卡片也跳脫 container */
  .glass-card {
    margin: 0 !important; /* 完全移除所有邊距 */
    border-radius: 0 !important; /* 確保無圓角 */
    width: 100vw !important; /* 全螢幕寬度 */
    position: relative !important; /* 相對定位 */
    left: 50% !important; /* 向左偏移 50% */
    right: 50% !important; /* 向右偏移 50% */
    margin-left: -50vw !important; /* 向左偏移視窗寬度的 50% */
    margin-right: -50vw !important; /* 向右偏移視窗寬度的 50% */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 4px rgba(0, 0, 0, 0.04) !important; /* 更輕的陰影 */
  }

  /* 超小螢幕白天模式卡片背景 */
  html:not([data-theme='dark']) .glass-card {
    background: rgba(255, 255, 255, 0.5) !important;
  }

  .glass-header {
    padding: 0.8rem 1rem 0.4rem !important; /* 進一步減少超小螢幕內距 */
    border-radius: 0 !important; /* 確保無圓角 */
  }

  .glass-body {
    padding: 1rem !important; /* 進一步減少超小螢幕內距 */
    border-radius: 0 !important; /* 確保無圓角 */
  }

  /* 超小屏幕容器也移除 my 邊距 */
  .container.my-5,
  .container.mt-4,
  .container-fluid.py-4,
  .container-fluid,
  .py-4,
  .pt-4,
  .pb-4 {
    margin-top: 0 !important; /* 移除頂部邊距 */
    margin-bottom: 0 !important; /* 移除底部邊距 */
    padding-left: 0.25rem !important; /* 進一步減少左右內距 */
    padding-right: 0.25rem !important;
    padding-top: 0 !important; /* 移除頂部內距 */
    padding-bottom: 0 !important; /* 移除底部內距 */
  }
}

html:not([data-theme='dark']) .techno-card .badge:hover {
  transform: scale(1.05) translateY(-1px) !important;
  transition: all 0.2s ease !important;
  box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

/* 白天模式 spinner 重新配色 */
html:not([data-theme='dark']) .techno-card .spinner-industrial {
  background: conic-gradient(
    from 210deg,
    rgba(99, 102, 241, 0.8) 0deg, 
    rgba(139, 92, 246, 0.9) 40deg, 
    rgba(59, 130, 246, 0.8) 120deg,
    rgba(99, 102, 241, 0.6) 180deg, 
    rgba(139, 92, 246, 0.9) 240deg, 
    rgba(99, 102, 241, 0.8) 300deg, 
    rgba(99, 102, 241, 0.8) 360deg
  ) !important;

  box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.4),
    0 0 12px rgba(99, 102, 241, 0.4), 0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 1px rgba(255, 255, 255, 0.6),
    inset 0 -2px 4px rgba(0, 0, 0, 0.1) !important;
}

html:not([data-theme='dark']) .techno-card .spinner-industrial::before {
  background: radial-gradient(
      closest-side,
      rgba(0, 0, 0, 0.08),
      transparent 60%
    ),
    linear-gradient(
      145deg,
      rgba(255, 255, 255, 0.9) 0%,
      rgba(248, 250, 252, 0.8) 60%,
      rgba(241, 245, 249, 0.7) 100%
    ) !important;
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.8),
    inset 0 -2px 3px rgba(0, 0, 0, 0.1) !important;
}

html:not([data-theme='dark']) .techno-card .spinner-industrial::after {
  background: conic-gradient(
    from 0deg,
      rgba(255, 255, 255, 0) 0deg,
      rgba(255, 255, 255, 0.9) 30deg,
      rgba(255, 255, 255, 0) 60deg,
    rgba(255, 255, 255, 0) 360deg
  ) !important;
}

/* 移除白天模式 badge 的掃光效果 */
html:not([data-theme='dark']) .techno-card .badge.sweep::after,
html:not([data-theme='dark']) .techno-card .badge.sweep::before {
  display: none !important;
}

/* =========================
   白天模式設備日誌表格毛玻璃樣式
   ========================= */

/* 設備日誌表格容器毛玻璃效果 - 覆蓋 Bootstrap table-dark */
html:not([data-theme='dark']) #deviceLogsTable,
html:not([data-theme='dark']) #deviceLogsTable.table-dark,
html:not([data-theme='dark']) .table-dark#deviceLogsTable {
  background: rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(148, 163, 184, 0.4) !important;
  border-radius: 12px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 4px 12px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  overflow: hidden !important;
  color: inherit !important;
}

/* 表格標題行毛玻璃效果 - 覆蓋 Bootstrap table-dark */
html:not([data-theme='dark']) #deviceLogsTable thead,
html:not([data-theme='dark']) #deviceLogsTable.table-dark thead,
html:not([data-theme='dark']) .table-dark#deviceLogsTable thead {
  background: rgba(255, 255, 255, 0.6) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
}

html:not([data-theme='dark']) #deviceLogsTable thead th,
html:not([data-theme='dark']) #deviceLogsTable.table-dark thead th,
html:not([data-theme='dark']) .table-dark#deviceLogsTable thead th {
  background: transparent !important;
  color: #1e293b !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
  border-color: rgba(148, 163, 184, 0.3) !important;
  padding: 0.75rem !important;
}

/* 表格內容行 - 覆蓋 Bootstrap table-dark */
html:not([data-theme='dark']) #deviceLogsTable tbody tr,
html:not([data-theme='dark']) #deviceLogsTable.table-dark tbody tr,
html:not([data-theme='dark']) .table-dark#deviceLogsTable tbody tr {
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  transition: all 0.2s ease !important;
}

html:not([data-theme='dark']) #deviceLogsTable tbody tr:nth-child(even),
html:not([data-theme='dark'])
  #deviceLogsTable.table-dark
  tbody
  tr:nth-child(even),
html:not([data-theme='dark'])
  .table-dark#deviceLogsTable
  tbody
  tr:nth-child(even) {
  background: rgba(255, 255, 255, 0.3) !important;
}

html:not([data-theme='dark']) #deviceLogsTable tbody tr:hover,
html:not([data-theme='dark']) #deviceLogsTable.table-dark tbody tr:hover,
html:not([data-theme='dark']) .table-dark#deviceLogsTable tbody tr:hover {
  background: rgba(255, 255, 255, 0.5) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  transform: scale(1.01) !important;
}

html:not([data-theme='dark']) #deviceLogsTable tbody td,
html:not([data-theme='dark']) #deviceLogsTable.table-dark tbody td,
html:not([data-theme='dark']) .table-dark#deviceLogsTable tbody td {
  background: transparent !important;
  color: #334155 !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.7) !important;
  border-color: rgba(148, 163, 184, 0.2) !important;
  padding: 0.6rem !important;
}

/* 狀態文字重新配色 - 覆蓋 Bootstrap table-dark */
html:not([data-theme='dark']) #deviceLogsTable .status-online,
html:not([data-theme='dark']) #deviceLogsTable.table-dark .status-online,
html:not([data-theme='dark']) .table-dark#deviceLogsTable .status-online {
  color: #059669 !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
}

html:not([data-theme='dark']) #deviceLogsTable .status-offline,
html:not([data-theme='dark']) #deviceLogsTable.table-dark .status-offline,
html:not([data-theme='dark']) .table-dark#deviceLogsTable .status-offline {
  color: #dc2626 !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
}

/* =========================
   白天模式手風琴按鈕毛玻璃樣式
   ========================= */

/* 手風琴按鈕毛玻璃效果 */
html:not([data-theme='dark']) .accordion-btn {
  background: rgba(255, 255, 255, 0.35) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(148, 163, 184, 0.4) !important;
  border-radius: 12px !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08), 0 3px 10px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  
  /* 文字樣式 */
  color: #1e293b !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
  
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  padding: 0.875rem 1.25rem !important;
}

html:not([data-theme='dark']) .accordion-btn:hover {
  background: rgba(255, 255, 255, 0.45) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12), 0 6px 16px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
  border-color: rgba(99, 102, 241, 0.4) !important;
  color: #111827 !important;
}

html:not([data-theme='dark']) .accordion-btn:focus {
  background: rgba(255, 255, 255, 0.4) !important;
  border-color: rgba(99, 102, 241, 0.6) !important;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15), 0 6px 20px rgba(0, 0, 0, 0.08),
    0 3px 10px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  outline: none !important;
}

/* 手風琴按鈕展開狀態 */
html:not([data-theme='dark']) .accordion-btn:not(.collapsed) {
  background: rgba(99, 102, 241, 0.15) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  border-color: rgba(99, 102, 241, 0.5) !important;
  color: #3730a3 !important;
  box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15),
    0 4px 12px rgba(99, 102, 241, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
}

/* 手風琴按鈕內的圖示 */
html:not([data-theme='dark']) .accordion-btn .toggle-icon {
  color: #6366f1 !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8) !important;
  transition: all 0.3s ease !important;
  filter: drop-shadow(0 1px 2px rgba(99, 102, 241, 0.3)) !important;
}

html:not([data-theme='dark']) .accordion-btn:hover .toggle-icon {
  color: #4f46e5 !important;
  transform: scale(1.1) !important;
}

html:not([data-theme='dark']) .accordion-btn:not(.collapsed) .toggle-icon {
  color: #3730a3 !important;
  transform: rotate(180deg) !important;
}

/* =========================
   白天模式 Collapse 容器毛玻璃樣式
   ========================= */

/* Collapse 容器毛玻璃效果 */
html:not([data-theme='dark']) #deviceLogsCollapse,
html:not([data-theme='dark']) .collapse {
  background: rgba(255, 255, 255, 0.3) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border: 1px solid rgba(148, 163, 184, 0.3) !important;
  border-radius: 0 0 12px 12px !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08), 0 3px 10px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
  
  margin-top: -1px !important; /* 與手風琴按鈕無縫連接 */
  padding: 1rem !important;
  transition: all 0.3s ease !important;
}

/* Collapse 容器內的內容 */
html:not([data-theme='dark']) #deviceLogsCollapse .table-responsive,
html:not([data-theme='dark']) .collapse .table-responsive {
  background: transparent !important;
  border-radius: 8px !important;
  overflow: hidden !important;
}

/* 確保 collapse 內的所有文字都有正確顏色 */
html:not([data-theme='dark']) #deviceLogsCollapse,
html:not([data-theme='dark']) #deviceLogsCollapse *,
html:not([data-theme='dark']) .collapse,
html:not([data-theme='dark']) .collapse * {
  color: inherit !important;
}

/* =========================
   白天模式 bg-dark 卡片毛玻璃樣式
   ========================= */

/* 覆蓋 Bootstrap bg-dark 卡片樣式 */
html:not([data-theme='dark']) .card.bg-dark,
html:not([data-theme='dark']) .bg-dark.card,
html:not([data-theme='dark']) .card-body.bg-dark {
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(148, 163, 184, 0.4) !important;
  border-radius: 12px !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08), 0 3px 10px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  
  /* 文字顏色重新設定 */
  color: #1e293b !important;
  transition: all 0.3s ease !important;
}

html:not([data-theme='dark']) .card.bg-dark:hover,
html:not([data-theme='dark']) .bg-dark.card:hover,
html:not([data-theme='dark']) .card-body.bg-dark:hover {
  background: rgba(255, 255, 255, 0.45) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12), 0 6px 16px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
  border-color: rgba(99, 102, 241, 0.4) !important;
}

/* 覆蓋 text-light 類別 */
html:not([data-theme='dark']) .text-light,
html:not([data-theme='dark']) .bg-dark .text-light,
html:not([data-theme='dark']) .card.bg-dark .text-light {
  color: #334155 !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.7) !important;
}

/* 覆蓋 border-secondary 類別 */
html:not([data-theme='dark']) .border-secondary,
html:not([data-theme='dark']) .bg-dark.border-secondary {
  border-color: rgba(148, 163, 184, 0.4) !important;
}

/* 讓子元素背景透明以顯示藍天白雲，但排除特定元素（包含 SweetAlert） */
html:not([data-theme='dark'])
  body
  *:not(.card):not(.modal):not(.dropdown-menu):not(.offcanvas):not(.navbar):not(
    .btn
  ):not(.form-control):not(.form-select):not(.form-check-input):not(.table):not(
    .list-group-item
  ):not(.alert):not(.badge):not(.progress):not(.tooltip):not(.toast):not(
    .spinner-border
  ):not(.spinner-grow):not(.carousel):not(.accordion):not(.nav-tabs):not(
    .nav-pills
  ):not(.pagination):not(.breadcrumb):not(.input-group):not(.btn-group):not(
    .btn-toolbar
  ):not(.swal2-popup):not(.swal2-container):not(.swal2-backdrop):not(
    .swal2-title
  ):not(.swal2-content):not(.swal2-confirm):not(.swal2-cancel):not(
    .swal2-deny
  ):not([class*='swal2']) {
  background-color: transparent !important;
}

/* 讓子元素背景透明以顯示星空，但排除 body 本身（包含 SweetAlert 和 table-responsive） */
html[data-theme='dark']
  body
  *:not(.card):not(.modal):not(.dropdown-menu):not(.offcanvas):not(.navbar):not(
    .btn
  ):not(.form-control):not(.form-select):not(.form-check-input):not(.table):not(
    .table-responsive
  ):not(.list-group-item):not(.alert):not(.badge):not(.progress):not(
    .tooltip
  ):not(.toast):not(.spinner-border):not(.spinner-grow):not(.carousel):not(
    .accordion
  ):not(.nav-tabs):not(.nav-pills):not(.pagination):not(.breadcrumb):not(
    .input-group
  ):not(.btn-group):not(.btn-toolbar):not(.swal2-popup):not(
    .swal2-container
  ):not(.swal2-backdrop):not(.swal2-title):not(.swal2-content):not(
    .swal2-confirm
  ):not(.swal2-cancel):not(.swal2-deny):not([class*='swal2']) {
  background-color: transparent !important;
}

/* 黑夜模式下的文字顏色覆蓋 */
[data-theme='dark'] .text-dark {
  color: var(--text-primary) !important;
}

[data-theme='dark'] .text-body {
  color: var(--text-primary) !important;
}

[data-theme='dark'] .text-body-emphasis {
  color: var(--text-primary) !important;
}

/* 黑夜模式下的邊框顏色 */
[data-theme='dark'] .border {
  border-color: var(--border-color) !important;
}

[data-theme='dark'] .border-light {
  border-color: var(--border-light) !important;
}

/* 確保容器背景透明以顯示星空 */
[data-theme='dark'] .container,
[data-theme='dark'] .container-fluid,
[data-theme='dark'] main {
  background-color: transparent !important;
}

/* 修復所有可能的 Bootstrap 背景類別 */
[data-theme='dark'] .bg-transparent {
  background-color: transparent !important;
}

[data-theme='dark'] .bg-opacity-10,
[data-theme='dark'] .bg-opacity-25,
[data-theme='dark'] .bg-opacity-50,
[data-theme='dark'] .bg-opacity-75,
[data-theme='dark'] .bg-opacity-100 {
  background-color: transparent !important;
}

/* 確保特定元素有正確的背景 */
[data-theme='dark'] .card {
  background-color: var(--card-bg) !important;
}

[data-theme='dark'] .modal {
  background-color: var(--card-bg) !important;
}

[data-theme='dark'] .dropdown-menu {
  background-color: var(--card-bg) !important;
}

[data-theme='dark'] .form-control {
  background-color: var(--bg-secondary) !important;
}

[data-theme='dark'] .table {
  background-color: var(--table-bg) !important;
}

[data-theme='dark'] .list-group-item {
  background-color: var(--card-bg) !important;
}

[data-theme='dark'] .alert {
  background-color: var(--bg-secondary) !important;
}

[data-theme='dark'] .badge {
  background-color: var(--bg-tertiary) !important;
}

[data-theme='dark'] .progress {
  background-color: var(--bg-tertiary) !important;
}

[data-theme='dark'] .tooltip {
  background-color: var(--bg-primary) !important;
}

[data-theme='dark'] .toast {
  background-color: var(--card-bg) !important;
}

/* 這些樣式已經包含在上面，移除重複 */

/* 白天模式毛玻璃 navbar 樣式 - 參考 carousel-control-prev */
.navbar:not([data-theme='dark'] .navbar) {
  position: relative;
  background: rgba(255, 255, 255, 0.4) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
  z-index: 1030 !important; /* 提升 navbar z-index，確保高於輪播照片 */
  
  /* 毛玻璃陰影 - 參考 carousel 樣式 */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 確保白天模式優先級 - 加強選擇器 */
html:not([data-theme='dark']) .navbar.navbar-expand-lg.navbar-dark,
html:not([data-theme='dark']) .navbar {
  background: rgba(255, 255, 255, 0.4) !important;
  background-color: rgba(255, 255, 255, 0.4) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
  z-index: 1030 !important; /* 提升 navbar z-index，確保高於輪播照片 */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
}

/* 白天模式毛玻璃 navbar 文字樣式 */
html:not([data-theme='dark']) .navbar .navbar-brand,
html:not([data-theme='dark']) .navbar .navbar-nav .nav-link,
html:not([data-theme='dark']) .navbar .navbar-text {
  color: #1f2937 !important;
  font-weight: 600;
  letter-spacing: 0.3px;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
}

/* 白天模式 navbar 圖標樣式 - 白色雲朵 */
html:not([data-theme='dark']) .navbar #notifDropdown i.bi-cloud-fill {
  color: #ffffff !important;
  filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.4));
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
}

html:not([data-theme='dark']) .navbar .navbar-text i.bi-sun-fill {
  color: #f59e0b !important;
  filter: drop-shadow(0 1px 2px rgba(245, 158, 11, 0.4));
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
}

html:not([data-theme='dark']) .navbar .navbar-nav .nav-link:hover {
  color: #111827 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.9);
}

/* 白天模式毛玻璃 navbar toggler 樣式 */
html:not([data-theme='dark']) .navbar .navbar-toggler {
  border-color: rgba(31, 41, 55, 0.3) !important;
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

html:not([data-theme='dark']) .navbar .navbar-toggler:hover {
  background: rgba(255, 255, 255, 0.3) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

html:not([data-theme='dark']) .navbar .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2831, 41, 55, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
}

/* 白天模式毛玻璃登出按鈕樣式 */
html:not([data-theme='dark']) .navbar .navbar-logout-btn {
  color: #1f2937 !important;
  border-color: rgba(31, 41, 55, 0.3) !important;
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  font-weight: 600;
  letter-spacing: 0.3px;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

/* 白天模式手機版黑夜切換按鈕樣式 */
html:not([data-theme='dark']) .navbar .mobile-theme-toggle {
  color: #1f2937 !important;
  border-color: rgba(31, 41, 55, 0.3) !important;
  background: rgba(255, 255, 255, 0.25) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  font-weight: 600;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.12) !important;
}

html:not([data-theme='dark']) .navbar .mobile-theme-toggle:hover {
  background: rgba(255, 255, 255, 0.35) !important;
  border-color: rgba(31, 41, 55, 0.5) !important;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.18) !important;
}

/* 白天模式手機版登出按鈕樣式 */
html:not([data-theme='dark']) .mobile-logout-btn {
  color: #1f2937 !important;
  border-color: rgba(31, 41, 55, 0.3) !important;
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
  font-weight: 600;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1) !important;
}

html:not([data-theme='dark']) .mobile-logout-btn:hover {
  background: rgba(255, 255, 255, 0.3) !important;
  border-color: rgba(31, 41, 55, 0.5) !important;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15) !important;
}

/* 白天模式漢堡按鈕樣式 */
html:not([data-theme='dark']) .navbar-toggler {
  color: #1f2937 !important;
  border-color: rgba(31, 41, 55, 0.3) !important;
  background: rgba(255, 255, 255, 0.25) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.12) !important;
}

html:not([data-theme='dark']) .navbar-toggler:hover {
  background: rgba(255, 255, 255, 0.35) !important;
  border-color: rgba(31, 41, 55, 0.5) !important;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.18) !important;
}

html:not([data-theme='dark']) .navbar .navbar-logout-btn:hover {
  color: #111827 !important;
  border-color: rgba(31, 41, 55, 0.5) !important;
  background: rgba(255, 255, 255, 0.3) !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

/* 黑夜模式下的 navbar 毛玻璃樣式 - 高優先級覆蓋 */
html[data-theme='dark'] .navbar,
html[data-theme='dark'] .navbar.navbar-expand-lg,
html[data-theme='dark'] .navbar.navbar-dark,
[data-theme='dark'] .navbar {
  position: relative !important; /* 與白天模式保持一致 */
  background: rgba(30, 41, 59, 0.1) !important; /* 更透明，讓星空更明顯 */
  background-color: rgba(
    30,
    41,
    59,
    0.1
  ) !important; /* 強制覆蓋 var(--bg-secondary) */
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important; /* 更透明的邊框 */
  z-index: 1030 !important; /* 提升 navbar z-index，確保高於輪播照片 */
  
  /* 增強毛玻璃陰影效果 - 參考白天模式 */
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 12px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
}

/* 黑夜模式下的 navbar-dark 毛玻璃樣式 - 高優先級覆蓋 */
html[data-theme='dark'] .navbar-dark,
[data-theme='dark'] .navbar-dark {
  background: rgba(30, 41, 59, 0.2) !important; /* 與主要 navbar 保持一致 */
  background-color: rgba(
    30,
    41,
    59,
    0.2
  ) !important; /* 強制覆蓋 var(--bg-secondary) */
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border-bottom: 1px solid rgba(71, 85, 105, 0.2) !important;
  
  /* 增強毛玻璃陰影效果 */
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 12px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
}

[data-theme='dark'] .navbar-dark .navbar-brand,
[data-theme='dark'] .navbar-dark .navbar-nav .nav-link,
[data-theme='dark'] .navbar-dark .navbar-text {
  color: #ffffff !important;
}

[data-theme='dark'] .navbar-dark .navbar-nav .nav-link:hover {
  color: #e2e8f0 !important;
}

/* 黑夜模式 navbar 圖標樣式 - 白色雲朵 */
[data-theme='dark'] .navbar #notifDropdown i.bi-cloud-fill {
  color: #ffffff !important;
  filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.5));
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
}

/* 黑夜模式歡迎詞圖標 - 改為月亮 */
[data-theme='dark'] .navbar .navbar-text i.bi-sun-fill {
  /* 完全隱藏太陽圖標 */
  visibility: hidden !important;
  width: 0 !important;
  margin: 0 !important;
}

/* 黑夜模式登出按鈕樣式 */
[data-theme='dark'] .navbar .navbar-logout-btn {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
  background-color: rgba(255, 255, 255, 0.05) !important;
  text-shadow: none;
}

[data-theme='dark'] .navbar .navbar-logout-btn:hover {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式手機版黑夜切換按鈕樣式 */
[data-theme='dark'] .navbar .mobile-theme-toggle {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
  background: rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  text-shadow: none;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2) !important;
}

[data-theme='dark'] .navbar .mobile-theme-toggle:hover {
  background: rgba(255, 255, 255, 0.15) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.3) !important;
}

/* 黑夜模式手機版登出按鈕樣式 */
[data-theme='dark'] .mobile-logout-btn {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
  background: rgba(255, 255, 255, 0.05) !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
  text-shadow: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
}

[data-theme='dark'] .mobile-logout-btn:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3) !important;
}

/* 黑夜模式漢堡按鈕樣式 */
[data-theme='dark'] .navbar-toggler {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
  background: rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2) !important;
}

[data-theme='dark'] .navbar-toggler:hover {
  background: rgba(255, 255, 255, 0.15) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.3) !important;
}

/* 黑夜模式手機版歡迎區域 */
[data-theme='dark'] .navbar-mobile-greeting {
  background: rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  border-radius: 10px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

[data-theme='dark'] .mobile-greeting-text {
  color: #f1f5f9 !important;
  font-weight: 600 !important;
  text-shadow: none !important;
}

/* 確保導航列按鈕也是白色 */
[data-theme='dark'] .navbar-toggler {
  border-color: rgba(255, 255, 255, 0.3) !important;
}

[data-theme='dark'] .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
}

[data-theme='dark'] .navbar-dark .navbar-toggler {
  border-color: var(--border-color) !important;
  background-color: transparent;
}

[data-theme='dark'] .navbar-dark .navbar-toggler:hover {
  border-color: var(--bs-primary) !important;
}

[data-theme='dark'] .navbar-dark .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28245, 245, 245, 0.85%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* 修復 navbar 的固定定位金屬風樣式 */
.navbar.fixed-top,
.navbar.sticky-top {
  background: linear-gradient(
    160deg,
    var(--techno-bg-start) 0%,
    var(--techno-bg-mid) 45%,
    var(--techno-bg-end) 100%
  ) !important;
  backdrop-filter: blur(15px) saturate(150%);
  -webkit-backdrop-filter: blur(15px) saturate(150%);
  border-bottom: 1px solid var(--techno-border) !important;
  
  /* 金屬立體陰影 */
  box-shadow: 0 4px 10px var(--card-shadow-hover),
    inset 0 1px 1px rgba(255, 255, 255, 0.6),
    inset 0 -2px 4px rgba(0, 0, 0, 0.2) !important;
}

[data-theme='dark'] .navbar.fixed-top,
[data-theme='dark'] .navbar.sticky-top {
  background: rgba(30, 41, 59, 0.75) !important;
  backdrop-filter: blur(15px) saturate(150%);
  -webkit-backdrop-filter: blur(15px) saturate(150%);
  border-bottom: 1px solid rgba(71, 85, 105, 0.4) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), 0 1px 8px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
}

/* 特別修復 navbar-dark bg-dark 的金屬風樣式 */
.navbar.navbar-dark.bg-dark {
  background: linear-gradient(
    160deg,
    var(--techno-bg-start) 0%,
    var(--techno-bg-mid) 45%,
    var(--techno-bg-end) 100%
  ) !important;
  backdrop-filter: blur(15px) saturate(150%);
  -webkit-backdrop-filter: blur(15px) saturate(150%);
  border-bottom: 1px solid var(--techno-border) !important;
  
  /* 金屬立體陰影 */
  box-shadow: 0 4px 10px var(--card-shadow-hover),
    inset 0 1px 1px rgba(255, 255, 255, 0.6),
    inset 0 -2px 4px rgba(0, 0, 0, 0.2) !important;
}

[data-theme='dark'] .navbar.navbar-dark.bg-dark {
  background: rgba(30, 41, 59, 0.75) !important;
  backdrop-filter: blur(15px) saturate(150%);
  -webkit-backdrop-filter: blur(15px) saturate(150%);
  border-bottom: 1px solid rgba(71, 85, 105, 0.4) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), 0 1px 8px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
}

/* =========================
   白天模式 navbar 內層毛玻璃樣式
   ========================= */

/* navbar 容器和 collapse 區域 */
html:not([data-theme='dark']) .navbar .container-fluid {
  background-color: transparent !important;
}

/* 桌面版和手機版通用 navbar-collapse 毛玻璃樣式 */
html:not([data-theme='dark']) .navbar-collapse,
html:not([data-theme='dark']) .navbar .navbar-collapse,
html:not([data-theme='dark']) .navbar-expand-lg .navbar-collapse {
  background: rgba(255, 255, 255, 0.12) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-radius: 8px !important;
  margin-top: 0.5rem !important;
  padding: 0.75rem !important;
  border: 1px solid rgba(148, 163, 184, 0.25) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06), 0 2px 8px rgba(0, 0, 0, 0.04),
    inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
  transition: all 0.3s ease !important;
}

/* 桌面版時隱藏 navbar-collapse 的背景（因為不會展開） */
@media (min-width: 992px) {
  html:not([data-theme='dark']) .navbar-collapse,
  html:not([data-theme='dark']) .navbar .navbar-collapse {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    margin-top: 0 !important;
    padding: 0 !important;
  }
  
  /* 簡化的 navbar 佈局 - 恢復基本樣式 */
  .navbar-nav.ms-auto {
    align-items: center;
  }
  
  /* 基本的通知下拉選單樣式 */
  .navbar .dropdown-menu {
    /* 移除所有 z-index 設定 */
  }
  
  /* 移除所有卡片的 z-index 設定 */
  
  /* 移除所有子元素的 z-index 設定 */
}

/* navbar 內的下拉選單 - 基本樣式 */
html:not([data-theme='dark']) .navbar .dropdown-menu {
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(148, 163, 184, 0.3) !important;
  border-radius: 10px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 4px 12px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  /* 移除 z-index 和 position 設定 */
}

html:not([data-theme='dark']) .navbar .dropdown-item {
  color: #1e293b !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.7) !important;
  border-radius: 6px !important;
  margin: 2px 4px !important;
  transition: all 0.2s ease !important;
}

html:not([data-theme='dark']) .navbar .dropdown-item:hover {
  background: rgba(99, 102, 241, 0.15) !important;
  color: #3730a3 !important;
  transform: translateX(2px) !important;
}

/* 黑夜模式保持透明 */
[data-theme='dark'] .navbar .container-fluid,
[data-theme='dark'] .navbar-collapse {
  background-color: transparent !important;
}

/* 黑夜模式下的 footer 樣式 */
[data-theme='dark'] footer {
  background-color: var(--bg-secondary) !important;
  border-top: 1px solid var(--border-color) !important;
  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1) !important;
  color: var(--text-primary) !important;
}

[data-theme='dark'] footer.bg-body-tertiary {
  background-color: var(--bg-secondary) !important;
  border-top: 1px solid var(--border-color) !important;
  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1) !important;
}

[data-theme='dark'] footer .text-body-secondary {
  color: var(--text-secondary) !important;
}

[data-theme='dark'] footer small {
  color: var(--text-secondary) !important;
}

/* 黑夜模式下的 offcanvas - 毛玻璃效果 - 提高優先級 */
html[data-theme='dark'] .offcanvas {
  background: rgba(30, 41, 59, 0.15) !important;
  background-color: rgba(30, 41, 59, 0.15) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  color: var(--text-primary) !important;
  border-right: 1px solid rgba(71, 85, 105, 0.2) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2), 0 4px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
}

/* Offcanvas 寬度設定與毛玻璃樣式 - 白天模式 */
.offcanvas {
  --bs-offcanvas-width: 320px;
  background: rgba(255, 255, 255, 0.35) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border-right: 1px solid rgba(148, 163, 184, 0.4) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), 0 4px 16px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* 手機版 offcanvas 寬度調整 - 減少 2/5 */
@media (max-width: 767.98px) {
  .offcanvas {
    --bs-offcanvas-width: 192px; /* 320px 減少 2/5 = 320px × 3/5 = 192px */
  }
}

/* 白天模式 offcanvas-header 毛玻璃效果 */
.offcanvas-header {
  background: rgba(255, 255, 255, 0.45) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  border-bottom: 1px solid rgba(148, 163, 184, 0.3) !important;
  padding: 1rem 1.5rem;
}

/* 黑夜模式 offcanvas-header 毛玻璃效果 - 提高優先級 */
html[data-theme='dark'] .offcanvas-header {
  background: rgba(30, 41, 59, 0.2) !important;
  background-color: rgba(30, 41, 59, 0.2) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
  padding: 1rem 1.5rem;
}

[data-theme='dark'] .offcanvas-header .offcanvas-title {
  color: var(--text-primary) !important;
  font-weight: 600;
}

/* 修復所有 close button 的黑夜模式 */
[data-theme='dark'] .btn-close {
  background-color: var(--text-primary) !important;
  opacity: 0.8;
  filter: none !important;
}

[data-theme='dark'] .btn-close:hover {
  opacity: 1;
  background-color: var(--text-primary) !important;
}

[data-theme='dark'] .btn-close:focus {
  background-color: var(--text-primary) !important;
  box-shadow: 0 0 0 0.25rem rgba(245, 245, 245, 0.25);
}

/* 特別修復 offcanvas-header 的 close button */
[data-theme='dark'] .offcanvas-header .btn-close {
  background-color: var(--text-primary) !important;
  opacity: 0.8;
}

[data-theme='dark'] .offcanvas-header .btn-close:hover {
  opacity: 1;
}

/* 修復 modal 的 close button */
[data-theme='dark'] .modal-header .btn-close {
  background-color: var(--text-primary) !important;
  opacity: 0.8;
}

[data-theme='dark'] .modal-header .btn-close:hover {
  opacity: 1;
}

/* 白天模式 offcanvas-body 毛玻璃效果 */
.offcanvas-body {
  background: rgba(255, 255, 255, 0.35) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(148, 163, 184, 0.4) !important;
  color: #000000;
  padding: 1.5rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), 0 4px 16px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* 黑夜模式 offcanvas-body 毛玻璃效果 - 提高優先級 */
html[data-theme='dark'] .offcanvas-body,
html[data-theme='dark'] #offcanvas-devices-body {
  background: rgba(30, 41, 59, 0.12) !important;
  background-color: rgba(30, 41, 59, 0.12) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.2) !important;
  color: var(--text-primary) !important;
  padding: 1.5rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 4px 16px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.06) !important;
}

/* 黑夜模式下的卡片樣式 */
[data-theme='dark'] .card {
  background-color: var(--card-bg);
  border-color: var(--card-border);
  color: var(--text-primary);
}

/* 黑夜模式下的表格樣式 */
[data-theme='dark'] .table {
  color: var(--text-primary);
  background-color: var(--table-bg);
}

[data-theme='dark'] .table thead th {
  background-color: var(--table-header-bg);
  border-color: var(--table-border);
  color: var(--text-primary);
}

[data-theme='dark'] .table td,
[data-theme='dark'] .table th {
  border-color: var(--table-border);
}

[data-theme='dark'] .table-striped > tbody > tr:nth-of-type(odd) > td,
[data-theme='dark'] .table-striped > tbody > tr:nth-of-type(odd) > th {
  background-color: var(--table-row-even);
}

[data-theme='dark'] .table-hover > tbody > tr:hover > td,
[data-theme='dark'] .table-hover > tbody > tr:hover > th {
  background-color: var(--table-row-hover);
}

/* 黑夜模式下的程式碼 */
[data-theme='dark'] code {
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  border-radius: 0.25rem;
  padding: 0.125rem 0.25rem;
}

/* 黑夜模式下的按鈕樣式 */
[data-theme='dark'] .btn-outline-secondary {
  border-color: var(--border-color);
  color: var(--text-primary);
}

[data-theme='dark'] .btn-outline-secondary:hover {
  background-color: var(--bg-tertiary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

/* 黑夜模式下的表單控制項 */
[data-theme='dark'] .form-control {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

[data-theme='dark'] .form-control:focus {
  background-color: var(--bg-secondary);
  border-color: var(--bs-primary);
  color: var(--text-primary);
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* 黑夜模式下的表單標籤 */
[data-theme='dark'] .form-label {
  color: var(--text-primary);
}

/* 黑夜模式下的表單文字 */
[data-theme='dark'] .form-text {
  color: var(--text-muted);
}

/* 黑夜模式下的表單開關 */
[data-theme='dark'] .form-check-input {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
}

[data-theme='dark'] .form-check-input:checked {
  background-color: var(--bs-primary);
  border-color: var(--bs-primary);
}

[data-theme='dark'] .form-check-input:focus {
  border-color: var(--bs-primary);
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

[data-theme='dark'] .form-check-label {
  color: var(--text-primary);
}

/* 黑夜模式下的表單選擇 */
[data-theme='dark'] .form-select {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

[data-theme='dark'] .form-select:focus {
  background-color: var(--bg-secondary) !important;
  border-color: var(--bs-primary) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25) !important;
}

/* 修復下拉選單選項的背景 */
[data-theme='dark'] .form-select option {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

/* 確保所有選擇器都有正確的樣式 */
[data-theme='dark'] select.form-select,
[data-theme='dark'] select.form-control {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

/* 黑夜模式下的文字區域 */
[data-theme='dark'] .form-control[type='textarea'],
[data-theme='dark'] textarea.form-control {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

[data-theme='dark'] .form-control[type='textarea']:focus,
[data-theme='dark'] textarea.form-control:focus {
  background-color: var(--bg-secondary);
  border-color: var(--bs-primary);
  color: var(--text-primary);
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* 黑夜模式下的表單提示文字 */
[data-theme='dark'] .form-control::placeholder {
  color: var(--text-muted) !important;
  opacity: 0.8;
}

[data-theme='dark'] .form-control::-webkit-input-placeholder {
  color: var(--text-muted) !important;
  opacity: 0.8;
}

[data-theme='dark'] .form-control::-moz-placeholder {
  color: var(--text-muted) !important;
  opacity: 0.8;
}

[data-theme='dark'] .form-control:-ms-input-placeholder {
  color: var(--text-muted) !important;
  opacity: 0.8;
}

[data-theme='dark'] .form-control:-moz-placeholder {
  color: var(--text-muted) !important;
  opacity: 0.8;
}

/* 黑夜模式下的下拉選單 - 實色背景 */
[data-theme='dark'] .dropdown-menu,
[data-theme='dark'] .dropdown-menu-end,
[data-theme='dark'] .dropdown-menu-lg-start,
[data-theme='dark'] .dropdown-menu.show {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4),
    0 2px 4px -1px rgba(0, 0, 0, 0.3) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  /* 移除 z-index 和 position 設定 */
}

/* 清理完成 */

/* 基本設定 */

/* 通知下拉選單 - 回到基本的 Bootstrap 行為 */
.dropdown-menu[aria-labelledby='notifDropdown'],
.dropdown-menu[aria-labelledby='notifDropdownDesktop'] {
  min-width: 320px;
}

/* 桌面版通知下拉選單 - 遵循 Bootstrap 架構 */
@media (min-width: 992px) {
  /* 確保桌面版通知下拉選單有高優先級 - 但低於 SweetAlert */
  .dropdown-menu[aria-labelledby='notifDropdownDesktop'] {
    z-index: 2147483645 !important;
    position: fixed !important;
    top: 60px !important;
    right: 40px !important; /* 增加右邊距離從 20px 到 40px */
  }
  
  /* 強制重置輪播和所有可能干擾的元素 */
  .carousel,
  .carousel-container,
  .carousel::before,
  .carousel-item,
  .carousel-item::after,
  .carousel-control-prev,
  .carousel-control-next,
  .carousel-indicators,
  .navbar-collapse,
  .navbar-nav,
  .container-fluid,
  main,
  .container,
  .row,
  .col,
  .col-md-4,
  .card,
  .techno-card {
    z-index: 1 !important;
  }
  
  /* 特別針對輪播的堆疊上下文重置 - 保留 hover 效果 */
  .carousel {
    position: static !important;
  }
  
  /* 恢復輪播的 hover transform 效果 */
  .carousel:hover {
    transform: translateY(-5px) !important;
  }
  
  /* 恢復輪播的重要視覺效果 z-index */
  .carousel::before {
    z-index: 1 !important;
  }
  
  .carousel-item::after {
    z-index: 1 !important;
  }
  
  /* 恢復輪播控制按鈕的 z-index */
  .carousel-control-prev,
  .carousel-control-next {
    z-index: 10 !important;
  }
  
  /* 恢復輪播指示器的 z-index */
  .carousel-indicators {
    z-index: 10 !important;
  }
}

/* 移除所有 z-index 覆蓋樣式 */

[data-theme='dark'] .dropdown-item {
  color: var(--text-primary) !important;
  background-color: transparent;
}

/* 清理完成 - 恢復到基本的 Bootstrap 下拉選單行為 */

[data-theme='dark'] .dropdown-item:hover,
[data-theme='dark'] .dropdown-item:focus {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

[data-theme='dark'] .dropdown-divider {
  border-color: var(--border-color) !important;
}

/* 黑夜模式下的徽章 */
[data-theme='dark'] .badge {
  color: var(--text-primary);
}

/* 黑夜模式下的文字顏色 */
[data-theme='dark'] .text-muted {
  color: var(--text-muted) !important;
}

[data-theme='dark'] .text-body-secondary {
  color: var(--text-secondary) !important;
}

/* 黑夜模式下的邊框 */
[data-theme='dark'] .border {
  border-color: var(--border-color) !important;
}

/* 黑夜模式下的分隔線 */
[data-theme='dark'] hr {
  border-color: var(--border-color);
  opacity: 0.3;
}

/* ajaxMsg 毛玻璃效果 - 高優先級 */
#ajaxMsg {
  background: rgba(255, 0, 0, 0.8) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 3px solid rgba(255, 0, 0, 1) !important;
  border-radius: 12px !important;
  box-shadow: 0 8px 24px rgba(255, 0, 0, 0.5), 0 4px 12px rgba(255, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
  padding: 1rem 1.5rem !important;
  margin: 1rem 0 !important;
  font-weight: 700 !important;
  font-size: 1.2rem !important;
  color: white !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  position: relative !important;
  z-index: 1000 !important;
}

/* ajaxMsg 成功訊息毛玻璃效果 */
#ajaxMsg.alert-success {
  background: rgba(34, 197, 94, 0.15) !important;
  border-color: rgba(34, 197, 94, 0.4) !important;
  color: #065f46 !important;
  box-shadow: 0 8px 24px rgba(34, 197, 94, 0.2), 0 4px 12px rgba(34, 197, 94, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* ajaxMsg 警告訊息毛玻璃效果 */
#ajaxMsg.alert-warning {
  background: rgba(245, 158, 11, 0.15) !important;
  border-color: rgba(245, 158, 11, 0.4) !important;
  color: #92400e !important;
  box-shadow: 0 8px 24px rgba(245, 158, 11, 0.2), 0 4px 12px rgba(245, 158, 11, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* ajaxMsg 錯誤訊息毛玻璃效果 */
#ajaxMsg.alert-danger {
  background: rgba(239, 68, 68, 0.15) !important;
  border-color: rgba(239, 68, 68, 0.4) !important;
  color: #991b1b !important;
  box-shadow: 0 8px 24px rgba(239, 68, 68, 0.2), 0 4px 12px rgba(239, 68, 68, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* ajaxMsg 資訊訊息毛玻璃效果 */
#ajaxMsg.alert-info {
  background: rgba(59, 130, 246, 0.15) !important;
  border-color: rgba(59, 130, 246, 0.4) !important;
  color: #1e40af !important;
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2), 0 4px 12px rgba(59, 130, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* 黑夜模式 ajaxMsg 毛玻璃效果 */
[data-theme='dark'] #ajaxMsg {
  background: rgba(30, 41, 59, 0.2) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.3) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  color: var(--text-primary) !important;
}

/* 黑夜模式 ajaxMsg 成功訊息毛玻璃效果 */
[data-theme='dark'] #ajaxMsg.alert-success {
  background: rgba(34, 197, 94, 0.2) !important;
  border-color: rgba(34, 197, 94, 0.5) !important;
  color: #6ee7b7 !important;
  box-shadow: 0 8px 32px rgba(34, 197, 94, 0.3), 0 4px 16px rgba(34, 197, 94, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 ajaxMsg 警告訊息毛玻璃效果 */
[data-theme='dark'] #ajaxMsg.alert-warning {
  background: rgba(245, 158, 11, 0.2) !important;
  border-color: rgba(245, 158, 11, 0.5) !important;
  color: #fbbf24 !important;
  box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3), 0 4px 16px rgba(245, 158, 11, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 ajaxMsg 錯誤訊息毛玻璃效果 */
[data-theme='dark'] #ajaxMsg.alert-danger {
  background: rgba(239, 68, 68, 0.2) !important;
  border-color: rgba(239, 68, 68, 0.5) !important;
  color: #fca5a5 !important;
  box-shadow: 0 8px 32px rgba(239, 68, 68, 0.3), 0 4px 16px rgba(239, 68, 68, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 ajaxMsg 資訊訊息毛玻璃效果 */
[data-theme='dark'] #ajaxMsg.alert-info {
  background: rgba(59, 130, 246, 0.2) !important;
  border-color: rgba(59, 130, 246, 0.5) !important;
  color: #93c5fd !important;
  box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3), 0 4px 16px rgba(59, 130, 246, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* Bootstrap Alert 毛玻璃效果 */
.alert {
  background: rgba(255, 255, 255, 0.8) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  border-radius: 12px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 4px 12px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
  font-weight: 500 !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Bootstrap Alert 成功訊息毛玻璃效果 */
.alert-success {
  background: rgba(34, 197, 94, 0.15) !important;
  border-color: rgba(34, 197, 94, 0.4) !important;
  color: #065f46 !important;
  box-shadow: 0 8px 24px rgba(34, 197, 94, 0.2), 0 4px 12px rgba(34, 197, 94, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* Bootstrap Alert 警告訊息毛玻璃效果 */
.alert-warning {
  background: rgba(245, 158, 11, 0.15) !important;
  border-color: rgba(245, 158, 11, 0.4) !important;
  color: #92400e !important;
  box-shadow: 0 8px 24px rgba(245, 158, 11, 0.2), 0 4px 12px rgba(245, 158, 11, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* Bootstrap Alert 錯誤訊息毛玻璃效果 */
.alert-danger {
  background: rgba(239, 68, 68, 0.15) !important;
  border-color: rgba(239, 68, 68, 0.4) !important;
  color: #991b1b !important;
  box-shadow: 0 8px 24px rgba(239, 68, 68, 0.2), 0 4px 12px rgba(239, 68, 68, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* Bootstrap Alert 資訊訊息毛玻璃效果 */
.alert-info {
  background: rgba(59, 130, 246, 0.15) !important;
  border-color: rgba(59, 130, 246, 0.4) !important;
  color: #1e40af !important;
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2), 0 4px 12px rgba(59, 130, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
}

/* 黑夜模式 Bootstrap Alert 毛玻璃效果 */
[data-theme='dark'] .alert {
  background: rgba(30, 41, 59, 0.8) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.4) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  color: var(--text-primary) !important;
}

/* 黑夜模式 Bootstrap Alert 成功訊息毛玻璃效果 */
[data-theme='dark'] .alert-success {
  background: rgba(34, 197, 94, 0.2) !important;
  border-color: rgba(34, 197, 94, 0.5) !important;
  color: #6ee7b7 !important;
  box-shadow: 0 8px 32px rgba(34, 197, 94, 0.3), 0 4px 16px rgba(34, 197, 94, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 Bootstrap Alert 警告訊息毛玻璃效果 */
[data-theme='dark'] .alert-warning {
  background: rgba(245, 158, 11, 0.2) !important;
  border-color: rgba(245, 158, 11, 0.5) !important;
  color: #fbbf24 !important;
  box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3), 0 4px 16px rgba(245, 158, 11, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 Bootstrap Alert 錯誤訊息毛玻璃效果 */
[data-theme='dark'] .alert-danger {
  background: rgba(239, 68, 68, 0.2) !important;
  border-color: rgba(239, 68, 68, 0.5) !important;
  color: #fca5a5 !important;
  box-shadow: 0 8px 32px rgba(239, 68, 68, 0.3), 0 4px 16px rgba(239, 68, 68, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 Bootstrap Alert 資訊訊息毛玻璃效果 */
[data-theme='dark'] .alert-info {
  background: rgba(59, 130, 246, 0.2) !important;
  border-color: rgba(59, 130, 246, 0.5) !important;
  color: #93c5fd !important;
  box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3), 0 4px 16px rgba(59, 130, 246, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* Bootstrap Toast 毛玻璃效果 */
.toast {
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  border-radius: 12px !important;
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15), 0 6px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
  font-weight: 500 !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Bootstrap Toast 成功訊息毛玻璃效果 */
.toast.bg-success {
  background: rgba(34, 197, 94, 0.9) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 12px 28px rgba(34, 197, 94, 0.3), 0 6px 16px rgba(34, 197, 94, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

/* Bootstrap Toast 錯誤訊息毛玻璃效果 */
.toast.bg-danger {
  background: rgba(239, 68, 68, 0.9) !important;
  border-color: rgba(239, 68, 68, 0.6) !important;
  box-shadow: 0 12px 28px rgba(239, 68, 68, 0.3), 0 6px 16px rgba(239, 68, 68, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

/* 黑夜模式 Bootstrap Toast 毛玻璃效果 */
[data-theme='dark'] .toast {
  background: rgba(30, 41, 59, 0.9) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.4) !important;
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.4), 0 6px 16px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  color: var(--text-primary) !important;
}

/* 黑夜模式 Bootstrap Toast 成功訊息毛玻璃效果 */
[data-theme='dark'] .toast.bg-success {
  background: rgba(34, 197, 94, 0.8) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 12px 28px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* 黑夜模式 Bootstrap Toast 錯誤訊息毛玻璃效果 */
[data-theme='dark'] .toast.bg-danger {
  background: rgba(239, 68, 68, 0.8) !important;
  border-color: rgba(239, 68, 68, 0.6) !important;
  box-shadow: 0 12px 28px rgba(239, 68, 68, 0.4), 0 6px 16px rgba(239, 68, 68, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}



/* 黑夜模式下的警告框 */
[data-theme='dark'] .alert {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

[data-theme='dark'] .alert-danger {
  background-color: color-mix(
    in srgb,
    var(--status-offline) 10%,
    var(--bg-secondary)
  );
  border-color: var(--status-offline);
  color: var(--status-offline);
}

[data-theme='dark'] .alert-success {
  background-color: color-mix(
    in srgb,
    var(--status-online) 10%,
    var(--bg-secondary)
  );
  border-color: var(--status-online);
  color: var(--status-online);
}

[data-theme='dark'] .alert-warning {
  background-color: color-mix(
    in srgb,
    var(--status-warning) 10%,
    var(--bg-secondary)
  );
  border-color: var(--status-warning);
  color: var(--status-warning);
}

[data-theme='dark'] .alert-info {
  background-color: color-mix(
    in srgb,
    var(--status-info) 10%,
    var(--bg-secondary)
  );
  border-color: var(--status-info);
  color: var(--status-info);
}

/* 黑夜模式下的連結 */
[data-theme='dark'] a {
  color: var(--bs-primary);
}

[data-theme='dark'] a:hover {
  color: var(--bs-primary);
  opacity: 0.8;
}

/* 黑夜模式下的文字顏色覆蓋 */
[data-theme='dark'] .text-primary {
  color: var(--bs-primary) !important;
}

[data-theme='dark'] .text-secondary {
  color: var(--text-secondary) !important;
}

[data-theme='dark'] .text-success {
  color: var(--status-online) !important;
}

[data-theme='dark'] .text-danger {
  color: var(--status-offline) !important;
}

[data-theme='dark'] .text-warning {
  color: var(--status-warning) !important;
}

[data-theme='dark'] .text-info {
  color: var(--status-info) !important;
}

/* 黑夜模式下的背景顏色覆蓋 */
[data-theme='dark'] .bg-primary {
  background-color: var(--bs-primary) !important;
}

[data-theme='dark'] .bg-secondary {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

[data-theme='dark'] .bg-success {
  background: linear-gradient(
    135deg,
    rgba(139, 92, 246, 0.9) 0%,
    rgba(99, 102, 241, 0.95) 100%
  ) !important;
  color: #ffffff !important;
  border: 1px solid rgba(99, 102, 241, 0.5) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
}

[data-theme='dark'] .bg-danger {
  background-color: var(--status-offline) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

[data-theme='dark'] .bg-warning {
  background-color: var(--status-warning) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

[data-theme='dark'] .bg-info {
  background-color: var(--status-info) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

/* 黑暗模式下的電子鎖按鈕樣式 */
[data-theme='dark'] .locker-btn.btn-outline-secondary {
  background: linear-gradient(135deg, #64748b 0%, #475569 100%) !important;
  border: 1px solid #64748b !important;
  color: #fff !important;
  box-shadow: 0 2px 8px rgba(100, 116, 139, 0.3) !important;
}

[data-theme='dark'] .locker-btn.btn-outline-secondary:hover {
  background: linear-gradient(135deg, #475569 0%, #334155 100%) !important;
  box-shadow: 0 4px 12px rgba(100, 116, 139, 0.4) !important;
  border-color: #475569 !important;
}

[data-theme='dark'] .locker-btn.btn-outline-success {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  border: 1px solid #10b981 !important;
  color: #fff !important;
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3) !important;
}

[data-theme='dark'] .locker-btn.btn-outline-success:hover {
  background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4) !important;
  border-color: #059669 !important;
}

[data-theme='dark'] .locker-btn.btn-outline-primary {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
  border: 1px solid #3b82f6 !important;
  color: #fff !important;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3) !important;
}

[data-theme='dark'] .locker-btn.btn-outline-primary:hover {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4) !important;
  border-color: #2563eb !important;
}

/* 電子鎖按鈕狀態樣式 */
.locker-btn.active-locked {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important;
  border-color: #dc2626 !important;
  color: #fff !important;
  box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2), 0 2px 8px rgba(220, 38, 38, 0.3) !important;
  position: relative !important;
}

.locker-btn.active-locked::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, #dc2626, #f59e0b, #dc2626);
  border-radius: 10px;
  /* 移除 z-index */
  animation: lockedGlow 2s ease-in-out infinite alternate;
}

.locker-btn.active-unlocked {
  background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;
  border-color: #059669 !important;
  color: #fff !important;
  box-shadow: 0 0 0 2px rgba(5, 150, 105, 0.2), 0 2px 8px rgba(5, 150, 105, 0.3) !important;
  position: relative !important;
}

.locker-btn.active-unlocked::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, #059669, #10b981, #059669);
  border-radius: 10px;
  /* 移除 z-index */
  animation: unlockedGlow 2s ease-in-out infinite alternate;
}

/* 發光動畫 */
@keyframes lockedGlow {
  0% {
    opacity: 0.5;
    transform: scale(1);
  }
  100% {
    opacity: 0.8;
    transform: scale(1.02);
  }
}

@keyframes unlockedGlow {
  0% {
    opacity: 0.5;
    transform: scale(1);
  }
  100% {
    opacity: 0.8;
    transform: scale(1.02);
  }
}

/* 黑暗模式下的狀態按鈕 */
[data-theme='dark'] .locker-btn.active-locked {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.3),
    0 2px 12px rgba(239, 68, 68, 0.4) !important;
}

[data-theme='dark'] .locker-btn.active-locked::before {
  background: linear-gradient(45deg, #ef4444, #fbbf24, #ef4444);
}

[data-theme='dark'] .locker-btn.active-unlocked {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3),
    0 2px 12px rgba(16, 185, 129, 0.4) !important;
}

[data-theme='dark'] .locker-btn.active-unlocked::before {
  background: linear-gradient(45deg, #10b981, #34d399, #10b981);
}

/* ===== 新版電子鎖開關樣式 - 協調配色 ===== */
.locker-toggle {
  width: 3rem;
  height: 1.5rem;
  border-radius: 1rem;
  border: 2px solid #d1d5db;
  background-color: #f3f4f6;
  transition: all 0.3s ease;
}

.locker-toggle:checked {
  background-color: #6366f1;
  border-color: #6366f1;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.locker-toggle:focus {
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

/* 電子鎖狀態文字 */
.lock-status-text {
  font-weight: 500;
  transition: color 0.3s ease;
}

/* 電子鎖表單對齊優化 */
#lockerCard .col-md-5 {
  display: flex;
  align-items: center;
}

#lockerCard .form-check.form-switch {
  margin-bottom: 0;
  display: flex;
  align-items: center;
}

#lockerCard .form-check-label {
  margin-bottom: 0;
  padding-left: 0.5rem;
}

/* 電子鎖排程表單緊湊化 */
#lockerCard form .col-12 {
  margin-top: 0 !important;
  padding-top: 0.25rem;
}

#lockerCard form .col-12 small {
  margin-bottom: 0.25rem;
  line-height: 1.2;
}

#lockerCard form .text-success,
#lockerCard form .text-danger {
  margin-top: 0 !important;
}

/* 手機版電子鎖表單 - 簡化樣式 */
@media (max-width: 767.98px) {
  #lockerCard .card-body {
    padding: 0.75rem !important;
  }
  
  #lockerCard .card-title {
    font-size: 1rem;
    margin-bottom: 0.5rem !important;
  }
  
  /* 修復手機版時間輸入框樣式 */
  #lockerCard input[type='datetime-local'] {
    background-color: var(--bs-body-bg) !important;
    border: 1px solid var(--bs-border-color) !important;
    color: var(--bs-body-color) !important;
  }
  
  /* 深色模式下的時間輸入框 */
  [data-theme='dark'] #lockerCard input[type='datetime-local'] {
    background-color: var(--bg-secondary) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
    -webkit-color-scheme: dark;
    color-scheme: dark;
  }
  
  [data-theme='dark'] #lockerCard input[type='datetime-local']:focus {
    background-color: var(--bg-secondary) !important;
    border-color: var(--bs-primary) !important;
    color: var(--text-primary) !important;
    box-shadow: 0 0 0 0.2rem rgba(139, 92, 246, 0.25) !important;
  }
  
  /* 時間輸入框的內部元件 */
  [data-theme='dark']
    #lockerCard
    input[type='datetime-local']::-webkit-calendar-picker-indicator {
    filter: invert(1);
    opacity: 0.8;
  }
  
  [data-theme='dark']
    #lockerCard
    input[type='datetime-local']::-webkit-datetime-edit {
    color: var(--text-primary) !important;
  }
  
  [data-theme='dark']
    #lockerCard
    input[type='datetime-local']::-webkit-datetime-edit-fields-wrapper {
    background-color: transparent !important;
  }
}

/* 黑夜模式電子鎖樣式 */
[data-theme='dark'] .locker-toggle {
  background-color: #374151;
  border-color: #6b7280;
}

[data-theme='dark'] .locker-toggle:checked {
  background-color: #8b5cf6;
  border-color: #8b5cf6;
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
}

/* 黑夜模式下的按鈕樣式 - 現代配色 */
[data-theme='dark'] .btn-primary {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-primary:hover {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  box-shadow: 0 6px 16px rgba(139, 92, 246, 0.3);
  transform: translateY(-1px);
}

[data-theme='dark'] .btn-outline-primary {
  background: rgba(30, 41, 59, 0.1) !important;
  border: 2px solid transparent !important;
  background-image: linear-gradient(
      rgba(30, 41, 59, 0.1),
      rgba(30, 41, 59, 0.1)
    ),
    linear-gradient(135deg, #4338ca 0%, #6d28d9 100%) !important;
  background-origin: border-box !important;
  background-clip: padding-box, border-box !important;
  color: #ffffff !important;
  backdrop-filter: blur(15px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(15px) saturate(180%) !important;
  transition: all 0.3s ease !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
}

[data-theme='dark'] .btn-outline-primary:hover {
  background: linear-gradient(135deg, #4338ca 0%, #6d28d9 100%) !important;
  border: 2px solid transparent !important;
  color: #ffffff !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 8px 24px rgba(67, 56, 202, 0.6),
    0 4px 16px rgba(109, 40, 217, 0.5) !important;
  backdrop-filter: blur(20px) saturate(200%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(200%) !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7) !important;
}

[data-theme='dark'] .btn-success {
  background: linear-gradient(135deg, #4338ca 0%, #6d28d9 100%) !important;
  border: none !important;
  color: #ffffff !important;
  backdrop-filter: blur(15px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(15px) saturate(180%) !important;
  box-shadow: 0 6px 20px rgba(67, 56, 202, 0.5),
    0 3px 12px rgba(109, 40, 217, 0.4) !important;
  transition: all 0.3s ease !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6) !important;
}

[data-theme='dark'] .btn-success:hover {
  background: linear-gradient(135deg, #3730a3 0%, #581c87 100%) !important;
  box-shadow: 0 10px 32px rgba(67, 56, 202, 0.7),
    0 6px 20px rgba(109, 40, 217, 0.5) !important;
  transform: translateY(-2px) !important;
  backdrop-filter: blur(20px) saturate(200%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(200%) !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7) !important;
}

[data-theme='dark'] .btn-outline-success {
  color: #10b981;
  border: 2px solid #10b981;
  background: transparent;
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-outline-success:hover {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border-color: #10b981;
  color: #fff;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  transform: translateY(-1px);
}

[data-theme='dark'] .btn-danger {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-danger:hover {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
  transform: translateY(-1px);
}

[data-theme='dark'] .btn-outline-danger {
  color: #ef4444;
  border: 2px solid #ef4444;
  background: transparent;
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-outline-danger:hover {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  border-color: #ef4444;
  color: #fff;
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
  transform: translateY(-1px);
}

[data-theme='dark'] .btn-info {
  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-info:hover {
  background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
  box-shadow: 0 6px 16px rgba(6, 182, 212, 0.4);
  transform: translateY(-1px);
}

[data-theme='dark'] .btn-outline-info {
  color: #06b6d4;
  border: 2px solid #06b6d4;
  background: transparent;
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-outline-info:hover {
  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
  border-color: #06b6d4;
  color: #fff;
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
  transform: translateY(-1px);
}

[data-theme='dark'] .btn-warning {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
  transition: all 0.3s ease;
}

[data-theme='dark'] .btn-warning:hover {
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
  box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
  transform: translateY(-1px);
}

/* 強制修復 device-list 中的按鈕樣式 */
[data-theme='dark'] .device-list .btn,
[data-theme='dark'] .groups-scope .btn,
[data-theme='dark'] .groups-scope .d-grid .btn {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  border: none !important;
  color: #fff !important;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3) !important;
  transition: all 0.3s ease !important;
}

[data-theme='dark'] .device-list .btn:hover,
[data-theme='dark'] .groups-scope .btn:hover,
[data-theme='dark'] .groups-scope .d-grid .btn:hover {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  box-shadow: 0 6px 16px rgba(139, 92, 246, 0.3) !important;
  transform: translateY(-1px) !important;
}

/* 專門修復 offcanvas 中的按鈕樣式 */
[data-theme='dark'] .offcanvas-body .btn-success {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  border: none !important;
  color: #fff !important;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3) !important;
  transition: all 0.3s ease !important;
  font-weight: 600 !important;
}

[data-theme='dark'] .offcanvas-body .btn-success:hover {
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%) !important;
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4) !important;
  transform: translateY(-1px) !important;
  color: #fff !important;
}

[data-theme='dark'] .offcanvas-body .btn-success:focus {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  box-shadow: 0 0 0 0.25rem rgba(99, 102, 241, 0.25) !important;
  color: #fff !important;
}

[data-theme='dark'] .offcanvas-body .btn-success:active {
  background: linear-gradient(135deg, #4338ca 0%, #6d28d9 100%) !important;
  transform: translateY(0) !important;
  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3) !important;
}

/* 修復 offcanvas 中的其他按鈕樣式 */
[data-theme='dark'] .offcanvas-body .btn-primary {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  border: none !important;
  color: #fff !important;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3) !important;
  transition: all 0.3s ease !important;
}

[data-theme='dark'] .offcanvas-body .btn-primary:hover {
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%) !important;
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4) !important;
  transform: translateY(-1px) !important;
  color: #fff !important;
}

[data-theme='dark'] .offcanvas-body .btn-outline-secondary {
  color: var(--text-primary) !important;
  border: 2px solid var(--border-color) !important;
  background: transparent !important;
  transition: all 0.3s ease !important;
}

[data-theme='dark'] .offcanvas-body .btn-outline-secondary:hover {
  background: var(--bg-tertiary) !important;
  border-color: var(--border-light) !important;
  color: var(--text-primary) !important;
  transform: translateY(-1px) !important;
}

/* 修復 btn-primary 在 device-list 中的樣式 */
[data-theme='dark'] .device-list .btn-primary,
[data-theme='dark'] .groups-scope .btn-primary {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  border: none !important;
  color: #fff !important;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3) !important;
}

[data-theme='dark'] .device-list .btn-primary:hover,
[data-theme='dark'] .groups-scope .btn-primary:hover {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
  box-shadow: 0 6px 16px rgba(139, 92, 246, 0.3) !important;
  transform: translateY(-1px) !important;
}

/* 修復 btn-outline-secondary 在 device-list 中的樣式 */
[data-theme='dark'] .device-list .btn-outline-secondary,
[data-theme='dark'] .groups-scope .btn-outline-secondary {
  color: var(--text-primary) !important;
  border: 2px solid var(--border-color) !important;
  background: transparent !important;
  transition: all 0.3s ease !important;
}

[data-theme='dark'] .device-list .btn-outline-secondary:hover,
[data-theme='dark'] .groups-scope .btn-outline-secondary:hover {
  background: var(--bg-tertiary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
  transform: translateY(-1px) !important;
}

/* =========================
   登入頁面毛玻璃樣式
   ========================= */

/* 白天模式登入卡片毛玻璃樣式 - 參考 navbar */
html:not([data-theme='dark']) .card.shadow-sm.rounded-4 {
  background: rgba(255, 255, 255, 0.4) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border: 1px solid rgba(148, 163, 184, 0.3) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

html:not([data-theme='dark']) .card.shadow-sm.rounded-4:hover {
  background: rgba(255, 255, 255, 0.5) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15) !important;
  transform: translateY(-2px) !important;
}

/* 登入卡片內的文字樣式 */
html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .card-body h1,
html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .card-body .form-label,
html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .card-body a {
  color: #1f2937 !important;
  font-weight: 600;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
}

html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .card-body a:hover {
  color: #111827 !important;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.9);
}

/* 登入表單輸入框毛玻璃樣式 */
html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .form-control {
  background: rgba(255, 255, 255, 0.3) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  border: 1px solid rgba(148, 163, 184, 0.4) !important;
  color: #1f2937 !important;
  font-weight: 500;
}

html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .form-control:focus {
  background: rgba(255, 255, 255, 0.4) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-color: rgba(99, 102, 241, 0.6) !important;
  box-shadow: 0 0 0 0.25rem rgba(99, 102, 241, 0.15) !important;
  color: #111827 !important;
}

html:not([data-theme='dark'])
  .card.shadow-sm.rounded-4
  .form-control::placeholder {
  color: rgba(31, 41, 55, 0.6) !important;
  font-weight: 500;
}

/* 登入按鈕毛玻璃樣式 */
html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .btn-primary {
  background: rgba(99, 102, 241, 0.8) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  border: 1px solid rgba(99, 102, 241, 0.4) !important;
  color: #ffffff !important;
  font-weight: 600;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3) !important;
}

html:not([data-theme='dark']) .card.shadow-sm.rounded-4 .btn-primary:hover {
  background: rgba(99, 102, 241, 0.9) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-color: rgba(99, 102, 241, 0.6) !important;
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4) !important;
  transform: translateY(-1px) !important;
}

/* 黑夜模式保持原有樣式 */
[data-theme='dark'] .card.shadow-sm.rounded-4 {
  background-color: var(--card-bg) !important;
  border-color: var(--card-border) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
}

/* 黑夜模式下的 btn-dark 修正 */
[data-theme='dark'] .btn-dark {
  background-color: var(--bg-primary);
  border-color: var(--bg-primary);
  color: var(--text-primary);
}

[data-theme='dark'] .btn-dark:hover {
  background-color: var(--bg-tertiary);
  border-color: var(--bg-tertiary);
  color: var(--text-primary);
}

[data-theme='dark'] .btn-outline-dark {
  color: var(--text-primary);
  border-color: var(--border-color);
}

[data-theme='dark'] .btn-outline-dark:hover {
  background-color: var(--bg-tertiary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

/* 黑夜模式下的列表群組 */
[data-theme='dark'] .list-group-item {
  background-color: var(--card-bg);
  border-color: var(--card-border);
  color: var(--text-primary);
}

[data-theme='dark'] .list-group-item:hover {
  background-color: var(--bg-tertiary);
}

[data-theme='dark'] .list-group-item.active {
  background-color: var(--bs-primary);
  border-color: var(--bs-primary);
}

/* 黑夜模式下的 device-list 和 list-unstyled */
[data-theme='dark'] .device-list {
  background-color: transparent;
}

[data-theme='dark'] .device-list .device-item {
  background-color: var(--card-bg);
  border-color: var(--card-border);
  color: var(--text-primary);
}

[data-theme='dark'] .device-list .device-item:hover {
  background-color: var(--bg-tertiary);
  border-color: var(--bs-primary);
  color: var(--text-primary);
}

[data-theme='dark'] .device-list .device-sub {
  color: var(--text-secondary) !important;
}

[data-theme='dark'] .device-list .status-dot {
  background-color: #ff6b6b !important;
  box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.5),
    0 0 12px rgba(255, 107, 107, 0.6), 0 0 20px rgba(255, 107, 107, 0.3) !important;
}

[data-theme='dark'] .device-list .status-dot.on {
  background-color: #fbbf24 !important;
  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.5),
    0 0 12px rgba(251, 191, 36, 0.7), 0 0 20px rgba(251, 191, 36, 0.4) !important;
}

[data-theme='dark'] .device-list .chev {
  color: var(--text-secondary);
}

/* 黑夜模式下的 groups-scope */
[data-theme='dark'] .groups-scope .device-item {
  background-color: var(--card-bg);
  border-color: var(--card-border);
}

/* 裝置編輯頁面按鈕樣式優化 */
.button-group {
  margin-top: 1.5rem;
}

.button-group .btn {
  min-width: 100px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.button-group .btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* 手機版按鈕優化 */
@media (max-width: 767.98px) {
  .button-group {
    flex-direction: column;
    gap: 0.75rem !important;
  }
  
  .button-group .btn {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
  }
}


  color: var(--text-primary);
}

[data-theme='dark'] .groups-scope .device-item:hover {
  background-color: var(--bg-tertiary);
  border-color: var(--bs-primary);
  color: var(--text-primary);
}

[data-theme='dark'] .groups-scope .device-sub {
  color: var(--text-secondary) !important;
}

[data-theme='dark'] .groups-scope .status-dot {
  background-color: #ff6b6b !important;
  box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.5),
    0 0 12px rgba(255, 107, 107, 0.6), 0 0 20px rgba(255, 107, 107, 0.3) !important;
}

[data-theme='dark'] .groups-scope .status-dot.on {
  background-color: #fbbf24 !important;
  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.5),
    0 0 12px rgba(251, 191, 36, 0.7), 0 0 20px rgba(251, 191, 36, 0.4) !important;
}

[data-theme='dark'] .groups-scope .chev {
  color: var(--text-secondary);
}

[data-theme='dark'] .groups-scope .device-actions {
  background-color: var(--card-bg);
}

/* 黑夜模式下的導航標籤 */
[data-theme='dark'] .nav-tabs .nav-link {
  color: var(--text-secondary);
  border-color: var(--border-color);
}

[data-theme='dark'] .nav-tabs .nav-link:hover {
  color: var(--text-primary);
  border-color: var(--border-color);
}

[data-theme='dark'] .nav-tabs .nav-link.active {
  color: var(--text-primary);
  background-color: var(--card-bg);
  border-color: var(--border-color);
}

/* 黑夜模式下的分頁 */
[data-theme='dark'] .pagination .page-link {
  color: var(--text-primary);
  background-color: var(--card-bg);
  border-color: var(--border-color);
}

[data-theme='dark'] .pagination .page-link:hover {
  color: var(--text-primary);
  background-color: var(--bg-tertiary);
  border-color: var(--border-color);
}

[data-theme='dark'] .pagination .page-item.active .page-link {
  background-color: var(--bs-primary);
  border-color: var(--bs-primary);
}

/* 黑夜模式下的進度條 */
[data-theme='dark'] .progress {
  background-color: var(--bg-tertiary);
}

[data-theme='dark'] .progress-bar {
  background-color: var(--bs-primary);
}

/* 黑夜模式下的工具提示 */
[data-theme='dark'] .tooltip .tooltip-inner {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

[data-theme='dark'] .tooltip.bs-tooltip-top .tooltip-arrow::before {
  border-top-color: var(--bg-primary);
}

[data-theme='dark'] .tooltip.bs-tooltip-bottom .tooltip-arrow::before {
  border-bottom-color: var(--bg-primary);
}

[data-theme='dark'] .tooltip.bs-tooltip-start .tooltip-arrow::before {
  border-left-color: var(--bg-primary);
}

[data-theme='dark'] .tooltip.bs-tooltip-end .tooltip-arrow::before {
  border-right-color: var(--bg-primary);
}

/* 淺色模式下的美觀按鈕配色 */
.btn-primary {
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  transition: all 0.3s ease;
}

.btn-primary:hover {
  background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
  transform: translateY(-1px);
}

.btn-outline-primary {
  color: #3b82f6;
  border: 2px solid #3b82f6;
  background: transparent;
  transition: all 0.3s ease;
}

.btn-outline-primary:hover {
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  border-color: #3b82f6;
  color: #fff;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  transform: translateY(-1px);
}

/* 淺色模式下的 btn-success 樣式 */
:not([data-theme='dark']) .btn-success {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  transition: all 0.3s ease;
}

:not([data-theme='dark']) .btn-success:hover {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
  transform: translateY(-1px);
}

.btn-outline-success {
  color: #10b981;
  border: 2px solid #10b981;
  background: transparent;
  transition: all 0.3s ease;
}

.btn-outline-success:hover {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border-color: #10b981;
  color: #fff;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  transform: translateY(-1px);
}

.btn-danger {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
  transition: all 0.3s ease;
}

.btn-danger:hover {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
  transform: translateY(-1px);
}

.btn-outline-danger {
  color: #ef4444;
  border: 2px solid #ef4444;
  background: transparent;
  transition: all 0.3s ease;
}

.btn-outline-danger:hover {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  border-color: #ef4444;
  color: #fff;
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
  transform: translateY(-1px);
}

.btn-info {
  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
  transition: all 0.3s ease;
}

.btn-info:hover {
  background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
  box-shadow: 0 6px 16px rgba(6, 182, 212, 0.4);
  transform: translateY(-1px);
}

.btn-outline-info {
  color: #06b6d4;
  border: 2px solid #06b6d4;
  background: transparent;
  transition: all 0.3s ease;
}

.btn-outline-info:hover {
  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
  border-color: #06b6d4;
  color: #fff;
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
  transform: translateY(-1px);
}

.btn-warning {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  border: none;
  color: #fff;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
  transition: all 0.3s ease;
}

.btn-warning:hover {
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
  box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
  transform: translateY(-1px);
}

/* 黑夜模式切換按鈕樣式 */
#theme-toggle {
  transition: all 0.3s ease;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#theme-toggle:hover {
  transform: scale(1.1);
}

#theme-toggle i {
  font-size: 1.1rem;
  transition: transform 0.3s ease;
}

#theme-toggle:hover i {
  transform: rotate(180deg);
}

/* =========================
   輪播照片樣式
   ========================= */

/* 桌機版輪播照片樣式 - 美化版 */
.carousel-container {
  margin-bottom: 1.5rem;
  position: relative;
}

/* 白天模式輪播樣式 */
.carousel {
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08), 0 8px 25px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
  position: relative;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  border: 1px solid #4a5568;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.carousel:hover {
  transform: translateY(-5px);
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.12), 0 12px 35px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.carousel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.4) 0%, 
    transparent 50%, 
    rgba(255, 255, 255, 0.2) 100%
  );
  /* 移除 z-index */
  pointer-events: none;
}

.carousel-item {
  height: 444px;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
  transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.carousel-item::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.1) 50%,
    rgba(0, 0, 0, 0.3) 100%
  );
  /* 移除 z-index */
}

/* 設定各個輪播項目的背景圖片 */
#p1 {
  background-image: url('../images/01.jpg');
  animation: slideInFromLeft 1s ease-out;
}

#p2 {
  background-image: url('../images/02.jpg');
  animation: slideInFromRight 1s ease-out;
}

#p3 {
  background-image: url('../images/03.jpg');
  animation: slideInFromBottom 1s ease-out;
}

/* 輪播切換動畫 */
@keyframes slideInFromLeft {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInFromRight {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInFromBottom {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

/* 白天模式輪播控制按鈕樣式 */
.carousel-control-prev,
.carousel-control-next {
  width: 60px;
  height: 60px;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 50%;
  border: 1px solid rgba(148, 163, 184, 0.3);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  opacity: 0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* 移除 z-index */
}

.carousel:hover .carousel-control-prev,
.carousel:hover .carousel-control-next {
  opacity: 1;
}

.carousel-control-prev {
  left: 20px;
}

.carousel-control-next {
  right: 20px;
}

.carousel-control-prev:hover,
.carousel-control-next:hover {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(148, 163, 184, 0.5);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  transform: translateY(-50%) scale(1.1);
}

.carousel-control-prev-icon,
.carousel-control-next-icon {
  background-size: 24px 24px;
  width: 24px;
  height: 24px;
  filter: brightness(0.4) drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

/* 白天模式金屬風輪播指示器 */
.carousel-indicators {
  bottom: 20px;
  margin-bottom: 0;
  /* 移除 z-index */
}

/* 移除輪播照片的 z-index 設定 */

.carousel-indicators [data-bs-target] {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  margin: 0 8px;
  position: relative;
  cursor: pointer;
  
  /* 金屬按鈕背景 */
  background: linear-gradient(
    145deg,
    var(--techno-bg-start),
    var(--techno-bg-mid)
  );
  border: 1px solid var(--techno-border);
  
  /* 金屬立體陰影 */
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.6),
    inset 0 -1px 2px rgba(0, 0, 0, 0.15), 0 2px 4px var(--card-shadow);
  
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.carousel-indicators [data-bs-target]::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  right: 2px;
  bottom: 2px;
  border-radius: 50%;
  background: radial-gradient(
    circle at 30% 30%,
    rgba(255, 255, 255, 0.4) 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 70%
  );
  pointer-events: none;
}

.carousel-indicators [data-bs-target]:hover {
  transform: translateY(-1px);
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.7),
    inset 0 -1px 2px rgba(0, 0, 0, 0.2), 0 3px 6px var(--card-shadow-hover);
}

.carousel-indicators .active {
  background: linear-gradient(
    145deg,
    var(--techno-bg-mid),
    var(--techno-bg-end)
  );
  border-color: var(--techno-accent);
  transform: scale(1.15);
  
  /* 活躍狀態增強陰影 */
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.5),
    inset 0 -2px 3px rgba(0, 0, 0, 0.25), 0 0 8px rgba(99, 102, 241, 0.3),
    0 2px 6px var(--card-shadow-hover);
}

.carousel-indicators .active::after {
  background: radial-gradient(
    circle at 30% 30%,
    rgba(99, 102, 241, 0.3) 0%,
    rgba(255, 255, 255, 0.2) 40%,
    transparent 70%
  );
}

/* 黑夜模式下的輪播樣式 */
[data-theme='dark'] .carousel {
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 8px 25px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
  border: 1px solid #2d3748;
}

[data-theme='dark'] .carousel:hover {
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 12px 35px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

[data-theme='dark'] .carousel::before {
  background: linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.05) 0%, 
    transparent 50%, 
    rgba(255, 255, 255, 0.02) 100%
  );
}

[data-theme='dark'] .carousel-item::after {
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.2) 50%,
    rgba(0, 0, 0, 0.5) 100%
  );
}

[data-theme='dark'] .carousel-control-prev,
[data-theme='dark'] .carousel-control-next {
  background: rgba(0, 0, 0, 0.3);
  border-color: rgba(255, 255, 255, 0.1);
}

[data-theme='dark'] .carousel-control-prev:hover,
[data-theme='dark'] .carousel-control-next:hover {
  background: rgba(0, 0, 0, 0.5);
  border-color: rgba(255, 255, 255, 0.2);
}

/* 黑夜模式金屬風輪播指示器 */
[data-theme='dark'] .carousel-indicators [data-bs-target] {
  background: linear-gradient(
    145deg,
    var(--techno-bg-start),
    var(--techno-bg-mid)
  );
  border-color: var(--techno-border);
  
  /* 黑夜模式金屬陰影 */
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.1),
    inset 0 -1px 2px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme='dark'] .carousel-indicators [data-bs-target]::after {
  background: radial-gradient(
    circle at 30% 30%,
    rgba(255, 255, 255, 0.15) 0%,
    rgba(255, 255, 255, 0.05) 50%,
    transparent 70%
  );
}

[data-theme='dark'] .carousel-indicators [data-bs-target]:hover {
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.15),
    inset 0 -1px 2px rgba(0, 0, 0, 0.4), 0 3px 6px rgba(0, 0, 0, 0.5);
}

[data-theme='dark'] .carousel-indicators .active {
  background: linear-gradient(
    145deg,
    var(--techno-bg-mid),
    var(--techno-bg-end)
  );
  border-color: var(--techno-accent);
  
  /* 黑夜模式活躍狀態陰影 */
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.08),
    inset 0 -2px 3px rgba(0, 0, 0, 0.4), 0 0 8px rgba(139, 92, 246, 0.4),
    0 2px 6px rgba(0, 0, 0, 0.5);
}

[data-theme='dark'] .carousel-indicators .active::after {
  background: radial-gradient(
    circle at 30% 30%,
    rgba(139, 92, 246, 0.2) 0%,
    rgba(255, 255, 255, 0.1) 40%,
    transparent 70%
  );
}

/* =========================
   手機版輪播照片隱藏
   ========================= */

/* 手機版隱藏輪播照片 */
@media (max-width: 767.98px) {
  /* 隱藏整個輪播容器 */
  .carousel {
    display: none !important;
  }
  
  /* 隱藏輪播相關的所有元素 */
  .carousel-inner,
  .carousel-item,
  .carousel-control-prev,
  .carousel-control-next,
  .carousel-indicators {
    display: none !important;
  }
  
  /* 隱藏輪播照片的容器行 - 使用特定的 class */
  .carousel-container {
    display: none !important;
  }
}

/* 超小螢幕也隱藏輪播照片 */
@media (max-width: 575.98px) {
  .carousel,
  .carousel-inner,
  .carousel-item,
  .carousel-control-prev,
  .carousel-control-next,
  .carousel-indicators {
    display: none !important;
  }
  
  /* 超小螢幕也隱藏包含輪播的行 */
  .carousel-container {
    display: none !important;
  }
}

/* =========================
   手機版畫面規劃
   ========================= */

/* 狀態卡片通用樣式 */
.techno-card .card-body {
  padding: 1rem !important; /* 桌面版保持標準內距 */
}

/* 手機版裝置狀態記錄優化 */
@media (max-width: 767.98px) {
  /* 隱藏手機版所有標籤和選擇功能下拉選單 */
  label[for='capSelect'],
  #capSelect,
  label[for='groupSelect'],
  label[for='deviceSelect'] {
    display: none !important;
  }

  /* 手機版極度壓縮上下間距 - 容器 */
  .container.my-5 {
    margin-top: 0.25rem !important;
    margin-bottom: 0.25rem !important;
    padding-top: 0.125rem !important;
    padding-bottom: 0.125rem !important;
  }

  /* 手機版極度壓縮上下間距 - 狀態卡片容器 */
  .status-cards-container {
    margin-top: 0.25rem !important;
    margin-bottom: 0.25rem !important;
    padding-top: 0.125rem !important;
    padding-bottom: 0.125rem !important;
  }

  /* 手機版極度壓縮上下間距 - 裝置狀態紀錄容器 */
  #deviceLogsWrapper {
    margin-top: 0.25rem !important;
    margin-bottom: 0.25rem !important;
    padding-top: 0.125rem !important;
    padding-bottom: 0.125rem !important;
  }

  /* 手機版標題和敘述文字同一水平 */
  .container.my-5 h4 {
    margin-top: 0.25rem !important;
    margin-bottom: 0 !important;
    display: inline-block !important;
    font-size: 1.1rem !important;
  }

  /* 手機版標題和敘述文字同一水平 */
  #formPlaceholder {
    margin-bottom: 0.25rem !important;
    display: inline-block !important;
    margin-left: 1rem !important;
    vertical-align: middle !important;
    font-size: 0.85rem !important;
  }

  /* 手機版顯示正確的提示文字 */
  .desktop-text {
    display: none !important;
  }

  .mobile-text {
    display: inline !important;
  }

  /* 手機版極度壓縮上下間距 - 選擇器 */
  #selectors {
    margin-top: 0.25rem !important;
    margin-bottom: 0.25rem !important;
  }

  /* 手機版極度壓縮下拉選單間距 */
  #selectors .row {
    margin-bottom: 0.0625rem !important;
  }

  #selectors .col-md-4,
  #selectors .col-md-3 {
    margin-bottom: 0.0625rem !important;
    padding-left: 0.125rem !important;
    padding-right: 0.125rem !important;
  }

  #selectors .form-select {
    padding: 0.125rem 0.25rem !important;
    font-size: 0.8rem !important;
    margin-bottom: 0.0625rem !important;
    line-height: 1.2 !important;
  }

  #selectors .form-label {
    margin-bottom: 0.0625rem !important;
    font-size: 0.75rem !important;
    line-height: 1.1 !important;
  }

  /* 手機版極度壓縮上下間距 - 能力表單容器 */
  #capForms {
    margin-top: 0.25rem !important;
    margin-bottom: 0.25rem !important;
  }

  /* 手機版極度壓縮上下間距 - 狀態卡片 */
  .status-cards-container .card {
    margin-bottom: 0.5rem !important;
  }

  /* 手機版極度壓縮上下間距 - 卡片內容 */
  .status-cards-container .card-body {
    padding: 0.5rem !important;
  }

  /* 手機版極度壓縮狀態卡片標題 */
  .status-cards-container .card-title {
    margin-bottom: 0.125rem !important;
    font-size: 0.9rem !important;
  }

  /* 手機版極度壓縮狀態卡片文字 */
  .status-cards-container .card-text {
    margin-bottom: 0.125rem !important;
    font-size: 0.8rem !important;
  }

  /* 手機版極度壓縮狀態卡片按鈕 */
  .status-cards-container .btn {
    padding: 0.125rem 0.25rem !important;
    font-size: 0.75rem !important;
    margin-bottom: 0.125rem !important;
  }

  /* 黑夜模式手機版狀態卡片樣式 - 與白天模式保持一致 */
  [data-theme='dark'] .status-cards-container .card {
    margin-bottom: 0.5rem !important;
    min-height: auto !important;
    height: auto !important;
  }

  [data-theme='dark'] .status-cards-container .card-body {
    padding: 0.5rem !important;
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
    min-height: auto !important;
    height: auto !important;
  }

  [data-theme='dark'] .status-cards-container .card-title {
    margin-bottom: 0.125rem !important;
    font-size: 0.9rem !important;
  }

  [data-theme='dark'] .status-cards-container .card-text {
    margin-bottom: 0.125rem !important;
    font-size: 0.8rem !important;
  }

  [data-theme='dark'] .status-cards-container .btn {
    padding: 0.125rem 0.25rem !important;
    font-size: 0.75rem !important;
    margin-bottom: 0.125rem !important;
  }

  /* 手機版極度壓縮上下間距 - 按鈕 */
  .accordion-btn {
    padding: 0.25rem 0.5rem !important;
    margin-bottom: 0.125rem !important;
  }

  /* 手機版極度壓縮上下間距 - 表格容器 */
  .table-responsive {
    margin-bottom: 0.25rem !important;
  }

  /* 手機版極度壓縮上下間距 - 圖表容器 */
  #deviceLogsContainer {
    padding: 0.25rem !important;
  }

  /* 隱藏不需要的欄位 */
  #deviceLogsTable th:nth-child(2), /* 狀態 - 離線時沒有意義 */
  #deviceLogsTable td:nth-child(2),
  #deviceLogsTable th:nth-child(3), /* IP */
  #deviceLogsTable td:nth-child(3),
  #deviceLogsTable th:nth-child(6), /* 溫度 */
  #deviceLogsTable td:nth-child(6) {
    display: none;
  }
  
  /* 調整剩餘欄位寬度 */
  #deviceLogsTable th:nth-child(1), /* 時間 */
  #deviceLogsTable td:nth-child(1) {
    width: 40%;
    font-size: 0.75rem;
  }
  
  #deviceLogsTable th:nth-child(4), /* CPU */
  #deviceLogsTable td:nth-child(4),
  #deviceLogsTable th:nth-child(5), /* 記憶體 */
  #deviceLogsTable td:nth-child(5) {
    width: 30%;
    font-size: 0.8rem;
  }
  
  /* 減少表格內距 */
  #deviceLogsTable td,
  #deviceLogsTable th {
    padding: 0.4rem 0.3rem !important;
  }
  
  /* 表格容器可橫向滾動 */
  .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* =========================
   手機版背景圖片優化
   ========================= */

/* 手機版白天模式背景優化 */
@media (max-width: 767.98px) {
  html:not([data-theme='dark']) body {
    background: 
      /* 手機版漸層淡化遮罩 - 更強的淡化效果 */ linear-gradient(
        180deg,
        rgba(255, 255, 255, 0.2) 0%,
        /* 頂部更透明 */ rgba(255, 255, 255, 0.4) 50%,
        /* 中間適中 */ rgba(255, 255, 255, 0.7) 100% /* 底部更淡 */
      ),
      /* 藍天白雲照片 */ url('../images/sky-background.jpg') !important;

    background-size: 100% 100%, cover !important;
    background-position: center, center !important;
    background-repeat: no-repeat, no-repeat !important;
    background-attachment: scroll, /* 手機版使用 scroll 避免效能問題 */ scroll !important;
    
    min-height: 100vh !important;
    color: #333 !important;
  }
  
  /* 手機版黑夜模式背景優化 */
  [data-theme='dark'] body {
    background: 
      /* 手機版星星效果 - 減少數量提升效能 */ radial-gradient(
        1px 1px at 20% 25%,
        rgba(255, 255, 255, 0.7),
        transparent
      ),
      radial-gradient(1px 1px at 80% 35%, rgba(255, 255, 255, 0.5), transparent),
      radial-gradient(1px 1px at 45% 75%, rgba(255, 255, 255, 0.8), transparent),
      radial-gradient(1px 1px at 25% 85%, rgba(255, 255, 255, 0.4), transparent),
      /* 手機版黑色遮罩層 - 稍微加強 */
        linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
      /* 星空照片背景 */ url('../images/starry-night.jpg'),
      /* 備用漸層背景 */
        linear-gradient(
          135deg,
          #050a1f 0%,
          #0a0a15 25%,
          #0d1020 50%,
          #060608 75%,
          #000000 100%
        ) !important;
    background-size: 80px 80px, 80px 80px, 80px 80px, 80px 80px,
      /* 手機版星星較小 */ 100% 100%, /* 黑色遮罩層 */ cover,
      /* 照片覆蓋整個背景 */ 100% 100% !important; /* 備用背景 */
    background-position: 0 0, 0 0, 0 0, 0 0, /* 星星位置 */ 0 0,
      /* 黑色遮罩層位置 */ center center, /* 照片居中顯示 */ 0 0 !important; /* 備用背景 */
    background-repeat: repeat, no-repeat, no-repeat, no-repeat !important;
    background-attachment: scroll !important; /* 手機版使用 scroll */
    
    /* 手機版優化渲染 */
    image-rendering: auto !important; /* 手機版使用自動渲染 */
    will-change: auto !important; /* 減少 GPU 負擔 */
    animation: none !important; /* 手機版關閉動畫節省電池 */
    
    color: var(--text-primary) !important;
    min-height: 100vh !important;
  }
}

/* 超小螢幕背景圖片優化 (小於 576px) */
@media (max-width: 575.98px) {
  /* 超小螢幕白天模式背景優化 */
  html:not([data-theme='dark']) body {
    background: 
      /* 超小螢幕漸層淡化遮罩 - 更強的淡化效果 */ linear-gradient(
        180deg,
        rgba(255, 255, 255, 0.3) 0%,
        /* 頂部更透明 */ rgba(255, 255, 255, 0.5) 50%,
        /* 中間適中 */ rgba(255, 255, 255, 0.8) 100% /* 底部更淡 */
      ),
      /* 藍天白雲照片 */ url('../images/sky-background.jpg') !important;

    background-size: 100% 100%, cover !important;
    background-position: center, center !important;
    background-repeat: no-repeat, no-repeat !important;
    background-attachment: scroll, /* 超小螢幕使用 scroll 避免效能問題 */ scroll !important;
    
    min-height: 100vh !important;
    color: #333 !important;
  }
  
  /* 超小螢幕黑夜模式背景優化 */
  [data-theme='dark'] body {
    background: 
      /* 超小螢幕星星效果 - 進一步減少數量 */ radial-gradient(
        0.8px 0.8px at 25% 30%,
        rgba(255, 255, 255, 0.6),
        transparent
      ),
      radial-gradient(
        0.8px 0.8px at 75% 40%,
        rgba(255, 255, 255, 0.4),
        transparent
      ),
      radial-gradient(
        0.8px 0.8px at 50% 70%,
        rgba(255, 255, 255, 0.7),
        transparent
      ),
      radial-gradient(
        0.8px 0.8px at 30% 80%,
        rgba(255, 255, 255, 0.3),
        transparent
      ),
      /* 超小螢幕黑色遮罩層 - 加強 */
        linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)),
      /* 星空照片背景 */ url('../images/starry-night.jpg'),
      /* 備用漸層背景 */
        linear-gradient(
          135deg,
          #050a1f 0%,
          #0a0a15 25%,
          #0d1020 50%,
          #060608 75%,
          #000000 100%
        ) !important;
    background-size: 60px 60px, 60px 60px, 60px 60px, 60px 60px,
      /* 超小螢幕星星更小 */ 100% 100%, /* 黑色遮罩層 */ cover,
      /* 照片覆蓋整個背景 */ 100% 100% !important; /* 備用背景 */
    background-position: 0 0, 0 0, 0 0, 0 0, /* 星星位置 */ 0 0,
      /* 黑色遮罩層位置 */ center center, /* 照片居中顯示 */ 0 0 !important; /* 備用背景 */
    background-repeat: repeat, no-repeat, no-repeat, no-repeat !important;
    background-attachment: scroll !important; /* 超小螢幕使用 scroll */
    
    /* 超小螢幕優化渲染 */
    image-rendering: auto !important;
    will-change: auto !important;
    animation: none !important;
    
    color: var(--text-primary) !important;
    min-height: 100vh !important;
  }
}

/* 手機版全面佈局優化 */
@media (max-width: 767.98px) {
  /* 減少手機版 body 和 main 的上方間距 */
  body {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }
  
  main {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }
  
  /* 調整手機版容器邊距和內距 - 大幅壓縮 */
  .container.my-5,
  .container.mt-4,
  .container-fluid.py-4,
  .container-fluid,
  .py-4,
  .pt-4,
  .pb-4 {
    margin-top: 0 !important; /* 移除頂部邊距 */
    margin-bottom: 0 !important; /* 移除底部邊距 */
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
    padding-top: 0 !important; /* 移除頂部內距 */
    padding-bottom: 0 !important; /* 移除底部內距 */
  }

  /* 手機版卡片增加 margin-top */
  .card {
    margin-top: 1rem !important;
  }

  /* 手機版狀態卡片例外 - 移除 margin-top */
  .status-cards-container .card,
  .techno-card {
    margin-top: 0 !important;
  }

  /* 手機版狀態卡片容器保持原有設定 */
  .status-cards-container {
    margin-top: 0.25rem !important; /* 保持原有的壓縮設定 */
  }

  /* 手機版裝置狀態記錄容器增加 margin-top */
  #deviceLogsWrapper {
    margin-top: 2rem !important; /* 添加 mt-3 效果 */
  }

  /* 手機版登入、註冊、忘記密碼頁面增加 margin-top */
  /* 使用 body 類別來識別特定頁面 */
  body.login .container.my-5,
  body.register .container.my-5,
  body.password-reset .container.my-5,
  body.password-reset-confirm .container.my-5 {
    margin-top: 25px !important;
  }

  /* 為標題添加上下邊距和樣式 */
  .container.my-5 h4:first-child {
    margin-top: 1rem !important;
    margin-bottom: 1rem !important;
    padding-top: 0 !important;
    font-weight: 700 !important;
    letter-spacing: 0.5px !important;
    text-transform: uppercase !important;
    font-size: 1.4rem !important;
  }

  /* 白天模式標題樣式 - 使用綠色 */
  html:not([data-theme='dark']) .container.my-5 h4:first-child {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
    position: relative !important;
  }

  /* 白天模式標題下劃線 - 使用綠色 */
  html:not([data-theme='dark']) .container.my-5 h4:first-child::after {
    content: '' !important;
    position: absolute !important;
    bottom: -0.5rem !important;
    left: 0 !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(90deg, #10b981 0%, #059669 100%) !important;
    border-radius: 2px !important;
    box-shadow: 0 0 8px rgba(16, 185, 129, 0.3) !important;
  }

  /* 黑夜模式標題樣式 - 使用藍紫色 */
  [data-theme='dark'] .container.my-5 h4:first-child {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    position: relative !important;
  }

  /* 黑夜模式標題下劃線 - 使用藍紫色 */
  [data-theme='dark'] .container.my-5 h4:first-child::after {
    content: '' !important;
    position: absolute !important;
    bottom: -0.5rem !important;
    left: 0 !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%) !important;
    border-radius: 2px !important;
  }

  /* 為 sideBarLabel 標題套用相同樣式 */
  #sideBarLabel {
    font-weight: 700 !important;
    letter-spacing: 0.5px !important;
    text-transform: uppercase !important;
    font-size: 1.2rem !important;
    margin-bottom: 1rem !important;
  }

  /* 白天模式 sideBarLabel 樣式 - 使用綠色 */
  html:not([data-theme='dark']) #sideBarLabel {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
    position: relative !important;
  }

  /* 白天模式 sideBarLabel 下劃線 - 使用綠色 */
  html:not([data-theme='dark']) #sideBarLabel::after {
    content: '' !important;
    position: absolute !important;
    bottom: -0.5rem !important;
    left: 0 !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(90deg, #10b981 0%, #059669 100%) !important;
    border-radius: 2px !important;
    box-shadow: 0 0 8px rgba(16, 185, 129, 0.3) !important;
  }

  /* 黑夜模式 sideBarLabel 樣式 - 使用藍紫色 */
  [data-theme='dark'] #sideBarLabel {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    position: relative !important;
  }

  /* 黑夜模式 sideBarLabel 下劃線 - 使用藍紫色 */
  [data-theme='dark'] #sideBarLabel::after {
    content: '' !important;
    position: absolute !important;
    bottom: -0.5rem !important;
    left: 0 !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%) !important;
    border-radius: 2px !important;
  }

  /* 手機版 sideBarGroupsLabel 樣式 */
  #sideBarGroupsLabel {
    font-weight: 700 !important;
    letter-spacing: 0.5px !important;
    text-transform: uppercase !important;
    font-size: 1.2rem !important;
    margin-bottom: 1rem !important;
  }

  /* 手機版白天模式 sideBarGroupsLabel 樣式 - 使用綠色 */
  html:not([data-theme='dark']) #sideBarGroupsLabel {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
    position: relative !important;
  }

  /* 手機版白天模式 sideBarGroupsLabel 下劃線 - 使用綠色 */
  html:not([data-theme='dark']) #sideBarGroupsLabel::after {
    content: '' !important;
    position: absolute !important;
    bottom: -0.5rem !important;
    left: 0 !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(90deg, #10b981 0%, #059669 100%) !important;
    border-radius: 2px !important;
    box-shadow: 0 0 8px rgba(16, 185, 129, 0.3) !important;
  }

  /* 手機版黑夜模式 sideBarGroupsLabel 樣式 - 使用藍紫色 */
  [data-theme='dark'] #sideBarGroupsLabel {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    position: relative !important;
  }

  /* 手機版黑夜模式 sideBarGroupsLabel 下劃線 - 使用藍紫色 */
  [data-theme='dark'] #sideBarGroupsLabel::after {
    content: '' !important;
    position: absolute !important;
    bottom: -0.5rem !important;
    left: 0 !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%) !important;
    border-radius: 2px !important;
  }
}

/* 桌機版標題樣式 - 全域設定 */
.container.my-5 h4:first-child {
  font-weight: 700 !important;
  letter-spacing: 0.5px !important;
  text-transform: uppercase !important;
  font-size: 1.4rem !important;
  margin-top: 1rem !important;
  margin-bottom: 1rem !important;
}

/* 桌機版白天模式標題樣式 - 使用綠色 */
html:not([data-theme='dark']) .container.my-5 h4:first-child {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
  position: relative !important;
}

/* 桌機版白天模式標題下劃線 - 使用綠色 */
html:not([data-theme='dark']) .container.my-5 h4:first-child::after {
  content: '' !important;
  position: absolute !important;
  bottom: -0.5rem !important;
  left: 0 !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(90deg, #10b981 0%, #059669 100%) !important;
  border-radius: 2px !important;
  box-shadow: 0 0 8px rgba(16, 185, 129, 0.3) !important;
}

/* 桌機版黑夜模式標題樣式 - 使用藍紫色 */
[data-theme='dark'] .container.my-5 h4:first-child {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  position: relative !important;
}

/* 桌機版黑夜模式標題下劃線 - 使用藍紫色 */
[data-theme='dark'] .container.my-5 h4:first-child::after {
  content: '' !important;
  position: absolute !important;
  bottom: -0.5rem !important;
  left: 0 !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%) !important;
  border-radius: 2px !important;
}

/* 桌機版 sideBarLabel 樣式 - 全域設定 */
#sideBarLabel {
  font-weight: 700 !important;
  letter-spacing: 0.5px !important;
  text-transform: uppercase !important;
  font-size: 1.2rem !important;
  margin-bottom: 1rem !important;
}

/* 桌機版白天模式 sideBarLabel 樣式 - 使用綠色 */
html:not([data-theme='dark']) #sideBarLabel {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
  position: relative !important;
}

/* 桌機版白天模式 sideBarLabel 下劃線 - 使用綠色 */
html:not([data-theme='dark']) #sideBarLabel::after {
  content: '' !important;
  position: absolute !important;
  bottom: -0.5rem !important;
  left: 0 !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(90deg, #10b981 0%, #059669 100%) !important;
  border-radius: 2px !important;
  box-shadow: 0 0 8px rgba(16, 185, 129, 0.3) !important;
}

/* 桌機版黑夜模式 sideBarLabel 樣式 - 使用藍紫色 */
[data-theme='dark'] #sideBarLabel {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  position: relative !important;
}

/* 桌機版黑夜模式 sideBarLabel 下劃線 - 使用藍紫色 */
[data-theme='dark'] #sideBarLabel::after {
  content: '' !important;
  position: absolute !important;
  bottom: -0.5rem !important;
  left: 0 !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%) !important;
  border-radius: 2px !important;
}

/* 桌機版 sideBarGroupsLabel 樣式 - 全域設定 */
#sideBarGroupsLabel {
  font-weight: 700 !important;
  letter-spacing: 0.5px !important;
  text-transform: uppercase !important;
  font-size: 1.2rem !important;
  margin-bottom: 1rem !important;
}

/* 桌機版白天模式 sideBarGroupsLabel 樣式 - 使用綠色 */
html:not([data-theme='dark']) #sideBarGroupsLabel {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
  position: relative !important;
}

/* 桌機版白天模式 sideBarGroupsLabel 下劃線 - 使用綠色 */
html:not([data-theme='dark']) #sideBarGroupsLabel::after {
  content: '' !important;
  position: absolute !important;
  bottom: -0.5rem !important;
  left: 0 !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(90deg, #10b981 0%, #059669 100%) !important;
  border-radius: 2px !important;
  box-shadow: 0 0 8px rgba(16, 185, 129, 0.3) !important;
}

/* 桌機版黑夜模式 sideBarGroupsLabel 樣式 - 使用藍紫色 */
[data-theme='dark'] #sideBarGroupsLabel {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  position: relative !important;
}

/* 桌機版黑夜模式 sideBarGroupsLabel 下劃線 - 使用藍紫色 */
[data-theme='dark'] #sideBarGroupsLabel::after {
  content: '' !important;
  position: absolute !important;
  bottom: -0.5rem !important;
  left: 0 !important;
  width: 60px !important;
  height: 3px !important;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%) !important;
  border-radius: 2px !important;
  
  /* 手機版標題和提示文字同一水平 */
  .container h4.mb-3 {
    margin-bottom: 0 !important;
    display: inline-block !important;
    margin-right: 0.75rem !important;
    vertical-align: baseline !important;
    font-size: 1.1rem !important; /* 稍微縮小標題 */
  }
  
  #formPlaceholder.mb-3 {
    margin-bottom: 0 !important;
    display: inline-block !important;
    vertical-align: baseline !important;
    font-size: 0.85rem !important;
  }
  
  /* 手機版標題容器調整 */
  .container h4.mb-3 + #formPlaceholder {
    display: inline-block !important;
  }
  
  .desktop-only {
    display: none !important;
  }
  
  /* 手機版隱藏選擇器標籤 */
  label[for='groupSelect'],
  label[for='deviceSelect'] {
    display: none !important;
  }
  
  /* 壓縮選擇器間距 */
  .row.g-3.align-items-end {
    --bs-gutter-y: 0.25rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  /* 壓縮表單容器間距 */
  #ajaxMsg.mt-3 {
    margin-top: 0.75rem !important;
  }
  
  
  #capForms.mt-4 {
    margin-top: 0.5rem !important;
  }
  
  /* 統一狀態卡片間距 - 縮小上下距離 */
  .row.g-3 {
    --bs-gutter-x: 1rem !important;
    --bs-gutter-y: 0.5rem !important;
  }
  
  .row.g-3 .col-md-4 {
    margin-bottom: 0.25rem !important;
  }
  
  /* 確保所有狀態卡片高度一致 */
  .techno-card {
    min-height: 140px !important;
  }
  
  .techno-card .card-body {
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    padding: 0.75rem 1rem !important; /* 減少上下內距，從預設的 1rem 改為 0.75rem */
  }
  
  /* 手機版電子鎖按鈕優化 */
  .locker-btn {
    font-size: 0.85rem !important;
    padding: 0.4rem 0.8rem !important;
    border-radius: 8px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
    min-width: 80px !important;
  }
  
  .locker-btn:hover {
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  }
  
  .locker-btn:active {
    transform: translateY(0) !important;
  }
  
  /* 手機版表單按鈕優化 */
  .btn-sm {
    font-size: 0.8rem !important;
    padding: 0.35rem 0.7rem !important;
  }
  
  /* 手機版電子鎖表單美化 */
  
  #lockerCard .row.align-items-start {
    gap: 1.5rem !important;
  }
  
  /* 手機版按鈕區域 */
  #lockerCard .col-md-5 {
    margin-bottom: 1.25rem !important;
  }
  
  #lockerCard .col-md-5.d-flex {
    gap: 0.75rem !important;
    justify-content: center !important;
  }
  
  /* 手機版排程表單區域 */
  #lockerCard .col-md-7 form {
    gap: 1rem !important;
  }
  
  #lockerCard .col-auto {
    margin-bottom: 0.75rem !important;
  }
  
  #lockerCard .form-label {
    margin-bottom: 0.5rem !important;
    font-weight: 500 !important;
    color: var(--text-primary) !important;
  }
  
  #lockerCard .form-control-sm {
    padding: 0.5rem 0.75rem !important;
    font-size: 0.9rem !important;
    border-radius: 6px !important;
  }
  
  #lockerCard .col-12 {
    margin-top: 1rem !important;
  }
  
  #lockerCard .small {
    line-height: 1.4 !important;
    margin-bottom: 0.5rem !important;
  }
  
  /* 手機版提示文字樣式 */
  .mobile-text {
    display: inline !important;
    font-size: 0.85rem;
  }
  
  .desktop-text {
    display: none !important;
  }
  
  /* 手機版狀態卡片可點擊樣式 */
  .mobile-clickable {
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .mobile-clickable:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }
  
  .mobile-clickable:active {
    transform: translateY(0);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }
  
  /* 手機版狀態卡片點擊效果 */
  .mobile-clickable::after {
    content: '點擊控制';
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.7rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }
  
  .mobile-clickable:hover::after {
    opacity: 1;
  }
}

/* 桌面版顯示完整功能 */
@media (min-width: 768px) {
  .mobile-text {
    display: none !important;
  }
  
  .desktop-text {
    display: inline !important;
  }
  
  .desktop-only {
    display: block !important;
  }
  
  /* 桌機版隱藏「我的裝置控制」標題 */
  .container h4.mb-3 {
    display: none !important;
  }
  
  /* 桌機版縮減選擇器容器間距 */
  .container.my-5 {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
  }
  
  /* 桌機版移除狀態卡片容器的上邊距 */
  .status-cards-container.my-5 {
    margin-top: 0 !important;
  }
  
  /* 桌機版操作表單美化 */
  #capForms .card {
    border: none;
    border-radius: 14px;
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08), 0 2px 12px rgba(0, 0, 0, 0.04);
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-bottom: 0.75rem !important;
    overflow: hidden;
    position: relative;
  }
  
  /* 移除相機表單的下方間距 */
  #capForms .card:has(.bi-camera-video) {
    margin-bottom: 0 !important;
  }
  
  #capForms .card-body {
    padding: 1.25rem !important;
  }
  
  #capForms .card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2.5px;
    background: linear-gradient(
      90deg,
      #ff0000 0%,
      /* 紅 */ #ff8000 14%,
      /* 橙 */ #ffff00 28%,
      /* 黃 */ #80ff00 42%,
      /* 黃綠 */ #00ff00 56%,
      /* 綠 */ #00ff80 70%,
      /* 青綠 */ #00ffff 84%,
      /* 青 */ #8000ff 100% /* 紫 */
    );
    z-index: 1 !important;
  }
  
  #capForms .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.12), 0 8px 24px rgba(0, 0, 0, 0.08);
  }
  
  #capForms .card-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 1rem !important;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e2e8f0;
    position: relative;
  }
  
  #capForms .card-title::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 60px;
    height: 2px;
    background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%);
  }
  
  /* 左側控制區域 */
  #capForms .col-md-5 {
    padding-right: 1.5rem;
    border-right: 2px solid #e2e8f0;
  }
  
  /* 右側排程區域 */
  #capForms .col-md-7 {
    padding-left: 1.5rem;
  }
  
  /* 開關樣式優化 */
  #capForms .form-check-input {
    width: 3rem;
    height: 1.5rem;
    border-radius: 1rem;
    border: 2px solid #d1d5db;
    background-color: #f3f4f6;
    transition: all 0.3s ease;
  }
  
  #capForms .form-check-input:checked {
    background-color: #6366f1;
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
  }
  
  #capForms .form-check-label {
    font-weight: 500;
    color: #374151;
    margin-left: 0.5rem;
  }
  
  /* 按鈕樣式優化 */
  #capForms .btn {
    border-radius: 10px;
    font-weight: 500;
    padding: 0.375rem 1rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
    font-size: 0.875rem;
  }
  
  #capForms .btn-outline-secondary {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border-color: #cbd5e1;
    color: #475569;
  }
  
  #capForms .btn-outline-secondary:hover {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    border-color: #6366f1;
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
  }
  
  #capForms .btn-outline-success {
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    border-color: #22c55e;
    color: #16a34a;
  }
  
  #capForms .btn-outline-success:hover {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    border-color: #22c55e;
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(34, 197, 94, 0.3);
  }
  
  #capForms .btn-outline-primary {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border-color: #3b82f6;
    color: #2563eb;
  }
  
  #capForms .btn-outline-primary:hover {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    border-color: #3b82f6;
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
  }
  
  #capForms .btn-success {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    border-color: #22c55e;
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2);
  }
  
  #capForms .btn-success:hover {
    background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(34, 197, 94, 0.4);
  }
  
  /* 表單輸入框優化 */
  #capForms .form-control {
    border-radius: 8px;
    border: 2px solid #e2e8f0;
    padding: 0.5rem 0.75rem;
    transition: all 0.3s ease;
    background-color: #f8fafc;
    font-size: 0.875rem;
  }
  
  #capForms .form-control:focus {
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    background-color: #ffffff;
  }
  
  #capForms .form-label {
    font-weight: 500;
    color: #374151;
    margin-bottom: 0.25rem;
    font-size: 0.875rem;
  }
  
  /* 排程表單網格優化 */
  #capForms .row.gy-2.gx-2 {
    margin: 0;
  }
  
  #capForms .row.gy-2.gx-2 .col-auto {
    padding: 0.25rem 0.5rem;
  }
  
  /* 提示文字樣式 */
  #capForms .text-muted {
    color: #6b7280 !important;
    font-size: 0.875rem;
  }
  
  #capForms .text-success {
    color: #16a34a !important;
    font-weight: 500;
  }
  
  #capForms .text-danger {
    color: #dc2626 !important;
    font-weight: 500;
  }
}

/* 黑夜模式操作表單樣式 */
[data-theme='dark'] #capForms .card {
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%) !important;
  border: 1px solid #475569 !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 16px rgba(0, 0, 0, 0.2) !important;
}

[data-theme='dark'] #capForms .card::before {
  background: linear-gradient(
    90deg,
    #ff4444 0%,
    /* 紅 */ #ff8844 14%,
    /* 橙 */ #ffff44 28%,
    /* 黃 */ #88ff44 42%,
    /* 黃綠 */ #44ff44 56%,
    /* 綠 */ #44ff88 70%,
    /* 青綠 */ #44ffff 84%,
    /* 青 */ #8844ff 100% /* 紫 */
  ) !important;
}

[data-theme='dark'] #capForms .card:hover {
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4), 0 8px 24px rgba(0, 0, 0, 0.3) !important;
}

[data-theme='dark'] #capForms .card-title {
  color: #f1f5f9 !important;
  border-bottom-color: #475569 !important;
}

[data-theme='dark'] #capForms .card-title::after {
  background: linear-gradient(90deg, #8b5cf6 0%, #06b6d4 100%) !important;
}

[data-theme='dark'] #capForms .col-md-5 {
  border-right-color: #475569 !important;
}

[data-theme='dark'] #capForms .form-check-input {
  background-color: #374151 !important;
  border-color: #6b7280 !important;
}

[data-theme='dark'] #capForms .form-check-input:checked {
  background-color: #8b5cf6 !important;
  border-color: #8b5cf6 !important;
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2) !important;
}

[data-theme='dark'] #capForms .form-check-label {
  color: #d1d5db !important;
}

[data-theme='dark'] #capForms .btn-outline-secondary {
  background: linear-gradient(135deg, #374151 0%, #4b5563 100%) !important;
  border-color: #6b7280 !important;
  color: #d1d5db !important;
}

[data-theme='dark'] #capForms .btn-outline-secondary:hover {
  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important;
  border-color: #8b5cf6 !important;
  color: #ffffff !important;
}

[data-theme='dark'] #capForms .btn-outline-success {
  background: linear-gradient(135deg, #064e3b 0%, #065f46 100%) !important;
  border-color: #10b981 !important;
  color: #34d399 !important;
}

[data-theme='dark'] #capForms .btn-outline-success:hover {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  border-color: #10b981 !important;
  color: #ffffff !important;
}

[data-theme='dark'] #capForms .btn-outline-primary {
  background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%) !important;
  border-color: #3b82f6 !important;
  color: #60a5fa !important;
}

[data-theme='dark'] #capForms .btn-outline-primary:hover {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
  border-color: #3b82f6 !important;
  color: #ffffff !important;
}

[data-theme='dark'] #capForms .btn-success {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  border-color: #10b981 !important;
}

[data-theme='dark'] #capForms .btn-success:hover {
  background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;
}

[data-theme='dark'] #capForms .form-control {
  background-color: #374151 !important;
  border-color: #6b7280 !important;
  color: #f9fafb !important;
}

[data-theme='dark'] #capForms .form-control:focus {
  background-color: #4b5563 !important;
  border-color: #8b5cf6 !important;
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2) !important;
  color: #ffffff !important;
}

[data-theme='dark'] #capForms .form-label {
  color: #d1d5db !important;
}

[data-theme='dark'] #capForms .text-muted {
  color: #9ca3af !important;
}

[data-theme='dark'] #capForms .text-success {
  color: #34d399 !important;
}

[data-theme='dark'] #capForms .text-danger {
  color: #f87171 !important;
}

/* 強制覆蓋 offcanvas 黑夜模式毛玻璃效果 - 最高優先級 */
html[data-theme='dark'] body .offcanvas,
html[data-theme='dark'] .offcanvas.show,
html[data-theme='dark'] .offcanvas {
  background: rgba(30, 41, 59, 0.15) !important;
  background-color: rgba(30, 41, 59, 0.15) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border-right: 1px solid rgba(71, 85, 105, 0.2) !important;
}

html[data-theme='dark'] body .offcanvas-header,
html[data-theme='dark'] .offcanvas-header {
  background: rgba(30, 41, 59, 0.2) !important;
  background-color: rgba(30, 41, 59, 0.2) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
}

html[data-theme='dark'] body .offcanvas-body,
html[data-theme='dark'] .offcanvas-body,
html[data-theme='dark'] #offcanvas-devices-body {
  background: rgba(30, 41, 59, 0.12) !important;
  background-color: rgba(30, 41, 59, 0.12) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: none !important;
}

/* 超強制覆蓋 navbar 黑夜模式 - 終極優先級 */
html[data-theme='dark'] body .navbar.navbar-dark,
html[data-theme='dark'] body .navbar.navbar-expand-lg,
html[data-theme='dark'] body .navbar,
html[data-theme='dark'] .navbar.navbar-dark.bg-dark,
html[data-theme='dark'] .navbar.bg-dark,
html[data-theme='dark'] nav.navbar {
  background: rgba(30, 41, 59, 0.05) !important;
  background-color: rgba(30, 41, 59, 0.05) !important;
  backdrop-filter: blur(25px) saturate(200%) !important;
  -webkit-backdrop-filter: blur(25px) saturate(200%) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.15) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 12px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
  z-index: 1030 !important;
}

html[data-theme='dark'] body .navbar-collapse,
html[data-theme='dark'] .navbar-collapse {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* 黑夜模式狀態卡片毛玻璃效果 - 參考白天模式和 navbar */
html[data-theme='dark'] .techno-card {
  background: rgba(30, 41, 59, 0.15) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.3) !important;
  border-radius: 16px !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  /* 恢復 position: relative 以支援掃光動畫 */
  position: relative !important;
}

html[data-theme='dark'] .techno-card:hover {
  background: rgba(30, 41, 59, 0.25) !important;
  backdrop-filter: blur(25px) saturate(200%) !important;
  -webkit-backdrop-filter: blur(25px) saturate(200%) !important;
  transform: translateY(-4px) !important;
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4), 0 8px 24px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
  border-color: rgba(99, 102, 241, 0.5) !important;
}

/* 黑夜模式狀態卡片 badge 毛玻璃效果 - 星光偏藍紫色 */
html[data-theme='dark'] .techno-card .badge.bg-success {
  background: linear-gradient(
    135deg,
    rgba(139, 92, 246, 0.85) 0%,
    rgba(99, 102, 241, 0.9) 100%
  ) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  border: 1px solid rgba(99, 102, 241, 0.5) !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6) !important;
  box-shadow: 0 4px 20px rgba(99, 102, 241, 0.5),
    0 2px 12px rgba(139, 92, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.25) !important;
}

html[data-theme='dark'] .techno-card .badge.bg-secondary {
  background: rgba(100, 116, 139, 0.7) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  border: 1px solid rgba(100, 116, 139, 0.4) !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
  box-shadow: 0 4px 16px rgba(100, 116, 139, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

/* 通知 badge 脈衝動畫效果 - 提高優先級 */
.badge.bg-danger,
.badge.rounded-pill.bg-danger,
.position-absolute.badge.bg-danger {
  animation: dangerPulse 2s ease-in-out infinite !important;
}

[data-theme='dark'] .badge.bg-danger,
[data-theme='dark'] .badge.rounded-pill.bg-danger,
[data-theme='dark'] .position-absolute.badge.bg-danger {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important;
  border: 1px solid rgba(220, 38, 38, 0.6) !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  box-shadow: 0 0 20px rgba(220, 38, 38, 0.6), 0 0 40px rgba(220, 38, 38, 0.4),
    0 4px 16px rgba(220, 38, 38, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
}

/* 白天模式綠色通知 badge 動畫效果 - 不破壞 Bootstrap 定位 */
html:not([data-theme='dark']) .badge.bg-danger,
html:not([data-theme='dark']) .badge.rounded-pill.bg-danger,
html:not([data-theme='dark']) .position-absolute.badge.bg-danger {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  border: 1px solid rgba(16, 185, 129, 0.6) !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
  animation: successPulse 2s ease-in-out infinite !important;
  box-shadow: 0 0 20px rgba(16, 185, 129, 0.5), 0 0 40px rgba(16, 185, 129, 0.3),
    0 4px 16px rgba(16, 185, 129, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}

/* 動畫關鍵幀 - 黑夜模式紅色脈衝 */
@keyframes dangerPulse {
  0%,
  100% {
    transform: scale(1) !important;
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.6), 0 0 40px rgba(220, 38, 38, 0.4),
      0 4px 16px rgba(220, 38, 38, 0.5) !important;
  }
  50% {
    transform: scale(1.05) !important;
    box-shadow: 0 0 30px rgba(220, 38, 38, 0.8), 0 0 60px rgba(220, 38, 38, 0.6),
      0 6px 20px rgba(220, 38, 38, 0.7) !important;
  }
}

/* 動畫關鍵幀 - 白天模式綠色脈衝 + 高光效果 */
@keyframes successPulse {
  0% {
    transform: scale(1) !important;
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.5),
      0 0 40px rgba(16, 185, 129, 0.3), 0 4px 16px rgba(16, 185, 129, 0.4),
      inset 2px -2px 4px rgba(255, 255, 255, 0.4) !important;
  }
  25% {
    transform: scale(1.02) !important;
    box-shadow: 0 0 25px rgba(16, 185, 129, 0.6),
      0 0 50px rgba(16, 185, 129, 0.4), 0 5px 18px rgba(16, 185, 129, 0.5),
      inset -2px 2px 6px rgba(255, 255, 255, 0.6) !important;
  }
  50% {
    transform: scale(1.05) !important;
    box-shadow: 0 0 30px rgba(16, 185, 129, 0.7),
      0 0 60px rgba(16, 185, 129, 0.5), 0 6px 20px rgba(16, 185, 129, 0.6),
      inset 3px -3px 8px rgba(255, 255, 255, 0.8) !important;
  }
  75% {
    transform: scale(1.02) !important;
    box-shadow: 0 0 25px rgba(16, 185, 129, 0.6),
      0 0 50px rgba(16, 185, 129, 0.4), 0 5px 18px rgba(16, 185, 129, 0.5),
      inset -3px 3px 6px rgba(255, 255, 255, 0.6) !important;
  }
  100% {
    transform: scale(1) !important;
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.5),
      0 0 40px rgba(16, 185, 129, 0.3), 0 4px 16px rgba(16, 185, 129, 0.4),
      inset 2px -2px 4px rgba(255, 255, 255, 0.4) !important;
  }
}

/* 桌機版 navbar 字體大小優化 */
@media (min-width: 768px) {
  .navbar-brand {
    font-size: 1.5rem !important;
    font-weight: 700 !important;
  }

  .navbar-nav .nav-link {
    font-size: 1.1rem !important;
    font-weight: 600 !important;
    padding: 0.6rem 1.2rem !important;
  }

  .navbar-text {
    font-size: 1rem !important;
    font-weight: 500 !important;
  }

  .navbar-nav .btn {
    font-size: 1rem !important;
    font-weight: 600 !important;
    padding: 0.6rem 1.4rem !important;
  }

  .dropdown-menu {
    font-size: 1.1rem !important;
  }

  .dropdown-item {
    font-size: 1.1rem !important;
    padding: 0.6rem 1.4rem !important;
  }
}

/* 大螢幕 (≥ 1200px) 進一步增大字體 */
@media (min-width: 1200px) {
  .navbar-brand {
    font-size: 1.7rem !important;
  }

  .navbar-nav .nav-link {
    font-size: 1.2rem !important;
    padding: 0.7rem 1.4rem !important;
  }

  .navbar-text {
    font-size: 1.1rem !important;
  }

  .navbar-nav .btn {
    font-size: 1.1rem !important;
    padding: 0.7rem 1.6rem !important;
  }

  .dropdown-menu {
    font-size: 1.2rem !important;
  }

  .dropdown-item {
    font-size: 1.2rem !important;
    padding: 0.7rem 1.6rem !important;
  }
}

/* 黑夜模式 table-responsive 毛玻璃效果 - 可見透明 */
html[data-theme='dark'] body .table-responsive {
  background: rgba(30, 41, 59, 0.12) !important;
  background-color: rgba(30, 41, 59, 0.12) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.25) !important;
  border-radius: 12px !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 4px 16px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
  overflow: hidden !important;
}

html[data-theme='dark'] body #deviceLogsCollapse .table-responsive,
html[data-theme='dark'] body .collapse .table-responsive {
  background: rgba(30, 41, 59, 0.1) !important;
  background-color: rgba(30, 41, 59, 0.1) !important;
  backdrop-filter: blur(18px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(18px) saturate(180%) !important;
  border: 1px solid rgba(71, 85, 105, 0.2) !important;
  border-radius: 8px !important;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12), 0 3px 12px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.06) !important;
}

/* 手機版 table-responsive 毛玻璃效果優化 */
@media (max-width: 767.98px) {
  html[data-theme='dark'] body .table-responsive {
    background: rgba(30, 41, 59, 0.15) !important;
    background-color: rgba(30, 41, 59, 0.15) !important;
    backdrop-filter: blur(15px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(15px) saturate(180%) !important;
    border: 1px solid rgba(71, 85, 105, 0.3) !important;
    border-radius: 8px !important;
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.18), 0 3px 12px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
    overflow: hidden !important;
    margin: 0.5rem 0 !important;
  }

  html[data-theme='dark'] body #deviceLogsCollapse .table-responsive,
  html[data-theme='dark'] body .collapse .table-responsive {
    background: rgba(30, 41, 59, 0.12) !important;
    background-color: rgba(30, 41, 59, 0.12) !important;
    backdrop-filter: blur(12px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(12px) saturate(180%) !important;
    border: 1px solid rgba(71, 85, 105, 0.25) !important;
    border-radius: 6px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
    margin: 0.25rem 0 !important;
  }
}

/* navbar 連結 hover 展開效果 */
@media (min-width: 768px) {
  .nav-link[data-bs-toggle='offcanvas'] {
    position: relative !important;
    transition: all 0.3s ease !important;
  }

  .nav-link[data-bs-toggle='offcanvas']:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: 6px !important;
    transform: translateY(-1px) !important;
  }

  [data-theme='dark'] .nav-link[data-bs-toggle='offcanvas']:hover {
    background: rgba(139, 92, 246, 0.2) !important;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3) !important;
  }
}

/* 手機版強制覆蓋 - 確保毛玻璃效果在所有裝置上生效 */
@media (max-width: 767.98px) {
  /* 手機版 navbar 黑夜模式強制覆蓋 */
  html[data-theme='dark'] body .navbar,
  html[data-theme='dark'] .navbar.navbar-expand-lg,
  html[data-theme='dark'] .navbar.navbar-dark,
  html[data-theme='dark'] .navbar {
    background: rgba(30, 41, 59, 0.1) !important;
    background-color: rgba(30, 41, 59, 0.1) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
    min-height: 56px !important;
    padding: 0.5rem 0 !important;
  }

  /* 手機版 techno-card 黑夜模式強制覆蓋 */
  html[data-theme='dark'] body .techno-card,
  html[data-theme='dark'] .techno-card {
    background: rgba(30, 41, 59, 0.15) !important;
    background-color: rgba(30, 41, 59, 0.15) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border: 1px solid rgba(71, 85, 105, 0.3) !important;
    min-height: 140px !important;
  }

  html[data-theme='dark'] body .techno-card:hover,
  html[data-theme='dark'] .techno-card:hover {
    background: rgba(30, 41, 59, 0.25) !important;
    backdrop-filter: blur(25px) saturate(200%) !important;
    -webkit-backdrop-filter: blur(25px) saturate(200%) !important;
    transform: translateY(-2px) !important; /* 手機版減少上浮距離 */
  }
}

/* 超小螢幕強制覆蓋 */
@media (max-width: 575.98px) {
  /* 超小螢幕 navbar 黑夜模式強制覆蓋 */
  html[data-theme='dark'] body .navbar,
  html[data-theme='dark'] .navbar {
    background: rgba(30, 41, 59, 0.1) !important;
    background-color: rgba(30, 41, 59, 0.1) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border-bottom: 1px solid rgba(71, 85, 105, 0.15) !important;
  }
}
